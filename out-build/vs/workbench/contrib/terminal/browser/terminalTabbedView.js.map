{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalTabbedView.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;;;;IAyBhG,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAEhB,IAAW,QAEV;IAFD,WAAW,QAAQ;QAClB,iDAAqC,CAAA;IACtC,CAAC,EAFU,QAAQ,KAAR,QAAQ,QAElB;IAED,IAAW,cAGV;IAHD,WAAW,cAAc;QACxB,gEAAe,CAAA;QACf,0EAAoB,CAAA;IACrB,CAAC,EAHU,cAAc,KAAd,cAAc,QAGxB;IAEM,IAAM,IAAI,GAAV,MAAM,IAAmB,SAAQ,eAAG;QA8B1C,YACC,aAA0B,EACR,CAAuC,EAClC,CAA4C,EAC5C,CAA2C,EAC5C,CAA0C,EAC3C,CAAyC,EACvC,CAA2C,EACpD,WAAgB,EACb,CAAqC,EAClC,iBAAsB,EAC3B,CAAoC;YAEnD,KAAK,EAAE,CAAC;YAX2B,MAAC,GAAD,CAAC,CAAqB;YACjB,MAAC,GAAD,CAAC,CAA0B;YAC3B,MAAC,GAAD,CAAC,CAAyB;YAC3B,MAAC,GAAD,CAAC,CAAwB;YAC1B,MAAC,GAAD,CAAC,CAAuB;YACtB,MAAC,GAAD,CAAC,CAAyB;YAEhC,MAAC,GAAD,CAAC,CAAmB;YAEtB,MAAC,GAAD,CAAC,CAAkB;YAtB5C,MAAC,GAA6B,KAAK,CAAC;YA0B3C,IAAI,CAAC,CAAC,GAAe,CAAC,CAAC,iBAAiB,CAAC,CAAC;YAC1C,MAAM,gBAAgB,GAAG,CAAC,CAAC,sBAAsB,CAAC,CAAC;YACnD,IAAI,CAAC,CAAC,GAAiB,CAAC,CAAC,YAAY,CAAC,CAAC;YACvC,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAe,CAAC;YACnD,IAAI,CAAC,CAAC,CAAa,WAAW,CAAC,gBAAgB,CAAC,CAAC;YAEjD,IAAI,CAAC,CAAC,GAAe,IAAI,CAAC,CAAC,CAAS,WAAW,CAAC,UAAU,CAAC,aAAG,CAAI,uBAAuB,EAAE,iBAAiB,CAAC,CAAC,CAAC;YAC/G,IAAI,CAAC,CAAC,GAAe,IAAI,CAAC,CAAC,CAAS,WAAW,CAAC,UAAU,CAAC,aAAG,CAAI,kBAAkB,EAAE,iBAAiB,CAAC,CAAC,CAAC;YAC1G,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC,CAAC,CAAS,WAAW,CAAC,UAAU,CAAC,aAAG,CAAI,2BAA2B,EAAE,iBAAiB,CAAC,CAAC,CAAC;YAExH,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAqB,cAAc,CAAC,uBAAI,EAAa,IAAI,CAAC,CAAC,CAAe,CAAC,CAAC;YAEjH,MAAM,sBAAsB,GAAG,CAAC,CAAC,2BAA2B,CAAC,CAAC;YAC9D,IAAI,CAAC,CAAC,GAAoB,CAAC,CAAC,4BAA4B,CAAC,CAAC;YAC1D,sBAAsB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAkB,CAAC;YAE5D,IAAI,CAAC,CAAC,CAAgB,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CAAkB,CAAC;YAE5E,IAAI,CAAC,CAAC,GAAiC,wCAAmB,CAAC,UAAU,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;YAChG,IAAI,CAAC,CAAC,GAA8B,wCAAmB,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;YAC5F,IAAI,CAAC,CAAC,GAA8B,wCAAmB,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;YAE5F,IAAI,CAAC,CAAC,GAAe,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChG,IAAI,CAAC,CAAC,GAAyB,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1G,CAAC,CAAqB,wBAAwB,CAAC,CAAC,CAAC,EAAE;gBAClD,IAAI,CAAC,CAAC,oBAAoB,wEAA+B;oBACxD,CAAC,CAAC,oBAAoB,oFAAqC,EAAE;oBAC7D,IAAI,CAAC,CAAC,EAAiB,CAAC;iBACxB;qBAAM,IAAI,CAAC,CAAC,oBAAoB,0EAAgC,EAAE;oBAClE,IAAI,CAAC,CAAC,GAAe,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAChG,IAAI,CAAC,CAAC,GAAyB,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1G,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;wBAC3B,IAAI,CAAC,CAAC,CAAU,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBAChC,IAAI,CAAC,EAAE,EAAmB,CAAC;wBAC3B,IAAI,CAAC,EAAE,EAAgB,CAAC;wBACxB,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,EAAkB,CAAC,CAAC;qBACzE;iBACD;YACF,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAqB,oBAAoB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAiB,CAAC,CAAC,CAAC;YAC/F,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAqB,iBAAiB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAiB,CAAC,CAAC,CAAC;YAE5F,IAAI,CAAC,EAAE,CAAoB,aAAa,EAAE,IAAI,CAAC,CAAC,CAAkB,CAAC;YAEnE,IAAI,CAAC,CAAC,CAAqB,2BAA2B,CAAC,CAAC,WAAW,EAAE,EAAE;gBACtE,IAAI,CAAC,CAAC,GAAmB,WAAW,CAAC;gBACrC,IAAI,IAAI,CAAC,CAAC,iCAAyC,EAAE;oBACpD,IAAI,CAAC,CAAC,CAAkB,SAAS,CAAC,GAAG,oDAAyB,CAAC;iBAC/D;qBAAM;oBACN,IAAI,CAAC,CAAC,CAAkB,SAAS,CAAC,MAAM,oDAAyB,CAAC;iBAClE;YACF,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,CAAC,GAAY,IAAI,eAAG,CAAO,aAAa,EAAE,EAAE,WAAW,gCAAwB,EAAE,kBAAkB,EAAE,KAAK,EAAE,CAAC,CAAC;YACnH,IAAI,CAAC,CAAC,CAAe,sBAAsB,CAAC,CAAC;QAC9C,CAAC;QAEO,CAAC;YACR,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;YACvE,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;YAC1E,IAAI,CAAC,OAAO,EAAE;gBACb,OAAO,KAAK,CAAC;aACb;YAED,IAAI,IAAI,KAAK,OAAO,EAAE;gBACrB,OAAO,IAAI,CAAC;aACZ;YAED,IAAI,IAAI,KAAK,gBAAgB,IAAI,IAAI,CAAC,CAAC,CAAqB,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjF,OAAO,IAAI,CAAC;aACZ;YAED,IAAI,IAAI,KAAK,aAAa,IAAI,IAAI,CAAC,CAAC,CAAqB,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3E,OAAO,IAAI,CAAC;aACZ;YAED,OAAO,KAAK,CAAC;QACd,CAAC;QAEO,CAAC;YACR,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC3B,IAAI,IAAI,CAAC,CAAC,CAAU,MAAM,KAAK,CAAC,EAAE;oBACjC,IAAI,CAAC,EAAE,EAAW,CAAC;oBACnB,IAAI,CAAC,EAAE,EAAgB,CAAC;oBACxB,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,EAAkB,CAAC,CAAC;oBACzE,IAAI,CAAC,YAAY,EAAE,CAAC;iBACpB;aACD;iBAAM;gBACN,IAAI,IAAI,CAAC,CAAC,CAAU,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAA4B,GAAG,EAAE,EAAE;oBAC7E,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,CAAa,CAAC;oBAC/C,IAAI,IAAI,CAAC,CAAC,EAAY;wBACrB,IAAI,CAAC,CAAC,CAAa,WAAW,CAAC,IAAI,CAAC,CAAC,CAAW,CAAC;qBACjD;oBACD,IAAI,CAAC,EAAE,EAAmB,CAAC;iBAC3B;aACD;QACF,CAAC;QAEO,CAAC;YACR,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,iCAAyC,CAAC,CAAC,4EAA2C,CAAC,+EAA4C,CAAC;YAC3J,MAAM,WAAW,GAAG,IAAI,CAAC,CAAC,CAAe,GAAG,CAAC,QAAQ,+BAAuB,CAAC;YAE7E,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;gBAC3C,0EAA0E;gBAC1E,yEAAyE;gBACzE,OAAO,IAAI,CAAC,CAAC,iCAAyC,CAAC,CAAC,gDAAuC,CAAC,6CAAmC,CAAC;aACpI;YACD,OAAO,QAAQ,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;QAEO,CAAC;YACR,yEAAyE;YACzE,IAAI,UAAU,sDAA6C,CAAC;YAC5D,MAAM,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACzD,eAAe,CAAC,KAAK,GAAG,CAAC,CAAC;YAC1B,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;YAC3B,MAAM,GAAG,GAAG,eAAe,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC7C,IAAI,GAAG,EAAE;gBACR,MAAM,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAe,CAAC;gBAC5D,GAAG,CAAC,IAAI,GAAG,GAAG,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;gBACtE,MAAM,gBAAgB,GAAG,IAAI,CAAC,CAAC,CAAqB,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;oBAC7E,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAmB,CAAC,CAAC,CAAC,CAAC;gBAC1G,CAAC,EAAE,CAAC,CAAC,CAAC;gBACN,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,sDAA6C,CAAC,CAAC;aAC/F;YACD,oDAAoD;YACpD,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAU,WAAW,CAAC,IAAI,CAAC,CAAC,CAAa,CAAC,CAAC;YAChF,IAAI,YAAY,KAAK,UAAU,EAAE;gBAChC,UAAU,iDAAwC,CAAC;aACnD;YACD,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,UAAU,CAAC,CAAC;YAC3D,IAAI,CAAC,CAAC,CAAgB,UAAU,CAAC,CAAC;QACnC,CAAC;QAEO,CAAC,CAAmB,QAA2B;YACtD,kGAAkG;YAClG,MAAM,eAAe,GAAG,EAAE,CAAC;YAC3B,MAAM,eAAe,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,oCAA2B,CAAC,CAAC,CAAC,CAAC;YAChG,MAAM,oBAAoB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAqB,mBAAmB,CAAC,QAAQ,CAAC,EAAE,iBAAiB,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,yCAAgC,CAAC,CAAC,CAAC,CAAC;YAChK,OAAO,eAAe,GAAG,oBAAoB,GAAG,eAAe,CAAC;QACjE,CAAC;QAEO,CAAC;YACR,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAU,WAAW,CAAC,IAAI,CAAC,CAAC,CAAa,CAAC;YAClE,IAAI,CAAC,IAAI,CAAC,CAAC,IAAS,SAAS,IAAI,CAAC,EAAE;gBACnC,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAAgB,SAAS,CAAC,CAAC;QAClC,CAAC;QAEO,CAAC,CAAgB,KAAa;YACrC,IAAI,KAAK,mDAA0C,IAAI,KAAK,kDAAyC,EAAE;gBACtG,KAAK,iDAAwC,CAAC;gBAC9C,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,KAAK,CAAC,CAAC;aACtD;iBAAM,IAAI,KAAK,oDAA2C,IAAI,KAAK,sDAA6C,EAAE;gBAClH,KAAK,sDAA6C,CAAC;gBACnD,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,KAAK,CAAC,CAAC;aACtD;YACD,IAAI,CAAC,YAAY,EAAE,CAAC;YACpB,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,iCAAyC,CAAC,CAAC,4EAA2C,CAAC,+EAA4C,CAAC;YAC3J,IAAI,CAAC,CAAC,CAAe,KAAK,CAAC,QAAQ,EAAE,KAAK,2DAA2C,CAAC;QACvF,CAAC;QAEO,CAAC,CAAe,sBAAmC;YAC1D,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAU,cAAc,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAsB,CAAC,CAAC,CAAC;YACnF,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAU,eAAe,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,EAAuB,CAAC,CAAC,CAAC;YAErF,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC3B,IAAI,CAAC,EAAE,EAAW,CAAC;aACnB;YACD,IAAI,CAAC,CAAC,CAAU,OAAO,CAAC;gBACvB,OAAO,EAAE,sBAAsB;gBAC/B,MAAM,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAqB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAU,CAAC,CAAC,CAAC;gBACvG,WAAW,EAAE,GAAG;gBAChB,WAAW,EAAE,MAAM,CAAC,iBAAiB;gBACrC,WAAW,EAAE,GAAG,EAAE,CAAC,eAAG,CAAQ,IAAI;gBAClC,QAAQ,6BAAqB;aAC7B,EAAE,kBAAM,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAuB,CAAC;YAEpD,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC3B,IAAI,CAAC,EAAE,EAAgB,CAAC;aACxB;QACF,CAAC;QAEO,EAAE;YACT,IAAI,CAAC,CAAC,CAAU,OAAO,CAAC;gBACvB,OAAO,EAAE,IAAI,CAAC,CAAC;gBACf,MAAM,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAQ,MAAM,CAAC,IAAI,CAAC,CAAC,IAAU,CAAC,EAAE,KAAK,CAAC;gBAC/D,WAAW,gDAAuC;gBAClD,WAAW,8CAAoC;gBAC/C,WAAW,EAAE,GAAG,EAAE,CAAC,eAAG,CAAQ,IAAI;gBAClC,QAAQ,4BAAoB;aAC5B,EAAE,kBAAM,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAa,CAAC;YAC1C,IAAI,CAAC,YAAY,EAAE,CAAC;QACrB,CAAC;QAED,YAAY;YACX,IAAI,CAAC,EAAE,EAAc,CAAC;YACtB,IAAI,CAAC,CAAC,CAAQ,OAAO,EAAE,CAAC;QACzB,CAAC;QAEO,EAAE;YACT,IAAI,QAAgB,CAAC;YACrB,IAAI,CAAC,CAAC,GAAkB;gBACvB,IAAI,CAAC,CAAC,CAAU,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;oBACxC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;wBAClC,IAAI,CAAC,YAAY,EAAE,CAAC;oBACrB,CAAC,EAAE,GAAG,CAAC,CAAC;gBACT,CAAC,CAAC;gBACF,IAAI,CAAC,CAAC,CAAU,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;oBACtC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAC/B,QAAQ,GAAG,CAAC,CAAC;gBACd,CAAC,CAAC;aACF,CAAC;QACH,CAAC;QAEO,EAAE;YACT,IAAI,IAAI,CAAC,CAAC,EAAiB;gBAC1B,IAAA,eAAG,EAAK,IAAI,CAAC,CAAC,CAAgB,CAAC;gBAC/B,IAAI,CAAC,CAAC,GAAkB,SAAS,CAAC;aAClC;QACF,CAAC;QAEO,EAAE;YACT,MAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAe,WAAW,mDAA0C,CAAC;YAC3F,IAAI,CAAC,CAAC,CAAa,SAAS,CAAC,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YACzD,IAAI,CAAC,CAAC,CAA+B,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;QACpD,CAAC;QAED,MAAM,CAAC,KAAa,EAAE,MAAc;YACnC,IAAI,CAAC,CAAC,GAAS,MAAM,CAAC;YACtB,IAAI,CAAC,CAAC,GAAQ,KAAK,CAAC;YACpB,IAAI,CAAC,CAAC,CAAU,MAAM,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC3B,IAAI,CAAC,CAAC,CAAU,UAAU,CAAC,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,EAAkB,CAAC,CAAC;aACzE;YACD,IAAI,CAAC,EAAE,EAAc,CAAC;QACvB,CAAC;QAEO,EAAE,CAAoB,gBAA6B,EAAE,iBAA8B;YAC1F,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,IAAI,CAAC,CAAC,EAAc,YAAY,EAAE,KAAK,EAAE,KAAiB,EAAE,EAAE;gBACtG,IAAI,CAAC,CAAC,CAA4B,GAAG,CAAC,KAAK,CAAC,CAAC;gBAC7C,IAAI,CAAC,CAAC,EAAiB,CAAC;gBACxB,KAAK,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,IAAI,CAAC,CAAC,EAAc,YAAY,EAAE,KAAK,EAAE,KAAiB,EAAE,EAAE;gBACtG,IAAI,CAAC,CAAC,CAA4B,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC5C,KAAK,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,iBAAiB,EAAE,WAAW,EAAE,KAAK,EAAE,KAAiB,EAAE,EAAE;gBACpG,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAqB,cAAc,CAAC;gBAC3D,IAAI,IAAI,CAAC,CAAC,CAAqB,SAAS,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE;oBACnE,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC;oBAC/B,OAAO;iBACP;gBAED,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,IAAI,aAAE,EAAO;oBACjC,sFAAsF;oBACtF,kCAAkC;oBAClC,QAAQ,CAAC,KAAK,EAAE,CAAC;iBACjB;qBAAM,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;oBAC7B,MAAM,kBAAkB,GAAG,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,kBAAkB,CAAC;oBACxF,IAAI,kBAAkB,KAAK,SAAS,EAAE;wBACrC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;4BACpB,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC;yBAC/B;wBACD,OAAO;qBACP;yBACI,IAAI,kBAAkB,KAAK,WAAW,IAAI,kBAAkB,KAAK,OAAO,EAAE;wBAC9E,wDAAwD;wBACxD,IAAI,kBAAkB,KAAK,WAAW,IAAI,KAAK,CAAC,QAAQ,EAAE;4BACzD,IAAA,0BAAI,EAAY,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,CAAmB,CAAC;4BAC/E,OAAO;yBACP;wBAED,IAAI,kBAAkB,KAAK,WAAW,IAAI,QAAQ,CAAC,YAAY,EAAE,EAAE;4BAClE,MAAM,QAAQ,CAAC,aAAa,EAAE,CAAC;4BAC/B,QAAQ,CAAC,cAAc,EAAE,CAAC;yBAC1B;6BAAM;4BACN,IAAI,aAAG,CAAa,SAAS,CAAC,QAAQ,EAAE;gCACvC,QAAQ,CAAC,KAAK,EAAE,CAAC;6BACjB;iCAAM;gCACN,IAAI,CAAC,CAAC,CAAoB,IAAI,CAAC,0FAA0F,aAAE,CAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,aAAa,CAAC,CAAC;6BAClK;yBACD;wBACD,+EAA+E;wBAC/E,8EAA8E;wBAC9E,2EAA2E;wBAC3E,sBAAsB;wBACtB,IAAI,aAAE,EAAW;4BAChB,UAAU,CAAC,GAAG,EAAE;gCACf,QAAQ,CAAC,cAAc,EAAE,CAAC;4BAC3B,CAAC,EAAE,CAAC,CAAC,CAAC;yBACN;wBACD,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC;qBAC/B;iBACD;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,iBAAiB,EAAE,aAAa,EAAE,CAAC,KAAiB,EAAE,EAAE;gBAChG,MAAM,kBAAkB,GAAG,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,kBAAkB,CAAC;gBACxF,IAAI,kBAAkB,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oBACxD,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC;iBAC/B;gBACD,iBAAiB,CAAC,KAAK,EAAE,CAAC;gBAC1B,IAAI,CAAC,IAAI,CAAC,CAAC,EAAmB;oBAC7B,IAAA,0BAAI,EAAY,KAAK,EAAE,IAAI,CAAC,CAAC,CAAqB,cAAe,EAAE,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,CAAmB,CAAC;iBACjH;gBACD,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,KAAK,CAAC,wBAAwB,EAAE,CAAC;gBACjC,IAAI,CAAC,CAAC,GAAoB,KAAK,CAAC;YACjC,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,IAAI,CAAC,CAAC,EAAc,aAAa,EAAE,CAAC,KAAiB,EAAE,EAAE;gBACjG,MAAM,kBAAkB,GAAG,IAAI,CAAC,CAAC,CAAgB,YAAY,CAAC,MAAM,CAAC,kBAAkB,CAAC;gBACxF,IAAI,kBAAkB,KAAK,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;oBACxD,IAAI,CAAC,CAAC,GAAoB,IAAI,CAAC;iBAC/B;gBACD,IAAI,CAAC,IAAI,CAAC,CAAC,EAAmB;oBAC7B,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAQ,QAAQ,EAAE,CAAC,MAAM,KAAK,CAAC,CAAC;oBACxD,IAAI,CAAC,SAAS,EAAE;wBACf,IAAI,CAAC,CAAC,CAAqB,gBAAgB,GAAG,UAAU,CAAC;qBACzD;oBAED,2EAA2E;oBAC3E,MAAM,iBAAiB,GAAG,IAAI,CAAC,CAAC,CAAQ,mBAAmB,EAAE,CAAC;oBAC9D,MAAM,eAAe,GAAG,IAAI,CAAC,CAAC,CAAQ,kBAAkB,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;oBAChE,IAAI,eAAe,EAAE;wBACpB,iBAAiB,CAAC,MAAM,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,KAAK,eAAe,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC3G,iBAAiB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;qBAC3C;oBAED,IAAA,0BAAI,EAAY,KAAK,EAAE,iBAAiB,EAAE,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAkB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAc,IAAI,CAAC,CAAC,EAAoB,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,EAAc,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;iBAC7K;gBACD,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,KAAK,CAAC,wBAAwB,EAAE,CAAC;gBACjC,IAAI,CAAC,CAAC,GAAoB,KAAK,CAAC;YACjC,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,QAAQ,EAAE,SAAS,EAAE,CAAC,KAAoB,EAAE,EAAE;gBACtF,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAClE,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,QAAQ,EAAE,OAAO,EAAE,CAAC,KAAoB,EAAE,EAAE;gBACpF,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAClE,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,gBAAgB,EAAE,OAAO,EAAE,CAAC,KAAoB,EAAE,EAAE;gBAC5F,IAAI,KAAK,CAAC,OAAO,KAAK,EAAE,EAAE;oBACzB,+BAA+B;oBAC/B,KAAK,CAAC,eAAe,EAAE,CAAC;iBACxB;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,IAAI,CAAC,CAAC,EAAc,GAAG,CAAC,GAAG,CAAO,QAAQ,EAAE,GAAG,EAAE;gBACzF,IAAI,CAAC,CAAC,CAA4B,GAAG,CAAC,IAAI,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,CAAC,CAAS,GAAG,CAAC,GAAG,CAAmB,IAAI,CAAC,CAAC,EAAc,GAAG,CAAC,GAAG,CAAO,SAAS,EAAE,GAAG,EAAE;gBAC1F,IAAI,CAAC,CAAC,CAA4B,GAAG,CAAC,KAAK,CAAC,CAAC;YAC9C,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAEO,EAAE;YACT,OAAO;gBACN,IAAI,aAAG,EAAQ;gBACf,IAAI,CAAC,CAAC,CAAqB,OAAO,0EAAgC,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC;oBACxF,IAAI,aAAG,CAAI,WAAW,EAAE,IAAA,cAAQ,EAAC,CAAe,EAAE,IAAiB,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,IAAI,EAAE;wBACtG,IAAI,CAAC,CAAC,CAAqB,WAAW,2EAAiC,OAAO,CAAC,CAAC;oBACjF,CAAC,CAAC,CAAC,CAAC;oBACJ,IAAI,aAAG,CAAI,UAAU,EAAE,IAAA,cAAQ,EAAC,CAAc,EAAE,IAAgB,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,IAAI,EAAE;wBACnG,IAAI,CAAC,CAAC,CAAqB,WAAW,2EAAiC,MAAM,CAAC,CAAC;oBAChF,CAAC,CAAC;gBACH,IAAI,aAAG,CAAI,UAAU,EAAE,IAAA,cAAQ,EAAC,CAAU,EAAE,IAAW,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,IAAI,EAAE;oBAC1F,IAAI,CAAC,CAAC,CAAqB,WAAW,yEAAgC,KAAK,CAAC,CAAC;gBAC9E,CAAC,CAAC;aACF,CAAC;QACH,CAAC;QAED,WAAW,CAAC,SAAkB;YAC7B,IAAI,CAAC,SAAS,EAAE;gBACf,IAAI,CAAC,CAAC,CAAQ,QAAQ,EAAE,CAAC;aACzB;YACD,IAAI,CAAC,CAAC,CAAQ,OAAO,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC;QAED,SAAS;YACR,IAAI,CAAC,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC5B,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAA4B,GAAG,CAAC,IAAI,CAAC,CAAC;YAC5C,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAQ,YAAY,EAAE,CAAC;YAC9C,IAAI,CAAC,CAAC,CAAQ,QAAQ,EAAE,CAAC;YACzB,IAAI,QAAQ,EAAE;gBACb,IAAI,CAAC,CAAC,CAAQ,QAAQ,CAAC,QAAQ,CAAC,CAAC;aACjC;QACF,CAAC;QAED,KAAK;YACJ,IAAI,IAAI,CAAC,CAAC,CAAgB,eAAe,+CAAuC,EAAE;gBACjF,8GAA8G;gBAC9G,4DAA4D;gBAC5D,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC;gBAC7C,IAAI,CAAC,CAAC,CAAS,IAAI,CAAC,CAAC,CAAgB,0BAA0B,CAAC,GAAG,EAAE;oBACpE,wFAAwF;oBACxF,YAAY;oBACZ,IAAI,QAAQ,CAAC,aAAa,KAAK,aAAa,EAAE;wBAC7C,IAAI,CAAC,EAAE,EAAM,CAAC;qBACd;gBACF,CAAC,CAAC,CAAC,CAAC;gBAEJ,OAAO;aACP;YACD,IAAI,CAAC,EAAE,EAAM,CAAC;QACf,CAAC;QAED,UAAU;YACT,IAAI,IAAI,CAAC,CAAC,EAAgB,EAAE;gBAC3B,IAAI,CAAC,CAAC,CAAQ,UAAU,EAAE,CAAC;gBAC3B,OAAO;aACP;YACD,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAqB,cAAc,CAAC;YAC3D,IAAI,CAAC,QAAQ,EAAE;gBACd,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAAa,SAAS,CAAC;gBAC5B,GAAG,IAAA,sBAAI,EAAiB,QAAQ,CAAC;gBACjC,MAAM,EAAE,IAAI,CAAC,CAAC;gBACd,SAAS,EAAE,IAAI;aACf,EAAE,IAAI,CAAC,CAAC;QACV,CAAC;QAEO,EAAE;YACT,IAAI,CAAC,CAAC,CAAqB,cAAc,EAAE,cAAc,EAAE,CAAC;QAC7D,CAAC;KACD,CAAA;IA1dY,oBAAI;mBAAJ,IAAI;QAgCd,WAAA,eAAI,CAAA;QACJ,WAAA,eAAI,CAAA;QACJ,WAAA,mBAAG,CAAA;QACH,WAAA,kBAAG,CAAA;QACH,WAAA,iBAAG,CAAA;QACH,WAAA,mBAAG,CAAA;QACH,WAAA,aAAG,CAAA;QACH,WAAA,aAAG,CAAA;QACH,WAAA,gBAAG,CAAA;QACH,YAAA,YAAI,CAAA;OAzCM,IAAI,CA0dhB","file":"terminalTabbedView.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { LayoutPriority, Orientation, Sizing, SplitView } from 'vs/base/browser/ui/splitview/splitview';\nimport { Disposable, dispose, IDisposable } from 'vs/base/common/lifecycle';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ITerminalGroupService, ITerminalInstance, ITerminalService, TerminalConnectionState } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { TerminalTabsListSizes, TerminalTabList } from 'vs/workbench/contrib/terminal/browser/terminalTabsList';\nimport { isLinux, isMacintosh } from 'vs/base/common/platform';\nimport * as dom from 'vs/base/browser/dom';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { Action, IAction, Separator } from 'vs/base/common/actions';\nimport { IMenu, IMenuService, MenuId } from 'vs/platform/actions/common/actions';\nimport { IContextKey, IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { TerminalSettingId } from 'vs/platform/terminal/common/terminal';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { localize } from 'vs/nls';\nimport { openContextMenu } from 'vs/workbench/contrib/terminal/browser/terminalContextMenu';\nimport { TerminalStorageKeys } from 'vs/workbench/contrib/terminal/common/terminalStorageKeys';\nimport { TerminalContextKeys } from 'vs/workbench/contrib/terminal/common/terminalContextKey';\nimport { getInstanceHoverInfo } from 'vs/workbench/contrib/terminal/browser/terminalTooltip';\nimport { IHoverService } from 'vs/workbench/services/hover/browser/hover';\n\nconst $ = dom.$;\n\nconst enum CssClass {\n\tViewIsVertical = 'terminal-side-view',\n}\n\nconst enum WidthConstants {\n\tStatusIcon = 30,\n\tSplitAnnotation = 30\n}\n\nexport class TerminalTabbedView extends Disposable {\n\n\tprivate _splitView: SplitView;\n\n\tprivate _terminalContainer: HTMLElement;\n\tprivate _tabListElement: HTMLElement;\n\tprivate _tabContainer: HTMLElement;\n\n\tprivate _tabList: TerminalTabList;\n\tprivate _sashDisposables: IDisposable[] | undefined;\n\n\tprivate _plusButton: HTMLElement | undefined;\n\n\tprivate _tabTreeIndex: number;\n\tprivate _terminalContainerIndex: number;\n\n\tprivate _height: number | undefined;\n\tprivate _width: number | undefined;\n\n\tprivate _cancelContextMenu: boolean = false;\n\tprivate _instanceMenu: IMenu;\n\tprivate _tabsListMenu: IMenu;\n\tprivate _tabsListEmptyMenu: IMenu;\n\n\tprivate _terminalIsTabsNarrowContextKey: IContextKey<boolean>;\n\tprivate _terminalTabsFocusContextKey: IContextKey<boolean>;\n\tprivate _terminalTabsMouseContextKey: IContextKey<boolean>;\n\n\tprivate _panelOrientation: Orientation | undefined;\n\n\tconstructor(\n\t\tparentElement: HTMLElement,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\n\t\tthis._tabContainer = $('.tabs-container');\n\t\tconst tabListContainer = $('.tabs-list-container');\n\t\tthis._tabListElement = $('.tabs-list');\n\t\ttabListContainer.appendChild(this._tabListElement);\n\t\tthis._tabContainer.appendChild(tabListContainer);\n\n\t\tthis._instanceMenu = this._register(menuService.createMenu(MenuId.TerminalInstanceContext, contextKeyService));\n\t\tthis._tabsListMenu = this._register(menuService.createMenu(MenuId.TerminalTabContext, contextKeyService));\n\t\tthis._tabsListEmptyMenu = this._register(menuService.createMenu(MenuId.TerminalTabEmptyAreaContext, contextKeyService));\n\n\t\tthis._tabList = this._register(this._instantiationService.createInstance(TerminalTabList, this._tabListElement));\n\n\t\tconst terminalOuterContainer = $('.terminal-outer-container');\n\t\tthis._terminalContainer = $('.terminal-groups-container');\n\t\tterminalOuterContainer.appendChild(this._terminalContainer);\n\n\t\tthis._terminalService.setContainers(parentElement, this._terminalContainer);\n\n\t\tthis._terminalIsTabsNarrowContextKey = TerminalContextKeys.tabsNarrow.bindTo(contextKeyService);\n\t\tthis._terminalTabsFocusContextKey = TerminalContextKeys.tabsFocus.bindTo(contextKeyService);\n\t\tthis._terminalTabsMouseContextKey = TerminalContextKeys.tabsMouse.bindTo(contextKeyService);\n\n\t\tthis._tabTreeIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 0 : 1;\n\t\tthis._terminalContainerIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 1 : 0;\n\n\t\t_configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TerminalSettingId.TabsEnabled) ||\n\t\t\t\te.affectsConfiguration(TerminalSettingId.TabsHideCondition)) {\n\t\t\t\tthis._refreshShowTabs();\n\t\t\t} else if (e.affectsConfiguration(TerminalSettingId.TabsLocation)) {\n\t\t\t\tthis._tabTreeIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 0 : 1;\n\t\t\t\tthis._terminalContainerIndex = this._terminalService.configHelper.config.tabs.location === 'left' ? 1 : 0;\n\t\t\t\tif (this._shouldShowTabs()) {\n\t\t\t\t\tthis._splitView.swapViews(0, 1);\n\t\t\t\t\tthis._removeSashListener();\n\t\t\t\t\tthis._addSashListener();\n\t\t\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastListWidth());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._register(this._terminalGroupService.onDidChangeInstances(() => this._refreshShowTabs()));\n\t\tthis._register(this._terminalGroupService.onDidChangeGroups(() => this._refreshShowTabs()));\n\n\t\tthis._attachEventListeners(parentElement, this._terminalContainer);\n\n\t\tthis._terminalGroupService.onDidChangePanelOrientation((orientation) => {\n\t\t\tthis._panelOrientation = orientation;\n\t\t\tif (this._panelOrientation === Orientation.VERTICAL) {\n\t\t\t\tthis._terminalContainer.classList.add(CssClass.ViewIsVertical);\n\t\t\t} else {\n\t\t\t\tthis._terminalContainer.classList.remove(CssClass.ViewIsVertical);\n\t\t\t}\n\t\t});\n\n\t\tthis._splitView = new SplitView(parentElement, { orientation: Orientation.HORIZONTAL, proportionalLayout: false });\n\t\tthis._setupSplitView(terminalOuterContainer);\n\t}\n\n\tprivate _shouldShowTabs(): boolean {\n\t\tconst enabled = this._terminalService.configHelper.config.tabs.enabled;\n\t\tconst hide = this._terminalService.configHelper.config.tabs.hideCondition;\n\t\tif (!enabled) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (hide === 'never') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (hide === 'singleTerminal' && this._terminalGroupService.instances.length > 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (hide === 'singleGroup' && this._terminalGroupService.groups.length > 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate _refreshShowTabs() {\n\t\tif (this._shouldShowTabs()) {\n\t\t\tif (this._splitView.length === 1) {\n\t\t\t\tthis._addTabTree();\n\t\t\t\tthis._addSashListener();\n\t\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastListWidth());\n\t\t\t\tthis.rerenderTabs();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._splitView.length === 2 && !this._terminalTabsMouseContextKey.get()) {\n\t\t\t\tthis._splitView.removeView(this._tabTreeIndex);\n\t\t\t\tif (this._plusButton) {\n\t\t\t\t\tthis._tabContainer.removeChild(this._plusButton);\n\t\t\t\t}\n\t\t\t\tthis._removeSashListener();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _getLastListWidth(): number {\n\t\tconst widthKey = this._panelOrientation === Orientation.VERTICAL ? TerminalStorageKeys.TabsListWidthVertical : TerminalStorageKeys.TabsListWidthHorizontal;\n\t\tconst storedValue = this._storageService.get(widthKey, StorageScope.PROFILE);\n\n\t\tif (!storedValue || !parseInt(storedValue)) {\n\t\t\t// we want to use the min width by default for the vertical orientation bc\n\t\t\t// there is such a limited width for the terminal panel to begin w there.\n\t\t\treturn this._panelOrientation === Orientation.VERTICAL ? TerminalTabsListSizes.NarrowViewWidth : TerminalTabsListSizes.DefaultWidth;\n\t\t}\n\t\treturn parseInt(storedValue);\n\t}\n\n\tprivate _handleOnDidSashReset(): void {\n\t\t// Calculate ideal size of list to display all text based on its contents\n\t\tlet idealWidth = TerminalTabsListSizes.WideViewMinimumWidth;\n\t\tconst offscreenCanvas = document.createElement('canvas');\n\t\toffscreenCanvas.width = 1;\n\t\toffscreenCanvas.height = 1;\n\t\tconst ctx = offscreenCanvas.getContext('2d');\n\t\tif (ctx) {\n\t\t\tconst style = window.getComputedStyle(this._tabListElement);\n\t\t\tctx.font = `${style.fontStyle} ${style.fontSize} ${style.fontFamily}`;\n\t\t\tconst maxInstanceWidth = this._terminalGroupService.instances.reduce((p, c) => {\n\t\t\t\treturn Math.max(p, ctx.measureText(c.title + (c.description || '')).width + this._getAdditionalWidth(c));\n\t\t\t}, 0);\n\t\t\tidealWidth = Math.ceil(Math.max(maxInstanceWidth, TerminalTabsListSizes.WideViewMinimumWidth));\n\t\t}\n\t\t// If the size is already ideal, toggle to collapsed\n\t\tconst currentWidth = Math.ceil(this._splitView.getViewSize(this._tabTreeIndex));\n\t\tif (currentWidth === idealWidth) {\n\t\t\tidealWidth = TerminalTabsListSizes.NarrowViewWidth;\n\t\t}\n\t\tthis._splitView.resizeView(this._tabTreeIndex, idealWidth);\n\t\tthis._updateListWidth(idealWidth);\n\t}\n\n\tprivate _getAdditionalWidth(instance: ITerminalInstance): number {\n\t\t// Size to include padding, icon, status icon (if any), split annotation (if any), + a little more\n\t\tconst additionalWidth = 40;\n\t\tconst statusIconWidth = instance.statusList.statuses.length > 0 ? WidthConstants.StatusIcon : 0;\n\t\tconst splitAnnotationWidth = (this._terminalGroupService.getGroupForInstance(instance)?.terminalInstances.length || 0) > 1 ? WidthConstants.SplitAnnotation : 0;\n\t\treturn additionalWidth + splitAnnotationWidth + statusIconWidth;\n\t}\n\n\tprivate _handleOnDidSashChange(): void {\n\t\tconst listWidth = this._splitView.getViewSize(this._tabTreeIndex);\n\t\tif (!this._width || listWidth <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tthis._updateListWidth(listWidth);\n\t}\n\n\tprivate _updateListWidth(width: number): void {\n\t\tif (width < TerminalTabsListSizes.MidpointViewWidth && width >= TerminalTabsListSizes.NarrowViewWidth) {\n\t\t\twidth = TerminalTabsListSizes.NarrowViewWidth;\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, width);\n\t\t} else if (width >= TerminalTabsListSizes.MidpointViewWidth && width < TerminalTabsListSizes.WideViewMinimumWidth) {\n\t\t\twidth = TerminalTabsListSizes.WideViewMinimumWidth;\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, width);\n\t\t}\n\t\tthis.rerenderTabs();\n\t\tconst widthKey = this._panelOrientation === Orientation.VERTICAL ? TerminalStorageKeys.TabsListWidthVertical : TerminalStorageKeys.TabsListWidthHorizontal;\n\t\tthis._storageService.store(widthKey, width, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate _setupSplitView(terminalOuterContainer: HTMLElement): void {\n\t\tthis._register(this._splitView.onDidSashReset(() => this._handleOnDidSashReset()));\n\t\tthis._register(this._splitView.onDidSashChange(() => this._handleOnDidSashChange()));\n\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._addTabTree();\n\t\t}\n\t\tthis._splitView.addView({\n\t\t\telement: terminalOuterContainer,\n\t\t\tlayout: width => this._terminalGroupService.groups.forEach(tab => tab.layout(width, this._height || 0)),\n\t\t\tminimumSize: 120,\n\t\t\tmaximumSize: Number.POSITIVE_INFINITY,\n\t\t\tonDidChange: () => Disposable.None,\n\t\t\tpriority: LayoutPriority.High\n\t\t}, Sizing.Distribute, this._terminalContainerIndex);\n\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._addSashListener();\n\t\t}\n\t}\n\n\tprivate _addTabTree() {\n\t\tthis._splitView.addView({\n\t\t\telement: this._tabContainer,\n\t\t\tlayout: width => this._tabList.layout(this._height || 0, width),\n\t\t\tminimumSize: TerminalTabsListSizes.NarrowViewWidth,\n\t\t\tmaximumSize: TerminalTabsListSizes.MaximumWidth,\n\t\t\tonDidChange: () => Disposable.None,\n\t\t\tpriority: LayoutPriority.Low\n\t\t}, Sizing.Distribute, this._tabTreeIndex);\n\t\tthis.rerenderTabs();\n\t}\n\n\trerenderTabs() {\n\t\tthis._updateHasText();\n\t\tthis._tabList.refresh();\n\t}\n\n\tprivate _addSashListener() {\n\t\tlet interval: number;\n\t\tthis._sashDisposables = [\n\t\t\tthis._splitView.sashes[0].onDidStart(e => {\n\t\t\t\tinterval = window.setInterval(() => {\n\t\t\t\t\tthis.rerenderTabs();\n\t\t\t\t}, 100);\n\t\t\t}),\n\t\t\tthis._splitView.sashes[0].onDidEnd(e => {\n\t\t\t\twindow.clearInterval(interval);\n\t\t\t\tinterval = 0;\n\t\t\t})\n\t\t];\n\t}\n\n\tprivate _removeSashListener() {\n\t\tif (this._sashDisposables) {\n\t\t\tdispose(this._sashDisposables);\n\t\t\tthis._sashDisposables = undefined;\n\t\t}\n\t}\n\n\tprivate _updateHasText() {\n\t\tconst hasText = this._tabListElement.clientWidth > TerminalTabsListSizes.MidpointViewWidth;\n\t\tthis._tabContainer.classList.toggle('has-text', hasText);\n\t\tthis._terminalIsTabsNarrowContextKey.set(!hasText);\n\t}\n\n\tlayout(width: number, height: number): void {\n\t\tthis._height = height;\n\t\tthis._width = width;\n\t\tthis._splitView.layout(width);\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._splitView.resizeView(this._tabTreeIndex, this._getLastListWidth());\n\t\t}\n\t\tthis._updateHasText();\n\t}\n\n\tprivate _attachEventListeners(parentDomElement: HTMLElement, terminalContainer: HTMLElement): void {\n\t\tthis._register(dom.addDisposableListener(this._tabContainer, 'mouseleave', async (event: MouseEvent) => {\n\t\t\tthis._terminalTabsMouseContextKey.set(false);\n\t\t\tthis._refreshShowTabs();\n\t\t\tevent.stopPropagation();\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabContainer, 'mouseenter', async (event: MouseEvent) => {\n\t\t\tthis._terminalTabsMouseContextKey.set(true);\n\t\t\tevent.stopPropagation();\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(terminalContainer, 'mousedown', async (event: MouseEvent) => {\n\t\t\tconst terminal = this._terminalGroupService.activeInstance;\n\t\t\tif (this._terminalGroupService.instances.length === 0 || !terminal) {\n\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.which === 2 && isLinux) {\n\t\t\t\t// Drop selection and focus terminal on Linux to enable middle button paste when click\n\t\t\t\t// occurs on the selection itself.\n\t\t\t\tterminal.focus();\n\t\t\t} else if (event.which === 3) {\n\t\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\t\tif (rightClickBehavior === 'nothing') {\n\t\t\t\t\tif (!event.shiftKey) {\n\t\t\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (rightClickBehavior === 'copyPaste' || rightClickBehavior === 'paste') {\n\t\t\t\t\t// copyPaste: Shift+right click should open context menu\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && event.shiftKey) {\n\t\t\t\t\t\topenContextMenu(event, terminal, this._instanceMenu, this._contextMenuService);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && terminal.hasSelection()) {\n\t\t\t\t\t\tawait terminal.copySelection();\n\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (BrowserFeatures.clipboard.readText) {\n\t\t\t\t\t\t\tterminal.paste();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._notificationService.info(`This browser doesn't support the clipboard.readText API needed to trigger a paste, try ${isMacintosh ? 'âŒ˜' : 'Ctrl'}+V instead.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Clear selection after all click event bubbling is finished on Mac to prevent\n\t\t\t\t\t// right-click selecting a word which is seemed cannot be disabled. There is a\n\t\t\t\t\t// flicker when pasting but this appears to give the best experience if the\n\t\t\t\t\t// setting is enabled.\n\t\t\t\t\tif (isMacintosh) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(terminalContainer, 'contextmenu', (event: MouseEvent) => {\n\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\tif (rightClickBehavior === 'nothing' && !event.shiftKey) {\n\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t}\n\t\t\tterminalContainer.focus();\n\t\t\tif (!this._cancelContextMenu) {\n\t\t\t\topenContextMenu(event, this._terminalGroupService.activeInstance!, this._instanceMenu, this._contextMenuService);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tthis._cancelContextMenu = false;\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabContainer, 'contextmenu', (event: MouseEvent) => {\n\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\tif (rightClickBehavior === 'nothing' && !event.shiftKey) {\n\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t}\n\t\t\tif (!this._cancelContextMenu) {\n\t\t\t\tconst emptyList = this._tabList.getFocus().length === 0;\n\t\t\t\tif (!emptyList) {\n\t\t\t\t\tthis._terminalGroupService.lastAccessedMenu = 'tab-list';\n\t\t\t\t}\n\n\t\t\t\t// Put the focused item first as it's used as the first positional argument\n\t\t\t\tconst selectedInstances = this._tabList.getSelectedElements();\n\t\t\t\tconst focusedInstance = this._tabList.getFocusedElements()?.[0];\n\t\t\t\tif (focusedInstance) {\n\t\t\t\t\tselectedInstances.splice(selectedInstances.findIndex(e => e.instanceId === focusedInstance.instanceId), 1);\n\t\t\t\t\tselectedInstances.unshift(focusedInstance);\n\t\t\t\t}\n\n\t\t\t\topenContextMenu(event, selectedInstances, emptyList ? this._tabsListEmptyMenu : this._tabsListMenu, this._contextMenuService, emptyList ? this._getTabActions() : undefined);\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tthis._cancelContextMenu = false;\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(document, 'keydown', (event: KeyboardEvent) => {\n\t\t\tterminalContainer.classList.toggle('alt-active', !!event.altKey);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(document, 'keyup', (event: KeyboardEvent) => {\n\t\t\tterminalContainer.classList.toggle('alt-active', !!event.altKey);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(parentDomElement, 'keyup', (event: KeyboardEvent) => {\n\t\t\tif (event.keyCode === 27) {\n\t\t\t\t// Keep terminal open on escape\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabContainer, dom.EventType.FOCUS_IN, () => {\n\t\t\tthis._terminalTabsFocusContextKey.set(true);\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._tabContainer, dom.EventType.FOCUS_OUT, () => {\n\t\t\tthis._terminalTabsFocusContextKey.set(false);\n\t\t}));\n\t}\n\n\tprivate _getTabActions(): IAction[] {\n\t\treturn [\n\t\t\tnew Separator(),\n\t\t\tthis._configurationService.inspect(TerminalSettingId.TabsLocation).userValue === 'left' ?\n\t\t\t\tnew Action('moveRight', localize('moveTabsRight', \"Move Tabs Right\"), undefined, undefined, async () => {\n\t\t\t\t\tthis._configurationService.updateValue(TerminalSettingId.TabsLocation, 'right');\n\t\t\t\t}) :\n\t\t\t\tnew Action('moveLeft', localize('moveTabsLeft', \"Move Tabs Left\"), undefined, undefined, async () => {\n\t\t\t\t\tthis._configurationService.updateValue(TerminalSettingId.TabsLocation, 'left');\n\t\t\t\t}),\n\t\t\tnew Action('hideTabs', localize('hideTabs', \"Hide Tabs\"), undefined, undefined, async () => {\n\t\t\t\tthis._configurationService.updateValue(TerminalSettingId.TabsEnabled, false);\n\t\t\t})\n\t\t];\n\t}\n\n\tsetEditable(isEditing: boolean): void {\n\t\tif (!isEditing) {\n\t\t\tthis._tabList.domFocus();\n\t\t}\n\t\tthis._tabList.refresh(false);\n\t}\n\n\tfocusTabs(): void {\n\t\tif (!this._shouldShowTabs()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._terminalTabsFocusContextKey.set(true);\n\t\tconst selected = this._tabList.getSelection();\n\t\tthis._tabList.domFocus();\n\t\tif (selected) {\n\t\t\tthis._tabList.setFocus(selected);\n\t\t}\n\t}\n\n\tfocus() {\n\t\tif (this._terminalService.connectionState === TerminalConnectionState.Connecting) {\n\t\t\t// If the terminal is waiting to reconnect to remote terminals, then there is no TerminalInstance yet that can\n\t\t\t// be focused. So wait for connection to finish, then focus.\n\t\t\tconst activeElement = document.activeElement;\n\t\t\tthis._register(this._terminalService.onDidChangeConnectionState(() => {\n\t\t\t\t// Only focus the terminal if the activeElement has not changed since focus() was called\n\t\t\t\t// TODO hack\n\t\t\t\tif (document.activeElement === activeElement) {\n\t\t\t\t\tthis._focus();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\treturn;\n\t\t}\n\t\tthis._focus();\n\t}\n\n\tfocusHover() {\n\t\tif (this._shouldShowTabs()) {\n\t\t\tthis._tabList.focusHover();\n\t\t\treturn;\n\t\t}\n\t\tconst instance = this._terminalGroupService.activeInstance;\n\t\tif (!instance) {\n\t\t\treturn;\n\t\t}\n\t\tthis._hoverService.showHover({\n\t\t\t...getInstanceHoverInfo(instance),\n\t\t\ttarget: this._terminalContainer,\n\t\t\ttrapFocus: true\n\t\t}, true);\n\t}\n\n\tprivate _focus() {\n\t\tthis._terminalGroupService.activeInstance?.focusWhenReady();\n\t}\n}\n"]}