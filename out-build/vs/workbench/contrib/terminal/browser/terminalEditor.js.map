{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/terminal/browser/terminalEditor.ts"],"names":[],"mappings":"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","file":"terminalEditor.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IActionViewItem } from 'vs/base/browser/ui/actionbar/actionbar';\nimport { IAction } from 'vs/base/common/actions';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { DropdownWithPrimaryActionViewItem } from 'vs/platform/actions/browser/dropdownWithPrimaryActionViewItem';\nimport { IMenu, IMenuService, MenuId, MenuItemAction } from 'vs/platform/actions/common/actions';\nimport { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';\nimport { IContextMenuService } from 'vs/platform/contextview/browser/contextView';\nimport { IEditorOptions } from 'vs/platform/editor/common/editor';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { IStorageService } from 'vs/platform/storage/common/storage';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { EditorPane } from 'vs/workbench/browser/parts/editor/editorPane';\nimport { IEditorOpenContext } from 'vs/workbench/common/editor';\nimport { ITerminalEditorService, ITerminalService, terminalEditorId } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { TerminalEditorInput } from 'vs/workbench/contrib/terminal/browser/terminalEditorInput';\nimport { getTerminalActionBarArgs } from 'vs/workbench/contrib/terminal/browser/terminalMenus';\nimport { ITerminalProfileResolverService, ITerminalProfileService, TerminalCommandId } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { IEditorGroup } from 'vs/workbench/services/editor/common/editorGroupsService';\nimport { isLinux, isMacintosh } from 'vs/base/common/platform';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { openContextMenu } from 'vs/workbench/contrib/terminal/browser/terminalContextMenu';\nimport { ACTIVE_GROUP } from 'vs/workbench/services/editor/common/editorService';\nimport { IWorkbenchLayoutService, Parts } from 'vs/workbench/services/layout/browser/layoutService';\n\nexport class TerminalEditor extends EditorPane {\n\n\tprivate _editorInstanceElement: HTMLElement | undefined;\n\tprivate _overflowGuardElement: HTMLElement | undefined;\n\n\tprivate _editorInput?: TerminalEditorInput = undefined;\n\n\tprivate _lastDimension?: dom.Dimension;\n\n\tprivate readonly _dropdownMenu: IMenu;\n\n\tprivate readonly _instanceMenu: IMenu;\n\n\tprivate _cancelContextMenu: boolean = false;\n\n\tconstructor(\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@ITerminalEditorService private readonly _terminalEditorService: ITerminalEditorService,\n\t\t@ITerminalProfileResolverService private readonly _terminalProfileResolverService: ITerminalProfileResolverService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@ITerminalProfileService private readonly _terminalProfileService: ITerminalProfileService,\n\t\t@IWorkbenchLayoutService private readonly _workbenchLayoutService: IWorkbenchLayoutService\n\t) {\n\t\tsuper(terminalEditorId, telemetryService, themeService, storageService);\n\t\tthis._dropdownMenu = this._register(menuService.createMenu(MenuId.TerminalNewDropdownContext, contextKeyService));\n\t\tthis._instanceMenu = this._register(menuService.createMenu(MenuId.TerminalInstanceContext, contextKeyService));\n\t}\n\n\toverride async setInput(newInput: TerminalEditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken) {\n\t\tthis._editorInput?.terminalInstance?.detachFromElement();\n\t\tthis._editorInput = newInput;\n\t\tawait super.setInput(newInput, options, context, token);\n\t\tthis._editorInput.terminalInstance?.attachToElement(this._overflowGuardElement!);\n\t\tif (this._lastDimension) {\n\t\t\tthis.layout(this._lastDimension);\n\t\t}\n\t\tthis._editorInput.terminalInstance?.setVisible(this.isVisible() && this._workbenchLayoutService.isVisible(Parts.EDITOR_PART));\n\t\tif (this._editorInput.terminalInstance) {\n\t\t\t// since the editor does not monitor focus changes, for ex. between the terminal\n\t\t\t// panel and the editors, this is needed so that the active instance gets set\n\t\t\t// when focus changes between them.\n\t\t\tthis._register(this._editorInput.terminalInstance.onDidFocus(() => this._setActiveInstance()));\n\t\t\tthis._editorInput.setCopyLaunchConfig(this._editorInput.terminalInstance.shellLaunchConfig);\n\t\t}\n\t}\n\n\toverride clearInput(): void {\n\t\tsuper.clearInput();\n\t\tthis._editorInput?.terminalInstance?.detachFromElement();\n\t\tthis._editorInput = undefined;\n\t}\n\n\tprivate _setActiveInstance(): void {\n\t\tif (!this._editorInput?.terminalInstance) {\n\t\t\treturn;\n\t\t}\n\t\tthis._terminalEditorService.setActiveInstance(this._editorInput.terminalInstance);\n\t}\n\n\toverride focus() {\n\t\tthis._editorInput?.terminalInstance?.focus();\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._editorInstanceElement = parent;\n\t\tthis._overflowGuardElement = dom.$('.terminal-overflow-guard.terminal-editor');\n\t\tthis._editorInstanceElement.appendChild(this._overflowGuardElement);\n\t\tthis._registerListeners();\n\t}\n\n\tprivate _registerListeners(): void {\n\t\tif (!this._editorInstanceElement) {\n\t\t\treturn;\n\t\t}\n\t\tthis._register(dom.addDisposableListener(this._editorInstanceElement, 'mousedown', async (event: MouseEvent) => {\n\t\t\tif (this._terminalEditorService.instances.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.which === 2 && isLinux) {\n\t\t\t\t// Drop selection and focus terminal on Linux to enable middle button paste when click\n\t\t\t\t// occurs on the selection itself.\n\t\t\t\tconst terminal = this._terminalEditorService.activeInstance;\n\t\t\t\tterminal?.focus();\n\t\t\t} else if (event.which === 3) {\n\t\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\t\tif (rightClickBehavior === 'nothing') {\n\t\t\t\t\tif (!event.shiftKey) {\n\t\t\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (rightClickBehavior === 'copyPaste' || rightClickBehavior === 'paste') {\n\t\t\t\t\tconst terminal = this._terminalEditorService.activeInstance;\n\t\t\t\t\tif (!terminal) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// copyPaste: Shift+right click should open context menu\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && event.shiftKey) {\n\t\t\t\t\t\topenContextMenu(event, this._editorInput?.terminalInstance, this._instanceMenu, this._contextMenuService);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rightClickBehavior === 'copyPaste' && terminal.hasSelection()) {\n\t\t\t\t\t\tawait terminal.copySelection();\n\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (BrowserFeatures.clipboard.readText) {\n\t\t\t\t\t\t\tterminal.paste();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._notificationService.info(`This browser doesn't support the clipboard.readText API needed to trigger a paste, try ${isMacintosh ? 'âŒ˜' : 'Ctrl'}+V instead.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Clear selection after all click event bubbling is finished on Mac to prevent\n\t\t\t\t\t// right-click selecting a word which is seemed cannot be disabled. There is a\n\t\t\t\t\t// flicker when pasting but this appears to give the best experience if the\n\t\t\t\t\t// setting is enabled.\n\t\t\t\t\tif (isMacintosh) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tterminal.clearSelection();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t\tthis._cancelContextMenu = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._editorInstanceElement, 'contextmenu', (event: MouseEvent) => {\n\t\t\tconst rightClickBehavior = this._terminalService.configHelper.config.rightClickBehavior;\n\t\t\tif (rightClickBehavior === 'nothing' && !event.shiftKey) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\tthis._cancelContextMenu = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tif (!this._cancelContextMenu && rightClickBehavior !== 'copyPaste' && rightClickBehavior !== 'paste') {\n\t\t\t\t\tif (!this._cancelContextMenu) {\n\t\t\t\t\t\topenContextMenu(event, this._editorInput?.terminalInstance, this._instanceMenu, this._contextMenuService);\n\t\t\t\t\t}\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\tthis._cancelContextMenu = false;\n\t\t\t\t}\n\t\t}));\n\t}\n\n\tlayout(dimension: dom.Dimension): void {\n\t\tthis._editorInput?.terminalInstance?.layout(dimension);\n\t\tthis._lastDimension = dimension;\n\t}\n\n\toverride setVisible(visible: boolean, group?: IEditorGroup): void {\n\t\tsuper.setVisible(visible, group);\n\t\tthis._editorInput?.terminalInstance?.setVisible(visible && this._workbenchLayoutService.isVisible(Parts.EDITOR_PART));\n\t}\n\n\toverride getActionViewItem(action: IAction): IActionViewItem | undefined {\n\t\tswitch (action.id) {\n\t\t\tcase TerminalCommandId.CreateTerminalEditor: {\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\tconst location = { viewColumn: ACTIVE_GROUP };\n\t\t\t\t\tconst actions = getTerminalActionBarArgs(location, this._terminalProfileService.availableProfiles, this._getDefaultProfileName(), this._terminalProfileService.contributedProfiles, this._terminalService, this._dropdownMenu);\n\t\t\t\t\tconst button = this._instantiationService.createInstance(DropdownWithPrimaryActionViewItem, action, actions.dropdownAction, actions.dropdownMenuActions, actions.className, this._contextMenuService, {});\n\t\t\t\t\treturn button;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn super.getActionViewItem(action);\n\t}\n\n\tprivate _getDefaultProfileName(): string {\n\t\tlet defaultProfileName;\n\t\ttry {\n\t\t\tdefaultProfileName = this._terminalProfileService.getDefaultProfileName();\n\t\t} catch (e) {\n\t\t\tdefaultProfileName = this._terminalProfileResolverService.defaultProfileName;\n\t\t}\n\t\treturn defaultProfileName!;\n\t}\n}\n"]}