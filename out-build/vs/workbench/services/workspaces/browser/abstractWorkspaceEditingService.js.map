{"version":3,"sources":["vs/workbench/services/workspaces/browser/abstractWorkspaceEditingService.ts"],"names":[],"mappings":"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","file":"abstractWorkspaceEditingService.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkspaceEditingService } from 'vs/workbench/services/workspaces/common/workspaceEditing';\nimport { URI } from 'vs/base/common/uri';\nimport { localize } from 'vs/nls';\nimport { hasWorkspaceFileExtension, isSavedWorkspace, isUntitledWorkspace, isWorkspaceIdentifier, IWorkspaceContextService, IWorkspaceIdentifier, toWorkspaceIdentifier, WorkbenchState, WORKSPACE_EXTENSION, WORKSPACE_FILTER } from 'vs/platform/workspace/common/workspace';\nimport { IJSONEditingService, JSONEditingError, JSONEditingErrorCode } from 'vs/workbench/services/configuration/common/jsonEditing';\nimport { IWorkspaceFolderCreationData, IWorkspacesService, rewriteWorkspaceFileForNewLocation, IEnterWorkspaceResult, IStoredWorkspace } from 'vs/platform/workspaces/common/workspaces';\nimport { WorkspaceService } from 'vs/workbench/services/configuration/browser/configurationService';\nimport { ConfigurationScope, IConfigurationRegistry, Extensions as ConfigurationExtensions, IConfigurationPropertySchema } from 'vs/platform/configuration/common/configurationRegistry';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { ICommandService } from 'vs/platform/commands/common/commands';\nimport { distinct, firstOrDefault } from 'vs/base/common/arrays';\nimport { basename, isEqual, isEqualAuthority, joinPath, removeTrailingPathSeparator } from 'vs/base/common/resources';\nimport { INotificationService, Severity } from 'vs/platform/notification/common/notification';\nimport { IFileService } from 'vs/platform/files/common/files';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IFileDialogService, IDialogService } from 'vs/platform/dialogs/common/dialogs';\nimport { mnemonicButtonLabel } from 'vs/base/common/labels';\nimport { ITextFileService } from 'vs/workbench/services/textfile/common/textfiles';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { Schemas } from 'vs/base/common/network';\nimport { SaveReason } from 'vs/workbench/common/editor';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { IWorkspaceTrustManagementService } from 'vs/platform/workspace/common/workspaceTrust';\nimport { IWorkbenchConfigurationService } from 'vs/workbench/services/configuration/common/configuration';\nimport { IUserDataProfilesService } from 'vs/platform/userDataProfile/common/userDataProfile';\nimport { IUserDataProfileService } from 'vs/workbench/services/userDataProfile/common/userDataProfile';\n\nexport abstract class AbstractWorkspaceEditingService implements IWorkspaceEditingService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IJSONEditingService private readonly jsonEditingService: IJSONEditingService,\n\t\t@IWorkspaceContextService protected readonly contextService: WorkspaceService,\n\t\t@IWorkbenchConfigurationService private readonly configurationService: IWorkbenchConfigurationService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IWorkspacesService protected readonly workspacesService: IWorkspacesService,\n\t\t@IWorkbenchEnvironmentService protected readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IFileDialogService private readonly fileDialogService: IFileDialogService,\n\t\t@IDialogService protected readonly dialogService: IDialogService,\n\t\t@IHostService protected readonly hostService: IHostService,\n\t\t@IUriIdentityService protected readonly uriIdentityService: IUriIdentityService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t) { }\n\n\tasync pickNewWorkspacePath(): Promise<URI | undefined> {\n\t\tconst availableFileSystems = [Schemas.file];\n\t\tif (this.environmentService.remoteAuthority) {\n\t\t\tavailableFileSystems.unshift(Schemas.vscodeRemote);\n\t\t}\n\t\tlet workspacePath = await this.fileDialogService.showSaveDialog({\n\t\t\tsaveLabel: mnemonicButtonLabel(localize('save', \"Save\")),\n\t\t\ttitle: localize('saveWorkspace', \"Save Workspace\"),\n\t\t\tfilters: WORKSPACE_FILTER,\n\t\t\tdefaultUri: joinPath(await this.fileDialogService.defaultWorkspacePath(), this.getNewWorkspaceName()),\n\t\t\tavailableFileSystems\n\t\t});\n\n\t\tif (!workspacePath) {\n\t\t\treturn; // canceled\n\t\t}\n\n\t\tif (!hasWorkspaceFileExtension(workspacePath)) {\n\t\t\t// Always ensure we have workspace file extension\n\t\t\t// (see https://github.com/microsoft/vscode/issues/84818)\n\t\t\tworkspacePath = workspacePath.with({ path: `${workspacePath.path}.${WORKSPACE_EXTENSION}` });\n\t\t}\n\n\t\treturn workspacePath;\n\t}\n\n\tprivate getNewWorkspaceName(): string {\n\n\t\t// First try with existing workspace name\n\t\tconst configPathURI = this.getCurrentWorkspaceIdentifier()?.configPath;\n\t\tif (configPathURI && isSavedWorkspace(configPathURI, this.environmentService)) {\n\t\t\treturn basename(configPathURI);\n\t\t}\n\n\t\t// Then fallback to first folder if any\n\t\tconst folder = firstOrDefault(this.contextService.getWorkspace().folders);\n\t\tif (folder) {\n\t\t\treturn `${basename(folder.uri)}.${WORKSPACE_EXTENSION}`;\n\t\t}\n\n\t\t// Finally pick a good default\n\t\treturn `workspace.${WORKSPACE_EXTENSION}`;\n\t}\n\n\tasync updateFolders(index: number, deleteCount?: number, foldersToAddCandidates?: IWorkspaceFolderCreationData[], donotNotifyError?: boolean): Promise<void> {\n\t\tconst folders = this.contextService.getWorkspace().folders;\n\n\t\tlet foldersToDelete: URI[] = [];\n\t\tif (typeof deleteCount === 'number') {\n\t\t\tfoldersToDelete = folders.slice(index, index + deleteCount).map(folder => folder.uri);\n\t\t}\n\n\t\tlet foldersToAdd: IWorkspaceFolderCreationData[] = [];\n\t\tif (Array.isArray(foldersToAddCandidates)) {\n\t\t\tfoldersToAdd = foldersToAddCandidates.map(folderToAdd => ({ uri: removeTrailingPathSeparator(folderToAdd.uri), name: folderToAdd.name })); // Normalize\n\t\t}\n\n\t\tconst wantsToDelete = foldersToDelete.length > 0;\n\t\tconst wantsToAdd = foldersToAdd.length > 0;\n\n\t\tif (!wantsToAdd && !wantsToDelete) {\n\t\t\treturn; // return early if there is nothing to do\n\t\t}\n\n\t\t// Add Folders\n\t\tif (wantsToAdd && !wantsToDelete) {\n\t\t\treturn this.doAddFolders(foldersToAdd, index, donotNotifyError);\n\t\t}\n\n\t\t// Delete Folders\n\t\tif (wantsToDelete && !wantsToAdd) {\n\t\t\treturn this.removeFolders(foldersToDelete);\n\t\t}\n\n\t\t// Add & Delete Folders\n\t\telse {\n\n\t\t\t// if we are in single-folder state and the folder is replaced with\n\t\t\t// other folders, we handle this specially and just enter workspace\n\t\t\t// mode with the folders that are being added.\n\t\t\tif (this.includesSingleFolderWorkspace(foldersToDelete)) {\n\t\t\t\treturn this.createAndEnterWorkspace(foldersToAdd);\n\t\t\t}\n\n\t\t\t// if we are not in workspace-state, we just add the folders\n\t\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.WORKSPACE) {\n\t\t\t\treturn this.doAddFolders(foldersToAdd, index, donotNotifyError);\n\t\t\t}\n\n\t\t\t// finally, update folders within the workspace\n\t\t\treturn this.doUpdateFolders(foldersToAdd, foldersToDelete, index, donotNotifyError);\n\t\t}\n\t}\n\n\tprivate async doUpdateFolders(foldersToAdd: IWorkspaceFolderCreationData[], foldersToDelete: URI[], index?: number, donotNotifyError: boolean = false): Promise<void> {\n\t\ttry {\n\t\t\tawait this.contextService.updateFolders(foldersToAdd, foldersToDelete, index);\n\t\t} catch (error) {\n\t\t\tif (donotNotifyError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tthis.handleWorkspaceConfigurationEditingError(error);\n\t\t}\n\t}\n\n\taddFolders(foldersToAddCandidates: IWorkspaceFolderCreationData[], donotNotifyError: boolean = false): Promise<void> {\n\n\t\t// Normalize\n\t\tconst foldersToAdd = foldersToAddCandidates.map(folderToAdd => ({ uri: removeTrailingPathSeparator(folderToAdd.uri), name: folderToAdd.name }));\n\n\t\treturn this.doAddFolders(foldersToAdd, undefined, donotNotifyError);\n\t}\n\n\tprivate async doAddFolders(foldersToAdd: IWorkspaceFolderCreationData[], index?: number, donotNotifyError: boolean = false): Promise<void> {\n\t\tconst state = this.contextService.getWorkbenchState();\n\t\tconst remoteAuthority = this.environmentService.remoteAuthority;\n\t\tif (remoteAuthority) {\n\t\t\t// https://github.com/microsoft/vscode/issues/94191\n\t\t\tfoldersToAdd = foldersToAdd.filter(folder => folder.uri.scheme !== Schemas.file && (folder.uri.scheme !== Schemas.vscodeRemote || isEqualAuthority(folder.uri.authority, remoteAuthority)));\n\t\t}\n\n\t\t// If we are in no-workspace or single-folder workspace, adding folders has to\n\t\t// enter a workspace.\n\t\tif (state !== WorkbenchState.WORKSPACE) {\n\t\t\tlet newWorkspaceFolders = this.contextService.getWorkspace().folders.map(folder => ({ uri: folder.uri }));\n\t\t\tnewWorkspaceFolders.splice(typeof index === 'number' ? index : newWorkspaceFolders.length, 0, ...foldersToAdd);\n\t\t\tnewWorkspaceFolders = distinct(newWorkspaceFolders, folder => this.uriIdentityService.extUri.getComparisonKey(folder.uri));\n\n\t\t\tif (state === WorkbenchState.EMPTY && newWorkspaceFolders.length === 0 || state === WorkbenchState.FOLDER && newWorkspaceFolders.length === 1) {\n\t\t\t\treturn; // return if the operation is a no-op for the current state\n\t\t\t}\n\n\t\t\treturn this.createAndEnterWorkspace(newWorkspaceFolders);\n\t\t}\n\n\t\t// Delegate addition of folders to workspace service otherwise\n\t\ttry {\n\t\t\tawait this.contextService.addFolders(foldersToAdd, index);\n\t\t} catch (error) {\n\t\t\tif (donotNotifyError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tthis.handleWorkspaceConfigurationEditingError(error);\n\t\t}\n\t}\n\n\tasync removeFolders(foldersToRemove: URI[], donotNotifyError: boolean = false): Promise<void> {\n\n\t\t// If we are in single-folder state and the opened folder is to be removed,\n\t\t// we create an empty workspace and enter it.\n\t\tif (this.includesSingleFolderWorkspace(foldersToRemove)) {\n\t\t\treturn this.createAndEnterWorkspace([]);\n\t\t}\n\n\t\t// Delegate removal of folders to workspace service otherwise\n\t\ttry {\n\t\t\tawait this.contextService.removeFolders(foldersToRemove);\n\t\t} catch (error) {\n\t\t\tif (donotNotifyError) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tthis.handleWorkspaceConfigurationEditingError(error);\n\t\t}\n\t}\n\n\tprivate includesSingleFolderWorkspace(folders: URI[]): boolean {\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\tconst workspaceFolder = this.contextService.getWorkspace().folders[0];\n\t\t\treturn (folders.some(folder => this.uriIdentityService.extUri.isEqual(folder, workspaceFolder.uri)));\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tasync createAndEnterWorkspace(folders: IWorkspaceFolderCreationData[], path?: URI): Promise<void> {\n\t\tif (path && !await this.isValidTargetWorkspacePath(path)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst remoteAuthority = this.environmentService.remoteAuthority;\n\t\tconst untitledWorkspace = await this.workspacesService.createUntitledWorkspace(folders, remoteAuthority);\n\t\tif (path) {\n\t\t\ttry {\n\t\t\t\tawait this.saveWorkspaceAs(untitledWorkspace, path);\n\t\t\t} finally {\n\t\t\t\tawait this.workspacesService.deleteUntitledWorkspace(untitledWorkspace); // https://github.com/microsoft/vscode/issues/100276\n\t\t\t}\n\t\t} else {\n\t\t\tpath = untitledWorkspace.configPath;\n\t\t\tif (!this.userDataProfileService.currentProfile.isDefault) {\n\t\t\t\tawait this.userDataProfilesService.setProfileForWorkspace(untitledWorkspace, this.userDataProfileService.currentProfile);\n\t\t\t}\n\t\t}\n\n\t\treturn this.enterWorkspace(path);\n\t}\n\n\tasync saveAndEnterWorkspace(workspaceUri: URI): Promise<void> {\n\t\tconst workspaceIdentifier = this.getCurrentWorkspaceIdentifier();\n\t\tif (!workspaceIdentifier) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Allow to save the workspace of the current window\n\t\t// if we have an identical match on the path\n\t\tif (isEqual(workspaceIdentifier.configPath, workspaceUri)) {\n\t\t\treturn this.saveWorkspace(workspaceIdentifier);\n\t\t}\n\n\t\t// From this moment on we require a valid target that is not opened already\n\t\tif (!await this.isValidTargetWorkspacePath(workspaceUri)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.saveWorkspaceAs(workspaceIdentifier, workspaceUri);\n\n\t\treturn this.enterWorkspace(workspaceUri);\n\t}\n\n\tasync isValidTargetWorkspacePath(workspaceUri: URI): Promise<boolean> {\n\t\treturn true; // OK\n\t}\n\n\tprotected async saveWorkspaceAs(workspace: IWorkspaceIdentifier, targetConfigPathURI: URI): Promise<void> {\n\t\tconst configPathURI = workspace.configPath;\n\n\t\tconst isNotUntitledWorkspace = !isUntitledWorkspace(targetConfigPathURI, this.environmentService);\n\t\tif (isNotUntitledWorkspace && !this.userDataProfileService.currentProfile.isDefault) {\n\t\t\tconst newWorkspace = await this.workspacesService.getWorkspaceIdentifier(targetConfigPathURI);\n\t\t\tawait this.userDataProfilesService.setProfileForWorkspace(newWorkspace, this.userDataProfileService.currentProfile);\n\t\t}\n\n\t\t// Return early if target is same as source\n\t\tif (this.uriIdentityService.extUri.isEqual(configPathURI, targetConfigPathURI)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isFromUntitledWorkspace = isUntitledWorkspace(configPathURI, this.environmentService);\n\n\t\t// Read the contents of the workspace file, update it to new location and save it.\n\t\tconst raw = await this.fileService.readFile(configPathURI);\n\t\tconst newRawWorkspaceContents = rewriteWorkspaceFileForNewLocation(raw.value.toString(), configPathURI, isFromUntitledWorkspace, targetConfigPathURI, this.uriIdentityService.extUri);\n\t\tawait this.textFileService.create([{ resource: targetConfigPathURI, value: newRawWorkspaceContents, options: { overwrite: true } }]);\n\n\t\t// Set trust for the workspace file\n\t\tawait this.trustWorkspaceConfiguration(targetConfigPathURI);\n\t}\n\n\tprotected async saveWorkspace(workspace: IWorkspaceIdentifier): Promise<void> {\n\t\tconst configPathURI = workspace.configPath;\n\n\t\t// First: try to save any existing model as it could be dirty\n\t\tconst existingModel = this.textFileService.files.get(configPathURI);\n\t\tif (existingModel) {\n\t\t\tawait existingModel.save({ force: true, reason: SaveReason.EXPLICIT });\n\t\t\treturn;\n\t\t}\n\n\t\t// Second: if the file exists on disk, simply return\n\t\tconst workspaceFileExists = await this.fileService.exists(configPathURI);\n\t\tif (workspaceFileExists) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Finally, we need to re-create the file as it was deleted\n\t\tconst newWorkspace: IStoredWorkspace = { folders: [] };\n\t\tconst newRawWorkspaceContents = rewriteWorkspaceFileForNewLocation(JSON.stringify(newWorkspace, null, '\\t'), configPathURI, false, configPathURI, this.uriIdentityService.extUri);\n\t\tawait this.textFileService.create([{ resource: configPathURI, value: newRawWorkspaceContents }]);\n\t}\n\n\tprivate handleWorkspaceConfigurationEditingError(error: JSONEditingError): void {\n\t\tswitch (error.code) {\n\t\t\tcase JSONEditingErrorCode.ERROR_INVALID_FILE:\n\t\t\t\tthis.onInvalidWorkspaceConfigurationFileError();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.notificationService.error(error.message);\n\t\t}\n\t}\n\n\tprivate onInvalidWorkspaceConfigurationFileError(): void {\n\t\tconst message = localize('errorInvalidTaskConfiguration', \"Unable to write into workspace configuration file. Please open the file to correct errors/warnings in it and try again.\");\n\t\tthis.askToOpenWorkspaceConfigurationFile(message);\n\t}\n\n\tprivate askToOpenWorkspaceConfigurationFile(message: string): void {\n\t\tthis.notificationService.prompt(Severity.Error, message,\n\t\t\t[{\n\t\t\t\tlabel: localize('openWorkspaceConfigurationFile', \"Open Workspace Configuration\"),\n\t\t\t\trun: () => this.commandService.executeCommand('workbench.action.openWorkspaceConfigFile')\n\t\t\t}]\n\t\t);\n\t}\n\n\tabstract enterWorkspace(workspaceUri: URI): Promise<void>;\n\n\tprotected async doEnterWorkspace(workspaceUri: URI): Promise<IEnterWorkspaceResult | undefined> {\n\t\tif (!!this.environmentService.extensionTestsLocationURI) {\n\t\t\tthrow new Error('Entering a new workspace is not possible in tests.');\n\t\t}\n\n\t\tconst workspace = await this.workspacesService.getWorkspaceIdentifier(workspaceUri);\n\n\t\t// Settings migration (only if we come from a folder workspace)\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\tawait this.migrateWorkspaceSettings(workspace);\n\t\t}\n\n\t\tawait this.configurationService.initialize(workspace);\n\n\t\treturn this.workspacesService.enterWorkspace(workspaceUri);\n\t}\n\n\tprivate migrateWorkspaceSettings(toWorkspace: IWorkspaceIdentifier): Promise<void> {\n\t\treturn this.doCopyWorkspaceSettings(toWorkspace, setting => setting.scope === ConfigurationScope.WINDOW);\n\t}\n\n\tcopyWorkspaceSettings(toWorkspace: IWorkspaceIdentifier): Promise<void> {\n\t\treturn this.doCopyWorkspaceSettings(toWorkspace);\n\t}\n\n\tprivate doCopyWorkspaceSettings(toWorkspace: IWorkspaceIdentifier, filter?: (config: IConfigurationPropertySchema) => boolean): Promise<void> {\n\t\tconst configurationProperties = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).getConfigurationProperties();\n\t\tconst targetWorkspaceConfiguration: any = {};\n\t\tfor (const key of this.configurationService.keys().workspace) {\n\t\t\tif (configurationProperties[key]) {\n\t\t\t\tif (filter && !filter(configurationProperties[key])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttargetWorkspaceConfiguration[key] = this.configurationService.inspect(key).workspaceValue;\n\t\t\t}\n\t\t}\n\n\t\treturn this.jsonEditingService.write(toWorkspace.configPath, [{ path: ['settings'], value: targetWorkspaceConfiguration }], true);\n\t}\n\n\tprivate async trustWorkspaceConfiguration(configPathURI: URI): Promise<void> {\n\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY && this.workspaceTrustManagementService.isWorkspaceTrusted()) {\n\t\t\tawait this.workspaceTrustManagementService.setUrisTrust([configPathURI], true);\n\t\t}\n\t}\n\n\tprotected getCurrentWorkspaceIdentifier(): IWorkspaceIdentifier | undefined {\n\t\tconst identifier = toWorkspaceIdentifier(this.contextService.getWorkspace());\n\t\tif (isWorkspaceIdentifier(identifier)) {\n\t\t\treturn identifier;\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n"]}