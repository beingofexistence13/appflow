{"version":3,"sources":["vs/workbench/contrib/themes/browser/themes.contribution.ts"],"names":[],"mappings":"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","file":"themes.contribution.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { KeyMod, KeyChord, KeyCode } from 'vs/base/common/keyCodes';\nimport { MenuRegistry, MenuId, Action2, registerAction2, ISubmenuItem } from 'vs/platform/actions/common/actions';\nimport { equalsIgnoreCase } from 'vs/base/common/strings';\nimport { Registry } from 'vs/platform/registry/common/platform';\nimport { Categories } from 'vs/platform/action/common/actionCommonCategories';\nimport { IWorkbenchThemeService, IWorkbenchTheme, ThemeSettingTarget, IWorkbenchColorTheme, IWorkbenchFileIconTheme, IWorkbenchProductIconTheme, ThemeSettings, ThemeSettingDefaults } from 'vs/workbench/services/themes/common/workbenchThemeService';\nimport { VIEWLET_ID, IExtensionsViewPaneContainer } from 'vs/workbench/contrib/extensions/common/extensions';\nimport { IExtensionGalleryService, IExtensionManagementService, IGalleryExtension } from 'vs/platform/extensionManagement/common/extensionManagement';\nimport { IColorRegistry, Extensions as ColorRegistryExtensions } from 'vs/platform/theme/common/colorRegistry';\nimport { IEditorService } from 'vs/workbench/services/editor/common/editorService';\nimport { Color } from 'vs/base/common/color';\nimport { ColorScheme, isHighContrast } from 'vs/platform/theme/common/theme';\nimport { colorThemeSchemaId } from 'vs/workbench/services/themes/common/colorThemeSchema';\nimport { isCancellationError, onUnexpectedError } from 'vs/base/common/errors';\nimport { IQuickInputButton, IQuickInputService, IQuickPickItem, QuickPickInput } from 'vs/platform/quickinput/common/quickInput';\nimport { DEFAULT_PRODUCT_ICON_THEME_ID, ProductIconThemeData } from 'vs/workbench/services/themes/browser/productIconThemeData';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\nimport { ViewContainerLocation } from 'vs/workbench/common/views';\nimport { ThrottledDelayer } from 'vs/base/common/async';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { IProgressService, ProgressLocation } from 'vs/platform/progress/common/progress';\nimport { Codicon } from 'vs/base/common/codicons';\nimport { registerIcon } from 'vs/platform/theme/common/iconRegistry';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { Emitter } from 'vs/base/common/event';\nimport { IExtensionResourceLoaderService } from 'vs/platform/extensionResourceLoader/common/extensionResourceLoader';\nimport { IInstantiationService, ServicesAccessor } from 'vs/platform/instantiation/common/instantiation';\nimport { KeybindingWeight } from 'vs/platform/keybinding/common/keybindingsRegistry';\nimport { CommandsRegistry, ICommandService } from 'vs/platform/commands/common/commands';\nimport { FileIconThemeData } from 'vs/workbench/services/themes/browser/fileIconThemeData';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IDialogService } from 'vs/platform/dialogs/common/dialogs';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions } from 'vs/workbench/common/contributions';\nimport { LifecyclePhase } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { INotificationService, IPromptChoice, Severity } from 'vs/platform/notification/common/notification';\nimport { IStorageService, StorageScope, StorageTarget } from 'vs/platform/storage/common/storage';\nimport { isWeb } from 'vs/base/common/platform';\nimport { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\n\nexport const manageExtensionIcon = registerIcon('theme-selection-manage-extension', Codicon.gear, localize('manageExtensionIcon', 'Icon for the \\'Manage\\' action in the theme selection quick pick.'));\n\ntype PickerResult = 'back' | 'selected' | 'cancelled';\n\nclass MarketplaceThemesPicker {\n\tprivate readonly _installedExtensions: Promise<Set<string>>;\n\tprivate readonly _marketplaceExtensions: Set<string> = new Set();\n\tprivate readonly _marketplaceThemes: ThemeItem[] = [];\n\n\tprivate _searchOngoing: boolean = false;\n\tprivate _searchError: string | undefined = undefined;\n\tprivate readonly _onDidChange = new Emitter<void>();\n\n\tprivate _tokenSource: CancellationTokenSource | undefined;\n\tprivate readonly _queryDelayer = new ThrottledDelayer<void>(200);\n\n\tconstructor(\n\t\tprivate readonly getMarketplaceColorThemes: (publisher: string, name: string, version: string) => Promise<IWorkbenchTheme[]>,\n\t\tprivate readonly marketplaceQuery: string,\n\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IDialogService private readonly dialogService: IDialogService\n\t) {\n\t\tthis._installedExtensions = extensionManagementService.getInstalled().then(installed => {\n\t\t\tconst result = new Set<string>();\n\t\t\tfor (const ext of installed) {\n\t\t\t\tresult.add(ext.identifier.id);\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic get themes(): ThemeItem[] {\n\t\treturn this._marketplaceThemes;\n\t}\n\n\tpublic get onDidChange() {\n\t\treturn this._onDidChange.event;\n\t}\n\n\tpublic trigger(value: string) {\n\t\tif (this._tokenSource) {\n\t\t\tthis._tokenSource.cancel();\n\t\t\tthis._tokenSource = undefined;\n\t\t}\n\t\tthis._queryDelayer.trigger(() => {\n\t\t\tthis._tokenSource = new CancellationTokenSource();\n\t\t\treturn this.doSearch(value, this._tokenSource.token);\n\t\t});\n\t}\n\n\tprivate async doSearch(value: string, token: CancellationToken): Promise<void> {\n\t\tthis._searchOngoing = true;\n\t\tthis._onDidChange.fire();\n\t\ttry {\n\t\t\tconst installedExtensions = await this._installedExtensions;\n\n\t\t\tconst options = { text: `${this.marketplaceQuery} ${value}`, pageSize: 20 };\n\t\t\tconst pager = await this.extensionGalleryService.query(options, token);\n\t\t\tfor (let i = 0; i < pager.total && i < 1; i++) { // loading multiple pages is turned of for now to avoid flickering\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst nThemes = this._marketplaceThemes.length;\n\t\t\t\tconst gallery = i === 0 ? pager.firstPage : await pager.getPage(i, token);\n\n\t\t\t\tconst promises: Promise<IWorkbenchTheme[]>[] = [];\n\t\t\t\tconst promisesGalleries = [];\n\t\t\t\tfor (let i = 0; i < gallery.length; i++) {\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst ext = gallery[i];\n\t\t\t\t\tif (!installedExtensions.has(ext.identifier.id) && !this._marketplaceExtensions.has(ext.identifier.id)) {\n\t\t\t\t\t\tthis._marketplaceExtensions.add(ext.identifier.id);\n\t\t\t\t\t\tpromises.push(this.getMarketplaceColorThemes(ext.publisher, ext.name, ext.version));\n\t\t\t\t\t\tpromisesGalleries.push(ext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst allThemes = await Promise.all(promises);\n\t\t\t\tfor (let i = 0; i < allThemes.length; i++) {\n\t\t\t\t\tconst ext = promisesGalleries[i];\n\t\t\t\t\tfor (const theme of allThemes[i]) {\n\t\t\t\t\t\tthis._marketplaceThemes.push({ id: theme.id, theme: theme, label: theme.label, description: `${ext.displayName} Â· ${ext.publisherDisplayName}`, galleryExtension: ext, buttons: [configureButton] });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (nThemes !== this._marketplaceThemes.length) {\n\t\t\t\t\tthis._marketplaceThemes.sort((t1, t2) => t1.label.localeCompare(t2.label));\n\t\t\t\t\tthis._onDidChange.fire();\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (!isCancellationError(e)) {\n\t\t\t\tthis.logService.error(`Error while searching for themes:`, e);\n\t\t\t\tthis._searchError = 'message' in e ? e.message : String(e);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis._searchOngoing = false;\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\n\t}\n\n\tpublic openQuickPick(value: string, currentTheme: IWorkbenchTheme | undefined, selectTheme: (theme: IWorkbenchTheme | undefined, applyTheme: boolean) => void): Promise<PickerResult> {\n\t\tlet result: PickerResult | undefined = undefined;\n\t\treturn new Promise<PickerResult>((s, _) => {\n\t\t\tconst quickpick = this.quickInputService.createQuickPick<ThemeItem>();\n\t\t\tquickpick.items = [];\n\t\t\tquickpick.sortByLabel = false;\n\t\t\tquickpick.matchOnDescription = true;\n\t\t\tquickpick.buttons = [this.quickInputService.backButton];\n\t\t\tquickpick.title = 'Marketplace Themes';\n\t\t\tquickpick.placeholder = localize('themes.selectMarketplaceTheme', \"Type to Search More. Select to Install. Up/Down Keys to Preview\");\n\t\t\tquickpick.canSelectMany = false;\n\t\t\tquickpick.onDidChangeValue(() => this.trigger(quickpick.value));\n\t\t\tquickpick.onDidAccept(async _ => {\n\t\t\t\tconst themeItem = quickpick.selectedItems[0];\n\t\t\t\tif (themeItem?.galleryExtension) {\n\t\t\t\t\tresult = 'selected';\n\t\t\t\t\tquickpick.hide();\n\t\t\t\t\tconst success = await this.installExtension(themeItem.galleryExtension);\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tselectTheme(themeItem.theme, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectTheme(currentTheme, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tquickpick.onDidTriggerItemButton(e => {\n\t\t\t\tif (isItem(e.item)) {\n\t\t\t\t\tconst extensionId = e.item.theme?.extensionData?.extensionId;\n\t\t\t\t\tif (extensionId) {\n\t\t\t\t\t\topenExtensionViewlet(this.paneCompositeService, `@id:${extensionId}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\topenExtensionViewlet(this.paneCompositeService, `${this.marketplaceQuery} ${quickpick.value}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tquickpick.onDidChangeActive(themes => {\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tselectTheme(themes[0]?.theme, false);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tquickpick.onDidHide(() => {\n\t\t\t\tif (result === undefined) {\n\t\t\t\t\tselectTheme(currentTheme, true);\n\t\t\t\t\tresult = 'cancelled';\n\n\t\t\t\t}\n\t\t\t\tquickpick.dispose();\n\t\t\t\ts(result);\n\t\t\t});\n\n\t\t\tquickpick.onDidTriggerButton(e => {\n\t\t\t\tif (e === this.quickInputService.backButton) {\n\t\t\t\t\tresult = 'back';\n\t\t\t\t\tquickpick.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.onDidChange(() => {\n\t\t\t\tlet items = this.themes;\n\t\t\t\tif (this._searchOngoing) {\n\t\t\t\t\titems = items.concat({ label: '$(sync~spin) Searching for themes...', id: undefined, alwaysShow: true });\n\t\t\t\t} else if (items.length === 0 && this._searchError) {\n\t\t\t\t\titems = [{ label: `$(error) ${localize('search.error', 'Error while searching for themes: {0}', this._searchError)}`, id: undefined, alwaysShow: true }];\n\t\t\t\t}\n\t\t\t\tconst activeItemId = quickpick.activeItems[0]?.id;\n\t\t\t\tconst newActiveItem = activeItemId ? items.find(i => isItem(i) && i.id === activeItemId) : undefined;\n\n\t\t\t\tquickpick.items = items;\n\t\t\t\tif (newActiveItem) {\n\t\t\t\t\tquickpick.activeItems = [newActiveItem as ThemeItem];\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.trigger(value);\n\t\t\tquickpick.show();\n\t\t});\n\t}\n\n\tprivate async installExtension(galleryExtension: IGalleryExtension) {\n\t\topenExtensionViewlet(this.paneCompositeService, `@id:${galleryExtension.identifier.id}`);\n\t\tconst result = await this.dialogService.confirm({\n\t\t\tmessage: localize('installExtension.confirm', \"This will install extension '{0}' published by '{1}'. Do you want to continue?\", galleryExtension.displayName, galleryExtension.publisherDisplayName),\n\t\t\tprimaryButton: localize('installExtension.button.ok', \"OK\")\n\t\t});\n\t\tif (!result.confirmed) {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tawait this.progressService.withProgress({\n\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\ttitle: localize('installing extensions', \"Installing Extension {0}...\", galleryExtension.displayName)\n\t\t\t}, async () => {\n\t\t\t\tawait this.extensionManagementService.installFromGallery(galleryExtension, {\n\t\t\t\t\t// Setting this to false is how you get the extension to be synced with Settings Sync (if enabled).\n\t\t\t\t\tisMachineScoped: false,\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\tthis.logService.error(`Problem installing extension ${galleryExtension.identifier.id}`, e);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\tpublic dispose() {\n\t\tif (this._tokenSource) {\n\t\t\tthis._tokenSource.cancel();\n\t\t\tthis._tokenSource = undefined;\n\t\t}\n\t\tthis._queryDelayer.dispose();\n\t\tthis._marketplaceExtensions.clear();\n\t\tthis._marketplaceThemes.length = 0;\n\t}\n}\n\n\nclass InstalledThemesPicker {\n\tconstructor(\n\t\tprivate readonly installMessage: string,\n\t\tprivate readonly browseMessage: string | undefined,\n\t\tprivate readonly placeholderMessage: string,\n\t\tprivate readonly marketplaceTag: string,\n\t\tprivate readonly setTheme: (theme: IWorkbenchTheme | undefined, settingsTarget: ThemeSettingTarget) => Promise<any>,\n\t\tprivate readonly getMarketplaceColorThemes: (publisher: string, name: string, version: string) => Promise<IWorkbenchTheme[]>,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IExtensionResourceLoaderService private readonly extensionResourceLoaderService: IExtensionResourceLoaderService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t}\n\n\tpublic async openQuickPick(picks: QuickPickInput<ThemeItem>[], currentTheme: IWorkbenchTheme) {\n\t\tlet marketplaceThemePicker: MarketplaceThemesPicker | undefined;\n\t\tif (this.extensionGalleryService.isEnabled()) {\n\t\t\tif (this.extensionResourceLoaderService.supportsExtensionGalleryResources && this.browseMessage) {\n\t\t\t\tmarketplaceThemePicker = this.instantiationService.createInstance(MarketplaceThemesPicker, this.getMarketplaceColorThemes.bind(this), this.marketplaceTag);\n\t\t\t\tpicks = [...configurationEntries(this.browseMessage), ...picks];\n\t\t\t} else {\n\t\t\t\tpicks = [...picks, ...configurationEntries(this.installMessage)];\n\t\t\t}\n\t\t}\n\n\t\tlet selectThemeTimeout: number | undefined;\n\n\t\tconst selectTheme = (theme: IWorkbenchTheme | undefined, applyTheme: boolean) => {\n\t\t\tif (selectThemeTimeout) {\n\t\t\t\tclearTimeout(selectThemeTimeout);\n\t\t\t}\n\t\t\tselectThemeTimeout = window.setTimeout(() => {\n\t\t\t\tselectThemeTimeout = undefined;\n\t\t\t\tconst newTheme = (theme ?? currentTheme) as IWorkbenchTheme;\n\t\t\t\tthis.setTheme(newTheme, applyTheme ? 'auto' : 'preview').then(undefined,\n\t\t\t\t\terr => {\n\t\t\t\t\t\tonUnexpectedError(err);\n\t\t\t\t\t\tthis.setTheme(currentTheme, undefined);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}, applyTheme ? 0 : 200);\n\t\t};\n\n\t\tconst pickInstalledThemes = (activeItemId: string | undefined) => {\n\t\t\treturn new Promise<void>((s, _) => {\n\t\t\t\tlet isCompleted = false;\n\n\t\t\t\tconst autoFocusIndex = picks.findIndex(p => isItem(p) && p.id === activeItemId);\n\t\t\t\tconst quickpick = this.quickInputService.createQuickPick<ThemeItem>();\n\t\t\t\tquickpick.items = picks;\n\t\t\t\tquickpick.placeholder = this.placeholderMessage;\n\t\t\t\tquickpick.activeItems = [picks[autoFocusIndex] as ThemeItem];\n\t\t\t\tquickpick.canSelectMany = false;\n\t\t\t\tquickpick.matchOnDescription = true;\n\t\t\t\tquickpick.onDidAccept(async _ => {\n\t\t\t\t\tisCompleted = true;\n\t\t\t\t\tconst theme = quickpick.selectedItems[0];\n\t\t\t\t\tif (!theme || typeof theme.id === 'undefined') { // 'pick in marketplace' entry\n\t\t\t\t\t\tif (marketplaceThemePicker) {\n\t\t\t\t\t\t\tconst res = await marketplaceThemePicker.openQuickPick(quickpick.value, currentTheme, selectTheme);\n\t\t\t\t\t\t\tif (res === 'back') {\n\t\t\t\t\t\t\t\tawait pickInstalledThemes(undefined);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\topenExtensionViewlet(this.paneCompositeService, `${this.marketplaceTag} ${quickpick.value}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectTheme(theme.theme, true);\n\t\t\t\t\t}\n\n\t\t\t\t\tquickpick.hide();\n\t\t\t\t\ts();\n\t\t\t\t});\n\t\t\t\tquickpick.onDidChangeActive(themes => selectTheme(themes[0]?.theme, false));\n\t\t\t\tquickpick.onDidHide(() => {\n\t\t\t\t\tif (!isCompleted) {\n\t\t\t\t\t\tselectTheme(currentTheme, true);\n\t\t\t\t\t\ts();\n\t\t\t\t\t}\n\t\t\t\t\tquickpick.dispose();\n\t\t\t\t});\n\t\t\t\tquickpick.onDidTriggerItemButton(e => {\n\t\t\t\t\tif (isItem(e.item)) {\n\t\t\t\t\t\tconst extensionId = e.item.theme?.extensionData?.extensionId;\n\t\t\t\t\t\tif (extensionId) {\n\t\t\t\t\t\t\topenExtensionViewlet(this.paneCompositeService, `@id:${extensionId}`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\topenExtensionViewlet(this.paneCompositeService, `${this.marketplaceTag} ${quickpick.value}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tquickpick.show();\n\t\t\t});\n\t\t};\n\t\tawait pickInstalledThemes(currentTheme.id);\n\n\t\tmarketplaceThemePicker?.dispose();\n\n\t}\n}\n\nconst SelectColorThemeCommandId = 'workbench.action.selectTheme';\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SelectColorThemeCommandId,\n\t\t\ttitle: { value: localize('selectTheme.label', \"Color Theme\"), original: 'Color Theme' },\n\t\t\tcategory: Categories.Preferences,\n\t\t\tf1: true,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyT)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor) {\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\n\t\tconst installMessage = localize('installColorThemes', \"Install Additional Color Themes...\");\n\t\tconst browseMessage = '$(plus) ' + localize('browseColorThemes', \"Browse Additional Color Themes...\");\n\t\tconst placeholderMessage = localize('themes.selectTheme', \"Select Color Theme (Up/Down Keys to Preview)\");\n\t\tconst marketplaceTag = 'category:themes';\n\t\tconst setTheme = (theme: IWorkbenchTheme | undefined, settingsTarget: ThemeSettingTarget) => themeService.setColorTheme(theme as IWorkbenchColorTheme, settingsTarget);\n\t\tconst getMarketplaceColorThemes = (publisher: string, name: string, version: string) => themeService.getMarketplaceColorThemes(publisher, name, version);\n\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst picker = instantiationService.createInstance(InstalledThemesPicker, installMessage, browseMessage, placeholderMessage, marketplaceTag, setTheme, getMarketplaceColorThemes);\n\n\t\tconst themes = await themeService.getColorThemes();\n\t\tconst currentTheme = themeService.getColorTheme();\n\n\t\tconst picks: QuickPickInput<ThemeItem>[] = [\n\t\t\t...toEntries(themes.filter(t => t.type === ColorScheme.LIGHT), localize('themes.category.light', \"light themes\")),\n\t\t\t...toEntries(themes.filter(t => t.type === ColorScheme.DARK), localize('themes.category.dark', \"dark themes\")),\n\t\t\t...toEntries(themes.filter(t => isHighContrast(t.type)), localize('themes.category.hc', \"high contrast themes\")),\n\t\t];\n\t\tawait picker.openQuickPick(picks, currentTheme);\n\t}\n});\n\nconst SelectFileIconThemeCommandId = 'workbench.action.selectIconTheme';\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SelectFileIconThemeCommandId,\n\t\t\ttitle: { value: localize('selectIconTheme.label', \"File Icon Theme\"), original: 'File Icon Theme' },\n\t\t\tcategory: Categories.Preferences,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor) {\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\n\t\tconst installMessage = localize('installIconThemes', \"Install Additional File Icon Themes...\");\n\t\tconst placeholderMessage = localize('themes.selectIconTheme', \"Select File Icon Theme (Up/Down Keys to Preview)\");\n\t\tconst marketplaceTag = 'tag:icon-theme';\n\t\tconst setTheme = (theme: IWorkbenchTheme | undefined, settingsTarget: ThemeSettingTarget) => themeService.setFileIconTheme(theme as IWorkbenchFileIconTheme, settingsTarget);\n\t\tconst getMarketplaceColorThemes = (publisher: string, name: string, version: string) => themeService.getMarketplaceFileIconThemes(publisher, name, version);\n\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst picker = instantiationService.createInstance(InstalledThemesPicker, installMessage, undefined, placeholderMessage, marketplaceTag, setTheme, getMarketplaceColorThemes);\n\n\t\tconst picks: QuickPickInput<ThemeItem>[] = [\n\t\t\t{ type: 'separator', label: localize('fileIconThemeCategory', 'file icon themes') },\n\t\t\t{ id: '', theme: FileIconThemeData.noIconTheme, label: localize('noIconThemeLabel', 'None'), description: localize('noIconThemeDesc', 'Disable File Icons') },\n\t\t\t...toEntries(await themeService.getFileIconThemes()),\n\t\t];\n\n\t\tawait picker.openQuickPick(picks, themeService.getFileIconTheme());\n\t}\n});\n\nconst SelectProductIconThemeCommandId = 'workbench.action.selectProductIconTheme';\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SelectProductIconThemeCommandId,\n\t\t\ttitle: { value: localize('selectProductIconTheme.label', \"Product Icon Theme\"), original: 'Product Icon Theme' },\n\t\t\tcategory: Categories.Preferences,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor) {\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\n\t\tconst installMessage = localize('installProductIconThemes', \"Install Additional Product Icon Themes...\");\n\t\tconst browseMessage = '$(plus) ' + localize('browseProductIconThemes', \"Browse Additional Product Icon Themes...\");\n\t\tconst placeholderMessage = localize('themes.selectProductIconTheme', \"Select Product Icon Theme (Up/Down Keys to Preview)\");\n\t\tconst marketplaceTag = 'tag:product-icon-theme';\n\t\tconst setTheme = (theme: IWorkbenchTheme | undefined, settingsTarget: ThemeSettingTarget) => themeService.setProductIconTheme(theme as IWorkbenchProductIconTheme, settingsTarget);\n\t\tconst getMarketplaceColorThemes = (publisher: string, name: string, version: string) => themeService.getMarketplaceProductIconThemes(publisher, name, version);\n\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst picker = instantiationService.createInstance(InstalledThemesPicker, installMessage, browseMessage, placeholderMessage, marketplaceTag, setTheme, getMarketplaceColorThemes);\n\n\t\tconst picks: QuickPickInput<ThemeItem>[] = [\n\t\t\t{ type: 'separator', label: localize('productIconThemeCategory', 'product icon themes') },\n\t\t\t{ id: DEFAULT_PRODUCT_ICON_THEME_ID, theme: ProductIconThemeData.defaultTheme, label: localize('defaultProductIconThemeLabel', 'Default') },\n\t\t\t...toEntries(await themeService.getProductIconThemes()),\n\t\t];\n\n\t\tawait picker.openQuickPick(picks, themeService.getProductIconTheme());\n\t}\n});\n\nCommandsRegistry.registerCommand('workbench.action.previewColorTheme', async function (accessor: ServicesAccessor, extension: { publisher: string; name: string; version: string }, themeSettingsId?: string) {\n\tconst themeService = accessor.get(IWorkbenchThemeService);\n\n\tlet themes = findBuiltInThemes(await themeService.getColorThemes(), extension);\n\tif (themes.length === 0) {\n\t\tthemes = await themeService.getMarketplaceColorThemes(extension.publisher, extension.name, extension.version);\n\t}\n\tfor (const theme of themes) {\n\t\tif (!themeSettingsId || theme.settingsId === themeSettingsId) {\n\t\t\tawait themeService.setColorTheme(theme, 'preview');\n\t\t\treturn theme.settingsId;\n\t\t}\n\t}\n\treturn undefined;\n});\n\nfunction findBuiltInThemes(themes: IWorkbenchColorTheme[], extension: { publisher: string; name: string }): IWorkbenchColorTheme[] {\n\treturn themes.filter(({ extensionData }) => extensionData && extensionData.extensionIsBuiltin && equalsIgnoreCase(extensionData.extensionPublisher, extension.publisher) && equalsIgnoreCase(extensionData.extensionName, extension.name));\n}\n\nfunction configurationEntries(label: string): QuickPickInput<ThemeItem>[] {\n\treturn [\n\t\t{\n\t\t\ttype: 'separator'\n\t\t},\n\t\t{\n\t\t\tid: undefined,\n\t\t\tlabel: label,\n\t\t\talwaysShow: true,\n\t\t\tbuttons: [configureButton]\n\t\t}\n\t];\n\n}\n\nfunction openExtensionViewlet(paneCompositeService: IPaneCompositePartService, query: string) {\n\treturn paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar, true).then(viewlet => {\n\t\tif (viewlet) {\n\t\t\t(viewlet?.getViewPaneContainer() as IExtensionsViewPaneContainer).search(query);\n\t\t\tviewlet.focus();\n\t\t}\n\t});\n}\ninterface ThemeItem extends IQuickPickItem {\n\treadonly id: string | undefined;\n\treadonly theme?: IWorkbenchTheme;\n\treadonly galleryExtension?: IGalleryExtension;\n\treadonly label: string;\n\treadonly description?: string;\n\treadonly alwaysShow?: boolean;\n}\n\nfunction isItem(i: QuickPickInput<ThemeItem>): i is ThemeItem {\n\treturn (<any>i)['type'] !== 'separator';\n}\n\nfunction toEntry(theme: IWorkbenchTheme): ThemeItem {\n\tconst settingId = theme.settingsId ?? undefined;\n\tconst item: ThemeItem = {\n\t\tid: theme.id,\n\t\ttheme: theme,\n\t\tlabel: theme.label,\n\t\tdescription: theme.description || (theme.label === settingId ? undefined : settingId),\n\t};\n\tif (theme.extensionData) {\n\t\titem.buttons = [configureButton];\n\t}\n\treturn item;\n}\n\nfunction toEntries(themes: Array<IWorkbenchTheme>, label?: string): QuickPickInput<ThemeItem>[] {\n\tconst sorter = (t1: ThemeItem, t2: ThemeItem) => t1.label.localeCompare(t2.label);\n\tconst entries: QuickPickInput<ThemeItem>[] = themes.map(toEntry).sort(sorter);\n\tif (entries.length > 0 && label) {\n\t\tentries.unshift({ type: 'separator', label });\n\t}\n\treturn entries;\n}\n\nconst configureButton: IQuickInputButton = {\n\ticonClass: ThemeIcon.asClassName(manageExtensionIcon),\n\ttooltip: localize('manage extension', \"Manage Extension\"),\n};\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.generateColorTheme',\n\t\t\ttitle: { value: localize('generateColorTheme.label', \"Generate Color Theme From Current Settings\"), original: 'Generate Color Theme From Current Settings' },\n\t\t\tcategory: Categories.Developer,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor) {\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\n\t\tconst theme = themeService.getColorTheme();\n\t\tconst colors = Registry.as<IColorRegistry>(ColorRegistryExtensions.ColorContribution).getColors();\n\t\tconst colorIds = colors.map(c => c.id).sort();\n\t\tconst resultingColors: { [key: string]: string | null } = {};\n\t\tconst inherited: string[] = [];\n\t\tfor (const colorId of colorIds) {\n\t\t\tconst color = theme.getColor(colorId, false);\n\t\t\tif (color) {\n\t\t\t\tresultingColors[colorId] = Color.Format.CSS.formatHexA(color, true);\n\t\t\t} else {\n\t\t\t\tinherited.push(colorId);\n\t\t\t}\n\t\t}\n\t\tconst nullDefaults = [];\n\t\tfor (const id of inherited) {\n\t\t\tconst color = theme.getColor(id);\n\t\t\tif (color) {\n\t\t\t\tresultingColors['__' + id] = Color.Format.CSS.formatHexA(color, true);\n\t\t\t} else {\n\t\t\t\tnullDefaults.push(id);\n\t\t\t}\n\t\t}\n\t\tfor (const id of nullDefaults) {\n\t\t\tresultingColors['__' + id] = null;\n\t\t}\n\t\tlet contents = JSON.stringify({\n\t\t\t'$schema': colorThemeSchemaId,\n\t\t\ttype: theme.type,\n\t\t\tcolors: resultingColors,\n\t\t\ttokenColors: theme.tokenColors.filter(t => !!t.scope)\n\t\t}, null, '\\t');\n\t\tcontents = contents.replace(/\\\"__/g, '//\"');\n\n\t\tconst editorService = accessor.get(IEditorService);\n\t\treturn editorService.openEditor({ resource: undefined, contents, languageId: 'jsonc', options: { pinned: true } });\n\t}\n});\n\nconst toggleLightDarkThemesCommandId = 'workbench.action.toggleLightDarkThemes';\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: toggleLightDarkThemesCommandId,\n\t\t\ttitle: { value: localize('toggleLightDarkThemes.label', \"Toggle between Light/Dark Themes\"), original: 'Toggle between Light/Dark Themes' },\n\t\t\tcategory: Categories.Preferences,\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor) {\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\n\t\tconst currentTheme = themeService.getColorTheme();\n\t\tlet newSettingsId: string = ThemeSettings.PREFERRED_DARK_THEME;\n\t\tswitch (currentTheme.type) {\n\t\t\tcase ColorScheme.LIGHT:\n\t\t\t\tnewSettingsId = ThemeSettings.PREFERRED_DARK_THEME;\n\t\t\t\tbreak;\n\t\t\tcase ColorScheme.DARK:\n\t\t\t\tnewSettingsId = ThemeSettings.PREFERRED_LIGHT_THEME;\n\t\t\t\tbreak;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT:\n\t\t\t\tnewSettingsId = ThemeSettings.PREFERRED_HC_DARK_THEME;\n\t\t\t\tbreak;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK:\n\t\t\t\tnewSettingsId = ThemeSettings.PREFERRED_HC_LIGHT_THEME;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst themeSettingId: string = configurationService.getValue(newSettingsId);\n\n\t\tif (themeSettingId && typeof themeSettingId === 'string') {\n\t\t\tconst theme = (await themeService.getColorThemes()).find(t => t.settingsId === themeSettingId);\n\t\t\tif (theme) {\n\t\t\t\tthemeService.setColorTheme(theme.id, 'auto');\n\t\t\t}\n\t\t}\n\t}\n});\n\nconst browseColorThemesInMarketplaceCommandId = 'workbench.action.browseColorThemesInMarketplace';\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: browseColorThemesInMarketplaceCommandId,\n\t\t\ttitle: { value: localize('browseColorThemeInMarketPlace.label', \"Browse Color Themes in Marketplace\"), original: 'Browse Color Themes in Marketplace' },\n\t\t\tcategory: Categories.Preferences,\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor) {\n\t\tconst marketplaceTag = 'category:themes';\n\t\tconst themeService = accessor.get(IWorkbenchThemeService);\n\t\tconst extensionGalleryService = accessor.get(IExtensionGalleryService);\n\t\tconst extensionResourceLoaderService = accessor.get(IExtensionResourceLoaderService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\n\t\tif (!extensionGalleryService.isEnabled() || !extensionResourceLoaderService.supportsExtensionGalleryResources) {\n\t\t\treturn;\n\t\t}\n\t\tconst currentTheme = themeService.getColorTheme();\n\t\tconst getMarketplaceColorThemes = (publisher: string, name: string, version: string) => themeService.getMarketplaceColorThemes(publisher, name, version);\n\n\t\tlet selectThemeTimeout: number | undefined;\n\n\t\tconst selectTheme = (theme: IWorkbenchTheme | undefined, applyTheme: boolean) => {\n\t\t\tif (selectThemeTimeout) {\n\t\t\t\tclearTimeout(selectThemeTimeout);\n\t\t\t}\n\t\t\tselectThemeTimeout = window.setTimeout(() => {\n\t\t\t\tselectThemeTimeout = undefined;\n\t\t\t\tconst newTheme = (theme ?? currentTheme) as IWorkbenchTheme;\n\t\t\t\tthemeService.setColorTheme(newTheme as IWorkbenchColorTheme, applyTheme ? 'auto' : 'preview').then(undefined,\n\t\t\t\t\terr => {\n\t\t\t\t\t\tonUnexpectedError(err);\n\t\t\t\t\t\tthemeService.setColorTheme(currentTheme, undefined);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}, applyTheme ? 0 : 200);\n\t\t};\n\n\t\tconst marketplaceThemePicker = instantiationService.createInstance(MarketplaceThemesPicker, getMarketplaceColorThemes, marketplaceTag);\n\t\tawait marketplaceThemePicker.openQuickPick('', themeService.getColorTheme(), selectTheme).then(undefined, onUnexpectedError);\n\t}\n});\n\nconst ThemesSubMenu = new MenuId('ThemesSubMenu');\nMenuRegistry.appendMenuItem(MenuId.GlobalActivity, <ISubmenuItem>{\n\ttitle: localize('themes', \"Themes\"),\n\tsubmenu: ThemesSubMenu,\n\tgroup: '2_configuration',\n\torder: 7\n});\nMenuRegistry.appendMenuItem(MenuId.MenubarPreferencesMenu, <ISubmenuItem>{\n\ttitle: localize({ key: 'miSelectTheme', comment: ['&& denotes a mnemonic'] }, \"&&Theme\"),\n\tsubmenu: ThemesSubMenu,\n\tgroup: '2_configuration',\n\torder: 7\n});\n\nMenuRegistry.appendMenuItem(ThemesSubMenu, {\n\tcommand: {\n\t\tid: SelectColorThemeCommandId,\n\t\ttitle: localize('selectTheme.label', \"Color Theme\")\n\t},\n\torder: 1\n});\n\nMenuRegistry.appendMenuItem(ThemesSubMenu, {\n\tcommand: {\n\t\tid: SelectFileIconThemeCommandId,\n\t\ttitle: localize('themes.selectIconTheme.label', \"File Icon Theme\")\n\t},\n\torder: 2\n});\n\nMenuRegistry.appendMenuItem(ThemesSubMenu, {\n\tcommand: {\n\t\tid: SelectProductIconThemeCommandId,\n\t\ttitle: localize('themes.selectProductIconTheme.label', \"Product Icon Theme\")\n\t},\n\torder: 3\n});\n\ntype DefaultThemeUpdatedNotificationReaction = 'keepNew' | 'keepOld' | 'tryNew' | 'cancel' | 'browse';\n\nclass DefaultThemeUpdatedNotificationContribution implements IWorkbenchContribution {\n\n\tstatic STORAGE_KEY = 'themeUpdatedNotificationShown';\n\n\tconstructor(\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IWorkbenchThemeService private readonly _workbenchThemeService: IWorkbenchThemeService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@IHostService private readonly _hostService: IHostService,\n\t) {\n\t\tif (_storageService.getBoolean(DefaultThemeUpdatedNotificationContribution.STORAGE_KEY, StorageScope.APPLICATION)) {\n\t\t\treturn;\n\t\t}\n\t\tsetTimeout(async () => {\n\t\t\tif (_storageService.getBoolean(DefaultThemeUpdatedNotificationContribution.STORAGE_KEY, StorageScope.APPLICATION)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (await this._hostService.hadLastFocus()) {\n\t\t\t\tthis._storageService.store(DefaultThemeUpdatedNotificationContribution.STORAGE_KEY, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\tif (this._workbenchThemeService.hasUpdatedDefaultThemes()) {\n\t\t\t\t\tthis._showYouGotMigratedNotification();\n\t\t\t\t} else {\n\t\t\t\t\tconst currentTheme = this._workbenchThemeService.getColorTheme().settingsId;\n\t\t\t\t\tif (currentTheme === ThemeSettingDefaults.COLOR_THEME_LIGHT_OLD || currentTheme === ThemeSettingDefaults.COLOR_THEME_DARK_OLD) {\n\t\t\t\t\t\tthis._tryNewThemeNotification();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\tprivate async _showYouGotMigratedNotification(): Promise<void> {\n\t\tconst usingLight = this._workbenchThemeService.getColorTheme().type === ColorScheme.LIGHT;\n\t\tconst newThemeSettingsId = usingLight ? ThemeSettingDefaults.COLOR_THEME_LIGHT : ThemeSettingDefaults.COLOR_THEME_DARK;\n\t\tconst newTheme = (await this._workbenchThemeService.getColorThemes()).find(theme => theme.settingsId === newThemeSettingsId);\n\t\tif (newTheme) {\n\t\t\tconst choices = [\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('button.keep', \"Keep New Theme\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis._writeTelemetry('keepNew');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('button.browse', \"Browse Themes\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis._writeTelemetry('browse');\n\t\t\t\t\t\tthis._commandService.executeCommand(SelectColorThemeCommandId);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('button.revert', \"Revert\"),\n\t\t\t\t\trun: async () => {\n\t\t\t\t\t\tthis._writeTelemetry('keepOld');\n\t\t\t\t\t\tconst oldSettingsId = usingLight ? ThemeSettingDefaults.COLOR_THEME_LIGHT_OLD : ThemeSettingDefaults.COLOR_THEME_DARK_OLD;\n\t\t\t\t\t\tconst oldTheme = (await this._workbenchThemeService.getColorThemes()).find(theme => theme.settingsId === oldSettingsId);\n\t\t\t\t\t\tif (oldTheme) {\n\t\t\t\t\t\t\tthis._workbenchThemeService.setColorTheme(oldTheme, 'auto');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tawait this._notificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tlocalize({ key: 'themeUpdatedNotification', comment: ['{0} is the name of the new default theme'] }, \"Visual Studio Code now ships with a new default theme '{0}'. If you prefer, you can switch back to the old theme or try one of the many other color themes available.\", newTheme.label),\n\t\t\t\tchoices,\n\t\t\t\t{\n\t\t\t\t\tonCancel: () => this._writeTelemetry('cancel')\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate async _tryNewThemeNotification(): Promise<void> {\n\t\tconst newThemeSettingsId = this._workbenchThemeService.getColorTheme().type === ColorScheme.LIGHT ? ThemeSettingDefaults.COLOR_THEME_LIGHT : ThemeSettingDefaults.COLOR_THEME_DARK;\n\t\tconst theme = (await this._workbenchThemeService.getColorThemes()).find(theme => theme.settingsId === newThemeSettingsId);\n\t\tif (theme) {\n\t\t\tconst choices: IPromptChoice[] = [{\n\t\t\t\tlabel: localize('button.tryTheme', \"Try New Theme\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis._writeTelemetry('tryNew');\n\t\t\t\t\tthis._workbenchThemeService.setColorTheme(theme, 'auto');\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: localize('button.cancel', \"Cancel\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis._writeTelemetry('cancel');\n\t\t\t\t}\n\t\t\t}];\n\t\t\tawait this._notificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tlocalize({ key: 'newThemeNotification', comment: ['{0} is the name of the new default theme'] }, \"Visual Studio Code now ships with a new default theme '{0}'. Do you want to give it a try?\", theme.label),\n\t\t\t\tchoices,\n\t\t\t\t{ onCancel: () => this._writeTelemetry('cancel') }\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _writeTelemetry(outcome: DefaultThemeUpdatedNotificationReaction): void {\n\t\ttype ThemeUpdatedNoticationClassification = {\n\t\t\towner: 'aeschli';\n\t\t\tcomment: 'Reaction to the notification that theme has updated to a new default theme';\n\t\t\tweb: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'Whether this is running on web' };\n\t\t\treaction: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'Outcome of the notification' };\n\t\t};\n\t\ttype ThemeUpdatedNoticationEvent = {\n\t\t\tweb: boolean;\n\t\t\treaction: DefaultThemeUpdatedNotificationReaction;\n\t\t};\n\n\t\tthis._telemetryService.publicLog2<ThemeUpdatedNoticationEvent, ThemeUpdatedNoticationClassification>('themeUpdatedNotication', {\n\t\t\tweb: isWeb,\n\t\t\treaction: outcome\n\t\t});\n\t}\n}\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(Extensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(DefaultThemeUpdatedNotificationContribution, LifecyclePhase.Eventually);\n"]}