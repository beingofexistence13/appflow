{"version":3,"sources":["vs/workbench/contrib/debug/browser/debugSession.ts"],"names":[],"mappings":"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","file":"debugSession.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as aria from 'vs/base/browser/ui/aria/aria';\nimport { distinct } from 'vs/base/common/arrays';\nimport { Queue, RunOnceScheduler } from 'vs/base/common/async';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { canceled } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { normalizeDriveLetter } from 'vs/base/common/labels';\nimport { DisposableStore, IDisposable, MutableDisposable, dispose } from 'vs/base/common/lifecycle';\nimport { mixin } from 'vs/base/common/objects';\nimport * as platform from 'vs/base/common/platform';\nimport * as resources from 'vs/base/common/resources';\nimport Severity from 'vs/base/common/severity';\nimport { URI } from 'vs/base/common/uri';\nimport { generateUuid } from 'vs/base/common/uuid';\nimport { IPosition, Position } from 'vs/editor/common/core/position';\nimport { localize } from 'vs/nls';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';\nimport { ILogService } from 'vs/platform/log/common/log';\nimport { INotificationService } from 'vs/platform/notification/common/notification';\nimport { IProductService } from 'vs/platform/product/common/productService';\nimport { ICustomEndpointTelemetryService, ITelemetryService, TelemetryLevel } from 'vs/platform/telemetry/common/telemetry';\nimport { IUriIdentityService } from 'vs/platform/uriIdentity/common/uriIdentity';\nimport { IWorkspaceContextService, IWorkspaceFolder } from 'vs/platform/workspace/common/workspace';\nimport { ViewContainerLocation } from 'vs/workbench/common/views';\nimport { RawDebugSession } from 'vs/workbench/contrib/debug/browser/rawDebugSession';\nimport { AdapterEndEvent, IBreakpoint, IConfig, IDataBreakpoint, IDebugConfiguration, IDebugService, IDebugSession, IDebugSessionOptions, IDebugger, IExceptionBreakpoint, IExceptionInfo, IFunctionBreakpoint, IInstructionBreakpoint, IMemoryRegion, IRawModelUpdate, IRawStoppedDetails, IReplElement, IStackFrame, IThread, LoadedSourceEvent, State, VIEWLET_ID } from 'vs/workbench/contrib/debug/common/debug';\nimport { DebugCompoundRoot } from 'vs/workbench/contrib/debug/common/debugCompoundRoot';\nimport { DebugModel, ExpressionContainer, MemoryRegion, Thread } from 'vs/workbench/contrib/debug/common/debugModel';\nimport { Source } from 'vs/workbench/contrib/debug/common/debugSource';\nimport { filterExceptionsFromTelemetry } from 'vs/workbench/contrib/debug/common/debugUtils';\nimport { INewReplElementData, ReplModel } from 'vs/workbench/contrib/debug/common/replModel';\nimport { IWorkbenchEnvironmentService } from 'vs/workbench/services/environment/common/environmentService';\nimport { IHostService } from 'vs/workbench/services/host/browser/host';\nimport { ILifecycleService } from 'vs/workbench/services/lifecycle/common/lifecycle';\nimport { IPaneCompositePartService } from 'vs/workbench/services/panecomposite/browser/panecomposite';\n\nexport class DebugSession implements IDebugSession, IDisposable {\n\tparentSession: IDebugSession | undefined;\n\n\tprivate _subId: string | undefined;\n\traw: RawDebugSession | undefined; // used in tests\n\tprivate initialized = false;\n\tprivate _options: IDebugSessionOptions;\n\n\tprivate sources = new Map<string, Source>();\n\tprivate threads = new Map<number, Thread>();\n\tprivate threadIds: number[] = [];\n\tprivate cancellationMap = new Map<number, CancellationTokenSource[]>();\n\tprivate readonly rawListeners = new DisposableStore();\n\tprivate fetchThreadsScheduler: RunOnceScheduler | undefined;\n\tprivate passFocusScheduler: RunOnceScheduler;\n\tprivate lastContinuedThreadId: number | undefined;\n\tprivate repl: ReplModel;\n\tprivate stoppedDetails: IRawStoppedDetails[] = [];\n\n\tprivate readonly _onDidChangeState = new Emitter<void>();\n\tprivate readonly _onDidEndAdapter = new Emitter<AdapterEndEvent | undefined>();\n\n\tprivate readonly _onDidLoadedSource = new Emitter<LoadedSourceEvent>();\n\tprivate readonly _onDidCustomEvent = new Emitter<DebugProtocol.Event>();\n\tprivate readonly _onDidProgressStart = new Emitter<DebugProtocol.ProgressStartEvent>();\n\tprivate readonly _onDidProgressUpdate = new Emitter<DebugProtocol.ProgressUpdateEvent>();\n\tprivate readonly _onDidProgressEnd = new Emitter<DebugProtocol.ProgressEndEvent>();\n\tprivate readonly _onDidInvalidMemory = new Emitter<DebugProtocol.MemoryEvent>();\n\n\tprivate readonly _onDidChangeREPLElements = new Emitter<void>();\n\n\tprivate _name: string | undefined;\n\tprivate readonly _onDidChangeName = new Emitter<string>();\n\n\tconstructor(\n\t\tprivate id: string,\n\t\tprivate _configuration: { resolved: IConfig; unresolved: IConfig | undefined },\n\t\tpublic root: IWorkspaceFolder | undefined,\n\t\tprivate model: DebugModel,\n\t\toptions: IDebugSessionOptions | undefined,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ICustomEndpointTelemetryService private readonly customEndpointTelemetryService: ICustomEndpointTelemetryService,\n\t\t@IWorkbenchEnvironmentService private readonly workbenchEnvironmentService: IWorkbenchEnvironmentService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tthis._options = options || {};\n\t\tthis.parentSession = this._options.parentSession;\n\t\tif (this.hasSeparateRepl()) {\n\t\t\tthis.repl = new ReplModel(this.configurationService);\n\t\t} else {\n\t\t\tthis.repl = (this.parentSession as DebugSession).repl;\n\t\t}\n\n\t\tconst toDispose = new DisposableStore();\n\t\tconst replListener = toDispose.add(new MutableDisposable());\n\t\treplListener.value = this.repl.onDidChangeElements(() => this._onDidChangeREPLElements.fire());\n\t\tif (lifecycleService) {\n\t\t\ttoDispose.add(lifecycleService.onWillShutdown(() => {\n\t\t\t\tthis.shutdown();\n\t\t\t\tdispose(toDispose);\n\t\t\t}));\n\t\t}\n\n\t\tconst compoundRoot = this._options.compoundRoot;\n\t\tif (compoundRoot) {\n\t\t\ttoDispose.add(compoundRoot.onDidSessionStop(() => this.terminate()));\n\t\t}\n\t\tthis.passFocusScheduler = new RunOnceScheduler(() => {\n\t\t\t// If there is some session or thread that is stopped pass focus to it\n\t\t\tif (this.debugService.getModel().getSessions().some(s => s.state === State.Stopped) || this.getAllThreads().some(t => t.stopped)) {\n\t\t\t\tif (typeof this.lastContinuedThreadId === 'number') {\n\t\t\t\t\tconst thread = this.debugService.getViewModel().focusedThread;\n\t\t\t\t\tif (thread && thread.threadId === this.lastContinuedThreadId && !thread.stopped) {\n\t\t\t\t\t\tconst toFocusThreadId = this.getStoppedDetails()?.threadId;\n\t\t\t\t\t\tconst toFocusThread = typeof toFocusThreadId === 'number' ? this.getThread(toFocusThreadId) : undefined;\n\t\t\t\t\t\tthis.debugService.focusStackFrame(undefined, toFocusThread);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst session = this.debugService.getViewModel().focusedSession;\n\t\t\t\t\tif (session && session.getId() === this.getId() && session.state !== State.Stopped) {\n\t\t\t\t\t\tthis.debugService.focusStackFrame(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 800);\n\n\t\tconst parent = this._options.parentSession;\n\t\tif (parent) {\n\t\t\ttoDispose.add(parent.onDidEndAdapter(() => {\n\t\t\t\t// copy the parent repl and get a new detached repl for this child, and\n\t\t\t\t// remove its parent, if it's still running\n\t\t\t\tif (!this.hasSeparateRepl() && this.raw?.isInShutdown === false) {\n\t\t\t\t\tthis.repl = this.repl.clone();\n\t\t\t\t\treplListener.value = this.repl.onDidChangeElements(() => this._onDidChangeREPLElements.fire());\n\t\t\t\t\tthis.parentSession = undefined;\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tsetSubId(subId: string | undefined) {\n\t\tthis._subId = subId;\n\t}\n\n\tgetMemory(memoryReference: string): IMemoryRegion {\n\t\treturn new MemoryRegion(memoryReference, this);\n\t}\n\n\tget subId(): string | undefined {\n\t\treturn this._subId;\n\t}\n\n\tget configuration(): IConfig {\n\t\treturn this._configuration.resolved;\n\t}\n\n\tget unresolvedConfiguration(): IConfig | undefined {\n\t\treturn this._configuration.unresolved;\n\t}\n\n\tget lifecycleManagedByParent(): boolean {\n\t\treturn !!this._options.lifecycleManagedByParent;\n\t}\n\n\tget compact(): boolean {\n\t\treturn !!this._options.compact;\n\t}\n\n\tget saveBeforeRestart(): boolean {\n\t\treturn this._options.saveBeforeRestart ?? !this._options?.parentSession;\n\t}\n\n\tget compoundRoot(): DebugCompoundRoot | undefined {\n\t\treturn this._options.compoundRoot;\n\t}\n\n\tget suppressDebugStatusbar(): boolean {\n\t\treturn this._options.suppressDebugStatusbar ?? false;\n\t}\n\n\tget suppressDebugToolbar(): boolean {\n\t\treturn this._options.suppressDebugToolbar ?? false;\n\t}\n\n\tget suppressDebugView(): boolean {\n\t\treturn this._options.suppressDebugView ?? false;\n\t}\n\n\n\tget autoExpandLazyVariables(): boolean {\n\t\t// This tiny helper avoids converting the entire debug model to use service injection\n\t\treturn this.configurationService.getValue<IDebugConfiguration>('debug').autoExpandLazyVariables;\n\t}\n\n\tsetConfiguration(configuration: { resolved: IConfig; unresolved: IConfig | undefined }) {\n\t\tthis._configuration = configuration;\n\t}\n\n\tgetLabel(): string {\n\t\tconst includeRoot = this.workspaceContextService.getWorkspace().folders.length > 1;\n\t\treturn includeRoot && this.root ? `${this.name} (${resources.basenameOrAuthority(this.root.uri)})` : this.name;\n\t}\n\n\tsetName(name: string): void {\n\t\tthis._name = name;\n\t\tthis._onDidChangeName.fire(name);\n\t}\n\n\tget name(): string {\n\t\treturn this._name || this.configuration.name;\n\t}\n\n\tget state(): State {\n\t\tif (!this.initialized) {\n\t\t\treturn State.Initializing;\n\t\t}\n\t\tif (!this.raw) {\n\t\t\treturn State.Inactive;\n\t\t}\n\n\t\tconst focusedThread = this.debugService.getViewModel().focusedThread;\n\t\tif (focusedThread && focusedThread.session === this) {\n\t\t\treturn focusedThread.stopped ? State.Stopped : State.Running;\n\t\t}\n\t\tif (this.getAllThreads().some(t => t.stopped)) {\n\t\t\treturn State.Stopped;\n\t\t}\n\n\t\treturn State.Running;\n\t}\n\n\tget capabilities(): DebugProtocol.Capabilities {\n\t\treturn this.raw ? this.raw.capabilities : Object.create(null);\n\t}\n\n\t//---- events\n\tget onDidChangeState(): Event<void> {\n\t\treturn this._onDidChangeState.event;\n\t}\n\n\tget onDidEndAdapter(): Event<AdapterEndEvent | undefined> {\n\t\treturn this._onDidEndAdapter.event;\n\t}\n\n\tget onDidChangeReplElements(): Event<void> {\n\t\treturn this._onDidChangeREPLElements.event;\n\t}\n\n\tget onDidChangeName(): Event<string> {\n\t\treturn this._onDidChangeName.event;\n\t}\n\n\t//---- DAP events\n\n\tget onDidCustomEvent(): Event<DebugProtocol.Event> {\n\t\treturn this._onDidCustomEvent.event;\n\t}\n\n\tget onDidLoadedSource(): Event<LoadedSourceEvent> {\n\t\treturn this._onDidLoadedSource.event;\n\t}\n\n\tget onDidProgressStart(): Event<DebugProtocol.ProgressStartEvent> {\n\t\treturn this._onDidProgressStart.event;\n\t}\n\n\tget onDidProgressUpdate(): Event<DebugProtocol.ProgressUpdateEvent> {\n\t\treturn this._onDidProgressUpdate.event;\n\t}\n\n\tget onDidProgressEnd(): Event<DebugProtocol.ProgressEndEvent> {\n\t\treturn this._onDidProgressEnd.event;\n\t}\n\n\tget onDidInvalidateMemory(): Event<DebugProtocol.MemoryEvent> {\n\t\treturn this._onDidInvalidMemory.event;\n\t}\n\n\t//---- DAP requests\n\n\t/**\n\t * create and initialize a new debug adapter for this session\n\t */\n\tasync initialize(dbgr: IDebugger): Promise<void> {\n\n\t\tif (this.raw) {\n\t\t\t// if there was already a connection make sure to remove old listeners\n\t\t\tawait this.shutdown();\n\t\t}\n\n\t\ttry {\n\t\t\tconst debugAdapter = await dbgr.createDebugAdapter(this);\n\t\t\tthis.raw = this.instantiationService.createInstance(RawDebugSession, debugAdapter, dbgr, this.id, this.configuration.name);\n\n\t\t\tawait this.raw.start();\n\t\t\tthis.registerListeners();\n\t\t\tawait this.raw!.initialize({\n\t\t\t\tclientID: 'vscode',\n\t\t\t\tclientName: this.productService.nameLong,\n\t\t\t\tadapterID: this.configuration.type,\n\t\t\t\tpathFormat: 'path',\n\t\t\t\tlinesStartAt1: true,\n\t\t\t\tcolumnsStartAt1: true,\n\t\t\t\tsupportsVariableType: true, // #8858\n\t\t\t\tsupportsVariablePaging: true, // #9537\n\t\t\t\tsupportsRunInTerminalRequest: true, // #10574\n\t\t\t\tlocale: platform.language, // #169114\n\t\t\t\tsupportsProgressReporting: true, // #92253\n\t\t\t\tsupportsInvalidatedEvent: true, // #106745\n\t\t\t\tsupportsMemoryReferences: true, //#129684\n\t\t\t\tsupportsArgsCanBeInterpretedByShell: true, // #149910\n\t\t\t\tsupportsMemoryEvent: true, // #133643\n\t\t\t\tsupportsStartDebuggingRequest: true\n\t\t\t});\n\n\t\t\tthis.initialized = true;\n\t\t\tthis._onDidChangeState.fire();\n\t\t\tthis.debugService.setExceptionBreakpointsForSession(this, (this.raw && this.raw.capabilities.exceptionBreakpointFilters) || []);\n\t\t} catch (err) {\n\t\t\tthis.initialized = true;\n\t\t\tthis._onDidChangeState.fire();\n\t\t\tawait this.shutdown();\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * launch or attach to the debuggee\n\t */\n\tasync launchOrAttach(config: IConfig): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'launch or attach'));\n\t\t}\n\t\tif (this.parentSession && this.parentSession.state === State.Inactive) {\n\t\t\tthrow canceled();\n\t\t}\n\n\t\t// __sessionID only used for EH debugging (but we add it always for now...)\n\t\tconfig.__sessionId = this.getId();\n\t\ttry {\n\t\t\tawait this.raw.launchOrAttach(config);\n\t\t} catch (err) {\n\t\t\tthis.shutdown();\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * terminate the current debug adapter session\n\t */\n\tasync terminate(restart = false): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\t// Adapter went down but it did not send a 'terminated' event, simulate like the event has been sent\n\t\t\tthis.onDidExitAdapter();\n\t\t}\n\n\t\tthis.cancelAllRequests();\n\t\tif (this._options.lifecycleManagedByParent && this.parentSession) {\n\t\t\tawait this.parentSession.terminate(restart);\n\t\t} else if (this.raw) {\n\t\t\tif (this.raw.capabilities.supportsTerminateRequest && this._configuration.resolved.request === 'launch') {\n\t\t\t\tawait this.raw.terminate(restart);\n\t\t\t} else {\n\t\t\t\tawait this.raw.disconnect({ restart, terminateDebuggee: true });\n\t\t\t}\n\t\t}\n\n\t\tif (!restart) {\n\t\t\tthis._options.compoundRoot?.sessionStopped();\n\t\t}\n\t}\n\n\t/**\n\t * end the current debug adapter session\n\t */\n\tasync disconnect(restart = false, suspend = false): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\t// Adapter went down but it did not send a 'terminated' event, simulate like the event has been sent\n\t\t\tthis.onDidExitAdapter();\n\t\t}\n\n\t\tthis.cancelAllRequests();\n\t\tif (this._options.lifecycleManagedByParent && this.parentSession) {\n\t\t\tawait this.parentSession.disconnect(restart, suspend);\n\t\t} else if (this.raw) {\n\t\t\t// TODO terminateDebuggee should be undefined by default?\n\t\t\tawait this.raw.disconnect({ restart, terminateDebuggee: false, suspendDebuggee: suspend });\n\t\t}\n\n\t\tif (!restart) {\n\t\t\tthis._options.compoundRoot?.sessionStopped();\n\t\t}\n\t}\n\n\t/**\n\t * restart debug adapter session\n\t */\n\tasync restart(): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'restart'));\n\t\t}\n\n\t\tthis.cancelAllRequests();\n\t\tif (this._options.lifecycleManagedByParent && this.parentSession) {\n\t\t\tawait this.parentSession.restart();\n\t\t} else {\n\t\t\tawait this.raw.restart({ arguments: this.configuration });\n\t\t}\n\t}\n\n\tasync sendBreakpoints(modelUri: URI, breakpointsToSend: IBreakpoint[], sourceModified: boolean): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'breakpoints'));\n\t\t}\n\n\t\tif (!this.raw.readyForBreakpoints) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst rawSource = this.getRawSource(modelUri);\n\t\tif (breakpointsToSend.length && !rawSource.adapterData) {\n\t\t\trawSource.adapterData = breakpointsToSend[0].adapterData;\n\t\t}\n\t\t// Normalize all drive letters going out from vscode to debug adapters so we are consistent with our resolving #43959\n\t\tif (rawSource.path) {\n\t\t\trawSource.path = normalizeDriveLetter(rawSource.path);\n\t\t}\n\n\t\tconst response = await this.raw.setBreakpoints({\n\t\t\tsource: rawSource,\n\t\t\tlines: breakpointsToSend.map(bp => bp.sessionAgnosticData.lineNumber),\n\t\t\tbreakpoints: breakpointsToSend.map(bp => ({ line: bp.sessionAgnosticData.lineNumber, column: bp.sessionAgnosticData.column, condition: bp.condition, hitCondition: bp.hitCondition, logMessage: bp.logMessage })),\n\t\t\tsourceModified\n\t\t});\n\t\tif (response && response.body) {\n\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>();\n\t\t\tfor (let i = 0; i < breakpointsToSend.length; i++) {\n\t\t\t\tdata.set(breakpointsToSend[i].getId(), response.body.breakpoints[i]);\n\t\t\t}\n\n\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t}\n\t}\n\n\tasync sendFunctionBreakpoints(fbpts: IFunctionBreakpoint[]): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'function breakpoints'));\n\t\t}\n\n\t\tif (this.raw.readyForBreakpoints) {\n\t\t\tconst response = await this.raw.setFunctionBreakpoints({ breakpoints: fbpts });\n\t\t\tif (response && response.body) {\n\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>();\n\t\t\t\tfor (let i = 0; i < fbpts.length; i++) {\n\t\t\t\t\tdata.set(fbpts[i].getId(), response.body.breakpoints[i]);\n\t\t\t\t}\n\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync sendExceptionBreakpoints(exbpts: IExceptionBreakpoint[]): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'exception breakpoints'));\n\t\t}\n\n\t\tif (this.raw.readyForBreakpoints) {\n\t\t\tconst args: DebugProtocol.SetExceptionBreakpointsArguments = this.capabilities.supportsExceptionFilterOptions ? {\n\t\t\t\tfilters: [],\n\t\t\t\tfilterOptions: exbpts.map(exb => {\n\t\t\t\t\tif (exb.condition) {\n\t\t\t\t\t\treturn { filterId: exb.filter, condition: exb.condition };\n\t\t\t\t\t}\n\n\t\t\t\t\treturn { filterId: exb.filter };\n\t\t\t\t})\n\t\t\t} : { filters: exbpts.map(exb => exb.filter) };\n\n\t\t\tconst response = await this.raw.setExceptionBreakpoints(args);\n\t\t\tif (response && response.body && response.body.breakpoints) {\n\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>();\n\t\t\t\tfor (let i = 0; i < exbpts.length; i++) {\n\t\t\t\t\tdata.set(exbpts[i].getId(), response.body.breakpoints[i]);\n\t\t\t\t}\n\n\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync dataBreakpointInfo(name: string, variablesReference?: number): Promise<{ dataId: string | null; description: string; canPersist?: boolean } | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'data breakpoints info'));\n\t\t}\n\t\tif (!this.raw.readyForBreakpoints) {\n\t\t\tthrow new Error(localize('sessionNotReadyForBreakpoints', \"Session is not ready for breakpoints\"));\n\t\t}\n\n\t\tconst response = await this.raw.dataBreakpointInfo({ name, variablesReference });\n\t\treturn response?.body;\n\t}\n\n\tasync sendDataBreakpoints(dataBreakpoints: IDataBreakpoint[]): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'data breakpoints'));\n\t\t}\n\n\t\tif (this.raw.readyForBreakpoints) {\n\t\t\tconst response = await this.raw.setDataBreakpoints({ breakpoints: dataBreakpoints });\n\t\t\tif (response && response.body) {\n\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>();\n\t\t\t\tfor (let i = 0; i < dataBreakpoints.length; i++) {\n\t\t\t\t\tdata.set(dataBreakpoints[i].getId(), response.body.breakpoints[i]);\n\t\t\t\t}\n\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync sendInstructionBreakpoints(instructionBreakpoints: IInstructionBreakpoint[]): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'instruction breakpoints'));\n\t\t}\n\n\t\tif (this.raw.readyForBreakpoints) {\n\t\t\tconst response = await this.raw.setInstructionBreakpoints({ breakpoints: instructionBreakpoints.map(ib => ib.toJSON()) });\n\t\t\tif (response && response.body) {\n\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>();\n\t\t\t\tfor (let i = 0; i < instructionBreakpoints.length; i++) {\n\t\t\t\t\tdata.set(instructionBreakpoints[i].getId(), response.body.breakpoints[i]);\n\t\t\t\t}\n\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync breakpointsLocations(uri: URI, lineNumber: number): Promise<IPosition[]> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'breakpoints locations'));\n\t\t}\n\n\t\tconst source = this.getRawSource(uri);\n\t\tconst response = await this.raw.breakpointLocations({ source, line: lineNumber });\n\t\tif (!response || !response.body || !response.body.breakpoints) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst positions = response.body.breakpoints.map(bp => ({ lineNumber: bp.line, column: bp.column || 1 }));\n\n\t\treturn distinct(positions, p => `${p.lineNumber}:${p.column}`);\n\t}\n\n\tgetDebugProtocolBreakpoint(breakpointId: string): DebugProtocol.Breakpoint | undefined {\n\t\treturn this.model.getDebugProtocolBreakpoint(breakpointId, this.getId());\n\t}\n\n\tcustomRequest(request: string, args: any): Promise<DebugProtocol.Response | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", request));\n\t\t}\n\n\t\treturn this.raw.custom(request, args);\n\t}\n\n\tstackTrace(threadId: number, startFrame: number, levels: number, token: CancellationToken): Promise<DebugProtocol.StackTraceResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'stackTrace'));\n\t\t}\n\n\t\tconst sessionToken = this.getNewCancellationToken(threadId, token);\n\t\treturn this.raw.stackTrace({ threadId, startFrame, levels }, sessionToken);\n\t}\n\n\tasync exceptionInfo(threadId: number): Promise<IExceptionInfo | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'exceptionInfo'));\n\t\t}\n\n\t\tconst response = await this.raw.exceptionInfo({ threadId });\n\t\tif (response) {\n\t\t\treturn {\n\t\t\t\tid: response.body.exceptionId,\n\t\t\t\tdescription: response.body.description,\n\t\t\t\tbreakMode: response.body.breakMode,\n\t\t\t\tdetails: response.body.details\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tscopes(frameId: number, threadId: number): Promise<DebugProtocol.ScopesResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'scopes'));\n\t\t}\n\n\t\tconst token = this.getNewCancellationToken(threadId);\n\t\treturn this.raw.scopes({ frameId }, token);\n\t}\n\n\tvariables(variablesReference: number, threadId: number | undefined, filter: 'indexed' | 'named' | undefined, start: number | undefined, count: number | undefined): Promise<DebugProtocol.VariablesResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'variables'));\n\t\t}\n\n\t\tconst token = threadId ? this.getNewCancellationToken(threadId) : undefined;\n\t\treturn this.raw.variables({ variablesReference, filter, start, count }, token);\n\t}\n\n\tevaluate(expression: string, frameId: number, context?: string): Promise<DebugProtocol.EvaluateResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'evaluate'));\n\t\t}\n\n\t\treturn this.raw.evaluate({ expression, frameId, context });\n\t}\n\n\tasync restartFrame(frameId: number, threadId: number): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'restartFrame'));\n\t\t}\n\n\t\tawait this.raw.restartFrame({ frameId }, threadId);\n\t}\n\n\tprivate setLastSteppingGranularity(threadId: number, granularity?: DebugProtocol.SteppingGranularity) {\n\t\tconst thread = this.getThread(threadId);\n\t\tif (thread) {\n\t\t\tthread.lastSteppingGranularity = granularity;\n\t\t}\n\t}\n\n\tasync next(threadId: number, granularity?: DebugProtocol.SteppingGranularity): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'next'));\n\t\t}\n\n\t\tthis.setLastSteppingGranularity(threadId, granularity);\n\t\tawait this.raw.next({ threadId, granularity });\n\t}\n\n\tasync stepIn(threadId: number, targetId?: number, granularity?: DebugProtocol.SteppingGranularity): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'stepIn'));\n\t\t}\n\n\t\tthis.setLastSteppingGranularity(threadId, granularity);\n\t\tawait this.raw.stepIn({ threadId, targetId, granularity });\n\t}\n\n\tasync stepOut(threadId: number, granularity?: DebugProtocol.SteppingGranularity): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'stepOut'));\n\t\t}\n\n\t\tthis.setLastSteppingGranularity(threadId, granularity);\n\t\tawait this.raw.stepOut({ threadId, granularity });\n\t}\n\n\tasync stepBack(threadId: number, granularity?: DebugProtocol.SteppingGranularity): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'stepBack'));\n\t\t}\n\n\t\tthis.setLastSteppingGranularity(threadId, granularity);\n\t\tawait this.raw.stepBack({ threadId, granularity });\n\t}\n\n\tasync continue(threadId: number): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'continue'));\n\t\t}\n\n\t\tawait this.raw.continue({ threadId });\n\t}\n\n\tasync reverseContinue(threadId: number): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'reverse continue'));\n\t\t}\n\n\t\tawait this.raw.reverseContinue({ threadId });\n\t}\n\n\tasync pause(threadId: number): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'pause'));\n\t\t}\n\n\t\tawait this.raw.pause({ threadId });\n\t}\n\n\tasync terminateThreads(threadIds?: number[]): Promise<void> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'terminateThreads'));\n\t\t}\n\n\t\tawait this.raw.terminateThreads({ threadIds });\n\t}\n\n\tsetVariable(variablesReference: number, name: string, value: string): Promise<DebugProtocol.SetVariableResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'setVariable'));\n\t\t}\n\n\t\treturn this.raw.setVariable({ variablesReference, name, value });\n\t}\n\n\tsetExpression(frameId: number, expression: string, value: string): Promise<DebugProtocol.SetExpressionResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'setExpression'));\n\t\t}\n\n\t\treturn this.raw.setExpression({ expression, value, frameId });\n\t}\n\n\tgotoTargets(source: DebugProtocol.Source, line: number, column?: number): Promise<DebugProtocol.GotoTargetsResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'gotoTargets'));\n\t\t}\n\n\t\treturn this.raw.gotoTargets({ source, line, column });\n\t}\n\n\tgoto(threadId: number, targetId: number): Promise<DebugProtocol.GotoResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\tthrow new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'goto'));\n\t\t}\n\n\t\treturn this.raw.goto({ threadId, targetId });\n\t}\n\n\tloadSource(resource: URI): Promise<DebugProtocol.SourceResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'loadSource')));\n\t\t}\n\n\t\tconst source = this.getSourceForUri(resource);\n\t\tlet rawSource: DebugProtocol.Source;\n\t\tif (source) {\n\t\t\trawSource = source.raw;\n\t\t} else {\n\t\t\t// create a Source\n\t\t\tconst data = Source.getEncodedDebugData(resource);\n\t\t\trawSource = { path: data.path, sourceReference: data.sourceReference };\n\t\t}\n\n\t\treturn this.raw.source({ sourceReference: rawSource.sourceReference || 0, source: rawSource });\n\t}\n\n\tasync getLoadedSources(): Promise<Source[]> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'getLoadedSources')));\n\t\t}\n\n\t\tconst response = await this.raw.loadedSources({});\n\t\tif (response && response.body && response.body.sources) {\n\t\t\treturn response.body.sources.map(src => this.getSource(src));\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tasync completions(frameId: number | undefined, threadId: number, text: string, position: Position, overwriteBefore: number, token: CancellationToken): Promise<DebugProtocol.CompletionsResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'completions')));\n\t\t}\n\t\tconst sessionCancelationToken = this.getNewCancellationToken(threadId, token);\n\n\t\treturn this.raw.completions({\n\t\t\tframeId,\n\t\t\ttext,\n\t\t\tcolumn: position.column,\n\t\t\tline: position.lineNumber,\n\t\t}, sessionCancelationToken);\n\t}\n\n\tasync stepInTargets(frameId: number): Promise<{ id: number; label: string }[] | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'stepInTargets')));\n\t\t}\n\n\t\tconst response = await this.raw.stepInTargets({ frameId });\n\t\treturn response?.body.targets;\n\t}\n\n\tasync cancel(progressId: string): Promise<DebugProtocol.CancelResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'cancel')));\n\t\t}\n\n\t\treturn this.raw.cancel({ progressId });\n\t}\n\n\tasync disassemble(memoryReference: string, offset: number, instructionOffset: number, instructionCount: number): Promise<DebugProtocol.DisassembledInstruction[] | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'disassemble')));\n\t\t}\n\n\t\tconst response = await this.raw.disassemble({ memoryReference, offset, instructionOffset, instructionCount, resolveSymbols: true });\n\t\treturn response?.body?.instructions;\n\t}\n\n\treadMemory(memoryReference: string, offset: number, count: number): Promise<DebugProtocol.ReadMemoryResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'readMemory')));\n\t\t}\n\n\t\treturn this.raw.readMemory({ count, memoryReference, offset });\n\t}\n\n\twriteMemory(memoryReference: string, offset: number, data: string, allowPartial?: boolean): Promise<DebugProtocol.WriteMemoryResponse | undefined> {\n\t\tif (!this.raw) {\n\t\t\treturn Promise.reject(new Error(localize('noDebugAdapter', \"No debugger available, can not send '{0}'\", 'disassemble')));\n\t\t}\n\n\t\treturn this.raw.writeMemory({ memoryReference, offset, allowPartial, data });\n\t}\n\n\t//---- threads\n\n\tgetThread(threadId: number): Thread | undefined {\n\t\treturn this.threads.get(threadId);\n\t}\n\n\tgetAllThreads(): IThread[] {\n\t\tconst result: IThread[] = [];\n\t\tthis.threadIds.forEach((threadId) => {\n\t\t\tconst thread = this.threads.get(threadId);\n\t\t\tif (thread) {\n\t\t\t\tresult.push(thread);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tclearThreads(removeThreads: boolean, reference: number | undefined = undefined): void {\n\t\tif (reference !== undefined && reference !== null) {\n\t\t\tconst thread = this.threads.get(reference);\n\t\t\tif (thread) {\n\t\t\t\tthread.clearCallStack();\n\t\t\t\tthread.stoppedDetails = undefined;\n\t\t\t\tthread.stopped = false;\n\n\t\t\t\tif (removeThreads) {\n\t\t\t\t\tthis.threads.delete(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.threads.forEach(thread => {\n\t\t\t\tthread.clearCallStack();\n\t\t\t\tthread.stoppedDetails = undefined;\n\t\t\t\tthread.stopped = false;\n\t\t\t});\n\n\t\t\tif (removeThreads) {\n\t\t\t\tthis.threads.clear();\n\t\t\t\tthis.threadIds = [];\n\t\t\t\tExpressionContainer.allValues.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetStoppedDetails(): IRawStoppedDetails | undefined {\n\t\treturn this.stoppedDetails.length >= 1 ? this.stoppedDetails[0] : undefined;\n\t}\n\n\trawUpdate(data: IRawModelUpdate): void {\n\t\tthis.threadIds = [];\n\t\tdata.threads.forEach(thread => {\n\t\t\tthis.threadIds.push(thread.id);\n\t\t\tif (!this.threads.has(thread.id)) {\n\t\t\t\t// A new thread came in, initialize it.\n\t\t\t\tthis.threads.set(thread.id, new Thread(this, thread.name, thread.id));\n\t\t\t} else if (thread.name) {\n\t\t\t\t// Just the thread name got updated #18244\n\t\t\t\tconst oldThread = this.threads.get(thread.id);\n\t\t\t\tif (oldThread) {\n\t\t\t\t\toldThread.name = thread.name;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.threads.forEach(t => {\n\t\t\t// Remove all old threads which are no longer part of the update #75980\n\t\t\tif (this.threadIds.indexOf(t.threadId) === -1) {\n\t\t\t\tthis.threads.delete(t.threadId);\n\t\t\t}\n\t\t});\n\n\t\tconst stoppedDetails = data.stoppedDetails;\n\t\tif (stoppedDetails) {\n\t\t\t// Set the availability of the threads' callstacks depending on\n\t\t\t// whether the thread is stopped or not\n\t\t\tif (stoppedDetails.allThreadsStopped) {\n\t\t\t\tthis.threads.forEach(thread => {\n\t\t\t\t\tthread.stoppedDetails = thread.threadId === stoppedDetails.threadId ? stoppedDetails : { reason: thread.stoppedDetails?.reason };\n\t\t\t\t\tthread.stopped = true;\n\t\t\t\t\tthread.clearCallStack();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst thread = typeof stoppedDetails.threadId === 'number' ? this.threads.get(stoppedDetails.threadId) : undefined;\n\t\t\t\tif (thread) {\n\t\t\t\t\t// One thread is stopped, only update that thread.\n\t\t\t\t\tthread.stoppedDetails = stoppedDetails;\n\t\t\t\t\tthread.clearCallStack();\n\t\t\t\t\tthread.stopped = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async fetchThreads(stoppedDetails?: IRawStoppedDetails): Promise<void> {\n\t\tif (this.raw) {\n\t\t\tconst response = await this.raw.threads();\n\t\t\tif (response && response.body && response.body.threads) {\n\t\t\t\tthis.model.rawUpdate({\n\t\t\t\t\tsessionId: this.getId(),\n\t\t\t\t\tthreads: response.body.threads,\n\t\t\t\t\tstoppedDetails\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeForTest(raw: RawDebugSession): void {\n\t\tthis.raw = raw;\n\t\tthis.registerListeners();\n\t}\n\n\t//---- private\n\n\tprivate registerListeners(): void {\n\t\tif (!this.raw) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rawListeners.add(this.raw.onDidInitialize(async () => {\n\t\t\taria.status(localize('debuggingStarted', \"Debugging started.\"));\n\t\t\tconst sendConfigurationDone = async () => {\n\t\t\t\tif (this.raw && this.raw.capabilities.supportsConfigurationDoneRequest) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.raw.configurationDone();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// Disconnect the debug session on configuration done error #10596\n\t\t\t\t\t\tthis.notificationService.error(e);\n\t\t\t\t\t\tthis.raw?.disconnect({});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t};\n\n\t\t\t// Send all breakpoints\n\t\t\ttry {\n\t\t\t\tawait this.debugService.sendAllBreakpoints(this);\n\t\t\t} finally {\n\t\t\t\tawait sendConfigurationDone();\n\t\t\t\tawait this.fetchThreads();\n\t\t\t}\n\t\t}));\n\n\t\tconst statusQueue = new Queue<void>();\n\t\tthis.rawListeners.add(this.raw.onDidStop(async event => {\n\t\t\tstatusQueue.queue(async () => {\n\t\t\t\tthis.passFocusScheduler.cancel();\n\t\t\t\tthis.stoppedDetails.push(event.body);\n\t\t\t\tawait this.fetchThreads(event.body);\n\t\t\t\t// If the focus for the current session is on a non-existent thread, clear the focus.\n\t\t\t\tconst focusedThread = this.debugService.getViewModel().focusedThread;\n\t\t\t\tconst focusedThreadDoesNotExist = focusedThread !== undefined && focusedThread.session === this && !this.threads.has(focusedThread.threadId);\n\t\t\t\tif (focusedThreadDoesNotExist) {\n\t\t\t\t\tthis.debugService.focusStackFrame(undefined, undefined);\n\t\t\t\t}\n\t\t\t\tconst thread = typeof event.body.threadId === 'number' ? this.getThread(event.body.threadId) : undefined;\n\t\t\t\tif (thread) {\n\t\t\t\t\t// Call fetch call stack twice, the first only return the top stack frame.\n\t\t\t\t\t// Second retrieves the rest of the call stack. For performance reasons #25605\n\t\t\t\t\tconst promises = this.model.refreshTopOfCallstack(<Thread>thread);\n\t\t\t\t\tconst focus = async () => {\n\t\t\t\t\t\tif (focusedThreadDoesNotExist || (!event.body.preserveFocusHint && thread.getCallStack().length)) {\n\t\t\t\t\t\t\tconst focusedStackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\t\t\t\t\t\tif (!focusedStackFrame || focusedStackFrame.thread.session === this) {\n\t\t\t\t\t\t\t\t// Only take focus if nothing is focused, or if the focus is already on the current session\n\t\t\t\t\t\t\t\tconst preserveFocus = !this.configurationService.getValue<IDebugConfiguration>('debug').focusEditorOnBreak;\n\t\t\t\t\t\t\t\tawait this.debugService.focusStackFrame(undefined, thread, undefined, { preserveFocus });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (thread.stoppedDetails) {\n\t\t\t\t\t\t\t\tif (thread.stoppedDetails.reason === 'breakpoint' && this.configurationService.getValue<IDebugConfiguration>('debug').openDebug === 'openOnDebugBreak' && !this.suppressDebugView) {\n\t\t\t\t\t\t\t\t\tawait this.paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (this.configurationService.getValue<IDebugConfiguration>('debug').focusWindowOnBreak && !this.workbenchEnvironmentService.extensionTestsLocationURI) {\n\t\t\t\t\t\t\t\t\tawait this.hostService.focus({ force: true /* Application may not be active */ });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tawait promises.topCallStack;\n\t\t\t\t\tfocus();\n\t\t\t\t\tawait promises.wholeCallStack;\n\t\t\t\t\tconst focusedStackFrame = this.debugService.getViewModel().focusedStackFrame;\n\t\t\t\t\tif (!focusedStackFrame || !focusedStackFrame.source || focusedStackFrame.source.presentationHint === 'deemphasize' || focusedStackFrame.presentationHint === 'deemphasize') {\n\t\t\t\t\t\t// The top stack frame can be deemphesized so try to focus again #68616\n\t\t\t\t\t\tfocus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._onDidChangeState.fire();\n\t\t\t});\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidThread(event => {\n\t\t\tstatusQueue.queue(async () => {\n\t\t\t\tif (event.body.reason === 'started') {\n\t\t\t\t\t// debounce to reduce threadsRequest frequency and improve performance\n\t\t\t\t\tif (!this.fetchThreadsScheduler) {\n\t\t\t\t\t\tthis.fetchThreadsScheduler = new RunOnceScheduler(() => {\n\t\t\t\t\t\t\tthis.fetchThreads();\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\tthis.rawListeners.add(this.fetchThreadsScheduler);\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.fetchThreadsScheduler.isScheduled()) {\n\t\t\t\t\t\tthis.fetchThreadsScheduler.schedule();\n\t\t\t\t\t}\n\t\t\t\t} else if (event.body.reason === 'exited') {\n\t\t\t\t\tthis.model.clearThreads(this.getId(), true, event.body.threadId);\n\t\t\t\t\tconst viewModel = this.debugService.getViewModel();\n\t\t\t\t\tconst focusedThread = viewModel.focusedThread;\n\t\t\t\t\tthis.passFocusScheduler.cancel();\n\t\t\t\t\tif (focusedThread && event.body.threadId === focusedThread.threadId) {\n\t\t\t\t\t\t// De-focus the thread in case it was focused\n\t\t\t\t\t\tthis.debugService.focusStackFrame(undefined, undefined, viewModel.focusedSession, { explicit: false });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidTerminateDebugee(async event => {\n\t\t\taria.status(localize('debuggingStopped', \"Debugging stopped.\"));\n\t\t\tif (event.body && event.body.restart) {\n\t\t\t\tawait this.debugService.restartSession(this, event.body.restart);\n\t\t\t} else if (this.raw) {\n\t\t\t\tawait this.raw.disconnect({ terminateDebuggee: false });\n\t\t\t}\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidContinued(event => {\n\t\t\tstatusQueue.queue(async () => {\n\t\t\t\tconst threadId = event.body.allThreadsContinued !== false ? undefined : event.body.threadId;\n\t\t\t\tif (typeof threadId === 'number') {\n\t\t\t\t\tthis.stoppedDetails = this.stoppedDetails.filter(sd => sd.threadId !== threadId);\n\t\t\t\t\tconst tokens = this.cancellationMap.get(threadId);\n\t\t\t\t\tthis.cancellationMap.delete(threadId);\n\t\t\t\t\ttokens?.forEach(t => t.dispose(true));\n\t\t\t\t} else {\n\t\t\t\t\tthis.stoppedDetails = [];\n\t\t\t\t\tthis.cancelAllRequests();\n\t\t\t\t}\n\t\t\t\tthis.lastContinuedThreadId = threadId;\n\t\t\t\t// We need to pass focus to other sessions / threads with a timeout in case a quick stop event occurs #130321\n\t\t\t\tthis.passFocusScheduler.schedule();\n\t\t\t\tthis.model.clearThreads(this.getId(), false, threadId);\n\t\t\t\tthis._onDidChangeState.fire();\n\t\t\t});\n\t\t}));\n\n\t\tconst outputQueue = new Queue<void>();\n\t\tthis.rawListeners.add(this.raw.onDidOutput(async event => {\n\t\t\tconst outputSeverity = event.body.category === 'stderr' ? Severity.Error : event.body.category === 'console' ? Severity.Warning : Severity.Info;\n\n\t\t\t// When a variables event is received, execute immediately to obtain the variables value #126967\n\t\t\tif (event.body.variablesReference) {\n\t\t\t\tconst source = event.body.source && event.body.line ? {\n\t\t\t\t\tlineNumber: event.body.line,\n\t\t\t\t\tcolumn: event.body.column ? event.body.column : 1,\n\t\t\t\t\tsource: this.getSource(event.body.source)\n\t\t\t\t} : undefined;\n\t\t\t\tconst container = new ExpressionContainer(this, undefined, event.body.variablesReference, generateUuid());\n\t\t\t\tconst children = container.getChildren();\n\t\t\t\t// we should put appendToRepl into queue to make sure the logs to be displayed in correct order\n\t\t\t\t// see https://github.com/microsoft/vscode/issues/126967#issuecomment-874954269\n\t\t\t\toutputQueue.queue(async () => {\n\t\t\t\t\tconst resolved = await children;\n\t\t\t\t\t// For single logged variables, try to use the output if we can so\n\t\t\t\t\t// present a better (i.e. ANSI-aware) representation of the output\n\t\t\t\t\tif (resolved.length === 1) {\n\t\t\t\t\t\tthis.appendToRepl({ output: event.body.output, expression: resolved[0], sev: outputSeverity, source }, event.body.category === 'important');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tresolved.forEach((child) => {\n\t\t\t\t\t\t// Since we can not display multiple trees in a row, we are displaying these variables one after the other (ignoring their names)\n\t\t\t\t\t\t(<any>child).name = null;\n\t\t\t\t\t\tthis.appendToRepl({ output: '', expression: child, sev: outputSeverity, source }, event.body.category === 'important');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toutputQueue.queue(async () => {\n\t\t\t\tif (!event.body || !this.raw) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (event.body.category === 'telemetry') {\n\t\t\t\t\t// only log telemetry events from debug adapter if the debug extension provided the telemetry key\n\t\t\t\t\t// and the user opted in telemetry\n\t\t\t\t\tconst telemetryEndpoint = this.raw.dbgr.getCustomTelemetryEndpoint();\n\t\t\t\t\tif (telemetryEndpoint && this.telemetryService.telemetryLevel !== TelemetryLevel.NONE) {\n\t\t\t\t\t\t// __GDPR__TODO__ We're sending events in the name of the debug extension and we can not ensure that those are declared correctly.\n\t\t\t\t\t\tlet data = event.body.data;\n\t\t\t\t\t\tif (!telemetryEndpoint.sendErrorTelemetry && event.body.data) {\n\t\t\t\t\t\t\tdata = filterExceptionsFromTelemetry(event.body.data);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.customEndpointTelemetryService.publicLog(telemetryEndpoint, event.body.output, data);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Make sure to append output in the correct order by properly waiting on preivous promises #33822\n\t\t\t\tconst source = event.body.source && event.body.line ? {\n\t\t\t\t\tlineNumber: event.body.line,\n\t\t\t\t\tcolumn: event.body.column ? event.body.column : 1,\n\t\t\t\t\tsource: this.getSource(event.body.source)\n\t\t\t\t} : undefined;\n\n\t\t\t\tif (event.body.group === 'start' || event.body.group === 'startCollapsed') {\n\t\t\t\t\tconst expanded = event.body.group === 'start';\n\t\t\t\t\tthis.repl.startGroup(event.body.output || '', expanded, source);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (event.body.group === 'end') {\n\t\t\t\t\tthis.repl.endGroup();\n\t\t\t\t\tif (!event.body.output) {\n\t\t\t\t\t\t// Only return if the end event does not have additional output in it\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof event.body.output === 'string') {\n\t\t\t\t\tthis.appendToRepl({ output: event.body.output, sev: outputSeverity, source }, event.body.category === 'important');\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidBreakpoint(event => {\n\t\t\tconst id = event.body && event.body.breakpoint ? event.body.breakpoint.id : undefined;\n\t\t\tconst breakpoint = this.model.getBreakpoints().find(bp => bp.getIdFromAdapter(this.getId()) === id);\n\t\t\tconst functionBreakpoint = this.model.getFunctionBreakpoints().find(bp => bp.getIdFromAdapter(this.getId()) === id);\n\t\t\tconst dataBreakpoint = this.model.getDataBreakpoints().find(dbp => dbp.getIdFromAdapter(this.getId()) === id);\n\t\t\tconst exceptionBreakpoint = this.model.getExceptionBreakpoints().find(excbp => excbp.getIdFromAdapter(this.getId()) === id);\n\n\t\t\tif (event.body.reason === 'new' && event.body.breakpoint.source && event.body.breakpoint.line) {\n\t\t\t\tconst source = this.getSource(event.body.breakpoint.source);\n\t\t\t\tconst bps = this.model.addBreakpoints(source.uri, [{\n\t\t\t\t\tcolumn: event.body.breakpoint.column,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tlineNumber: event.body.breakpoint.line,\n\t\t\t\t}], false);\n\t\t\t\tif (bps.length === 1) {\n\t\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>([[bps[0].getId(), event.body.breakpoint]]);\n\t\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (event.body.reason === 'removed') {\n\t\t\t\tif (breakpoint) {\n\t\t\t\t\tthis.model.removeBreakpoints([breakpoint]);\n\t\t\t\t}\n\t\t\t\tif (functionBreakpoint) {\n\t\t\t\t\tthis.model.removeFunctionBreakpoints(functionBreakpoint.getId());\n\t\t\t\t}\n\t\t\t\tif (dataBreakpoint) {\n\t\t\t\t\tthis.model.removeDataBreakpoints(dataBreakpoint.getId());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (event.body.reason === 'changed') {\n\t\t\t\tif (breakpoint) {\n\t\t\t\t\tif (!breakpoint.column) {\n\t\t\t\t\t\tevent.body.breakpoint.column = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>([[breakpoint.getId(), event.body.breakpoint]]);\n\t\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t\t}\n\t\t\t\tif (functionBreakpoint) {\n\t\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>([[functionBreakpoint.getId(), event.body.breakpoint]]);\n\t\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t\t}\n\t\t\t\tif (dataBreakpoint) {\n\t\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>([[dataBreakpoint.getId(), event.body.breakpoint]]);\n\t\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t\t}\n\t\t\t\tif (exceptionBreakpoint) {\n\t\t\t\t\tconst data = new Map<string, DebugProtocol.Breakpoint>([[exceptionBreakpoint.getId(), event.body.breakpoint]]);\n\t\t\t\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, data);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidLoadedSource(event => {\n\t\t\tthis._onDidLoadedSource.fire({\n\t\t\t\treason: event.body.reason,\n\t\t\t\tsource: this.getSource(event.body.source)\n\t\t\t});\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidCustomEvent(event => {\n\t\t\tthis._onDidCustomEvent.fire(event);\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidProgressStart(event => {\n\t\t\tthis._onDidProgressStart.fire(event);\n\t\t}));\n\t\tthis.rawListeners.add(this.raw.onDidProgressUpdate(event => {\n\t\t\tthis._onDidProgressUpdate.fire(event);\n\t\t}));\n\t\tthis.rawListeners.add(this.raw.onDidProgressEnd(event => {\n\t\t\tthis._onDidProgressEnd.fire(event);\n\t\t}));\n\t\tthis.rawListeners.add(this.raw.onDidInvalidateMemory(event => {\n\t\t\tthis._onDidInvalidMemory.fire(event);\n\t\t}));\n\t\tthis.rawListeners.add(this.raw.onDidInvalidated(async event => {\n\t\t\tif (!(event.body.areas && event.body.areas.length === 1 && (event.body.areas[0] === 'variables' || event.body.areas[0] === 'watch'))) {\n\t\t\t\t// If invalidated event only requires to update variables or watch, do that, otherwise refatch threads https://github.com/microsoft/vscode/issues/106745\n\t\t\t\tthis.cancelAllRequests();\n\t\t\t\tthis.model.clearThreads(this.getId(), true);\n\t\t\t\tawait this.fetchThreads(this.getStoppedDetails());\n\t\t\t}\n\n\t\t\tconst viewModel = this.debugService.getViewModel();\n\t\t\tif (viewModel.focusedSession === this) {\n\t\t\t\tviewModel.updateViews();\n\t\t\t}\n\t\t}));\n\n\t\tthis.rawListeners.add(this.raw.onDidExitAdapter(event => this.onDidExitAdapter(event)));\n\t}\n\n\tprivate onDidExitAdapter(event?: AdapterEndEvent): void {\n\t\tthis.initialized = true;\n\t\tthis.model.setBreakpointSessionData(this.getId(), this.capabilities, undefined);\n\t\tthis.shutdown();\n\t\tthis._onDidEndAdapter.fire(event);\n\t}\n\n\t// Disconnects and clears state. Session can be initialized again for a new connection.\n\tprivate shutdown(): void {\n\t\tthis.rawListeners.clear();\n\t\tif (this.raw) {\n\t\t\t// Send out disconnect and immediatly dispose (do not wait for response) #127418\n\t\t\tthis.raw.disconnect({});\n\t\t\tthis.raw.dispose();\n\t\t\tthis.raw = undefined;\n\t\t}\n\t\tthis.fetchThreadsScheduler?.dispose();\n\t\tthis.fetchThreadsScheduler = undefined;\n\t\tthis.passFocusScheduler.cancel();\n\t\tthis.passFocusScheduler.dispose();\n\t\tthis.model.clearThreads(this.getId(), true);\n\t\tthis._onDidChangeState.fire();\n\t}\n\n\tpublic dispose() {\n\t\tthis.cancelAllRequests();\n\t\tthis.rawListeners.dispose();\n\t}\n\n\t//---- sources\n\n\tgetSourceForUri(uri: URI): Source | undefined {\n\t\treturn this.sources.get(this.uriIdentityService.asCanonicalUri(uri).toString());\n\t}\n\n\tgetSource(raw?: DebugProtocol.Source): Source {\n\t\tlet source = new Source(raw, this.getId(), this.uriIdentityService, this.logService);\n\t\tconst uriKey = source.uri.toString();\n\t\tconst found = this.sources.get(uriKey);\n\t\tif (found) {\n\t\t\tsource = found;\n\t\t\t// merge attributes of new into existing\n\t\t\tsource.raw = mixin(source.raw, raw);\n\t\t\tif (source.raw && raw) {\n\t\t\t\t// Always take the latest presentation hint from adapter #42139\n\t\t\t\tsource.raw.presentationHint = raw.presentationHint;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sources.set(uriKey, source);\n\t\t}\n\n\t\treturn source;\n\t}\n\n\tprivate getRawSource(uri: URI): DebugProtocol.Source {\n\t\tconst source = this.getSourceForUri(uri);\n\t\tif (source) {\n\t\t\treturn source.raw;\n\t\t} else {\n\t\t\tconst data = Source.getEncodedDebugData(uri);\n\t\t\treturn { name: data.name, path: data.path, sourceReference: data.sourceReference };\n\t\t}\n\t}\n\n\tprivate getNewCancellationToken(threadId: number, token?: CancellationToken): CancellationToken {\n\t\tconst tokenSource = new CancellationTokenSource(token);\n\t\tconst tokens = this.cancellationMap.get(threadId) || [];\n\t\ttokens.push(tokenSource);\n\t\tthis.cancellationMap.set(threadId, tokens);\n\n\t\treturn tokenSource.token;\n\t}\n\n\tprivate cancelAllRequests(): void {\n\t\tthis.cancellationMap.forEach(tokens => tokens.forEach(t => t.dispose(true)));\n\t\tthis.cancellationMap.clear();\n\t}\n\n\t// REPL\n\n\tgetReplElements(): IReplElement[] {\n\t\treturn this.repl.getReplElements();\n\t}\n\n\thasSeparateRepl(): boolean {\n\t\treturn !this.parentSession || this._options.repl !== 'mergeWithParent';\n\t}\n\n\tremoveReplExpressions(): void {\n\t\tthis.repl.removeReplExpressions();\n\t}\n\n\tasync addReplExpression(stackFrame: IStackFrame | undefined, name: string): Promise<void> {\n\t\tawait this.repl.addReplExpression(this, stackFrame, name);\n\t\t// Evaluate all watch expressions and fetch variables again since repl evaluation might have changed some.\n\t\tthis.debugService.getViewModel().updateViews();\n\t}\n\n\tappendToRepl(data: INewReplElementData, isImportant?: boolean): void {\n\t\tthis.repl.appendToRepl(this, data);\n\t\tif (isImportant) {\n\t\t\tthis.notificationService.notify({ message: data.output.toString(), severity: data.sev, source: this.name });\n\t\t}\n\t}\n}\n"]}