{"version":3,"sources":["file:///workspace/appflow/src/vs/workbench/contrib/terminalContrib/links/browser/links.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAcnF,QAAA,IAAI,GAA2B,IAAA,mBAAG,EAA2C,6BAA6B,CAAC,CAAC;IAiGzH,IAAkB,uBA4BjB;IA5BD,WAAkB,uBAAuB;QACxC;;WAEG;QACH,kDAAuB,CAAA;QAEvB;;;WAGG;QACH,sFAA2D,CAAA;QAE3D;;;WAGG;QACH,4EAAiD,CAAA;QAEjD;;;WAGG;QACH,4CAAiB,CAAA;QAEjB;;WAEG;QACH,sCAAW,CAAA;IACZ,CAAC,EA5BiB,uBAAuB,uCAAvB,uBAAuB,QA4BxC","file":"links.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IBufferLine, IBufferRange, Terminal } from 'xterm';\nimport { URI } from 'vs/base/common/uri';\nimport { IHoverAction } from 'vs/workbench/services/hover/browser/hover';\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { ITerminalProcessManager } from 'vs/workbench/contrib/terminal/common/terminal';\nimport { IParsedLink } from 'vs/workbench/contrib/terminalContrib/links/browser/terminalLinkParsing';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { ITerminalExternalLinkProvider } from 'vs/workbench/contrib/terminal/browser/terminal';\nimport { Event } from 'vs/base/common/event';\nimport { ITerminalBackend } from 'vs/platform/terminal/common/terminal';\nimport { ITextEditorSelection } from 'vs/platform/editor/common/editor';\n\nexport const ITerminalLinkProviderService = createDecorator<ITerminalLinkProviderService>('terminalLinkProviderService');\nexport interface ITerminalLinkProviderService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly linkProviders: ReadonlySet<ITerminalExternalLinkProvider>;\n\n\treadonly onDidAddLinkProvider: Event<ITerminalExternalLinkProvider>;\n\treadonly onDidRemoveLinkProvider: Event<ITerminalExternalLinkProvider>;\n\n\t// TODO: Currently only a single link provider is supported; the one registered by the ext host\n\tregisterLinkProvider(provider: ITerminalExternalLinkProvider): IDisposable;\n}\n\nexport interface ITerminalLinkResolver {\n\tresolveLink(processManager: Pick<ITerminalProcessManager, 'initialCwd' | 'os' | 'remoteAuthority' | 'userHome'> & { backend?: Pick<ITerminalBackend, 'getWslPath'> }, link: string, uri?: URI): Promise<ResolvedLink>;\n}\n\n/**\n * A link detector can search for and return links within the xterm.js buffer. A single link\n * detector can return multiple links of differing types.\n */\nexport interface ITerminalLinkDetector {\n\t/**\n\t * The xterm.js instance this detector belongs to.\n\t */\n\treadonly xterm: Terminal;\n\n\t/**\n\t * The maximum link length possible for this detector, this puts a cap on how much of a wrapped\n\t * line to consider to prevent performance problems.\n\t */\n\treadonly maxLinkLength: number;\n\n\t/**\n\t * Detects links within the _wrapped_ line range provided and returns them as an array.\n\t *\n\t * @param lines The individual buffer lines that make up the wrapped line.\n\t * @param startLine The start of the wrapped line. This _will not_ be validated that it is\n\t * indeed the start of a wrapped line.\n\t * @param endLine The end of the wrapped line.  This _will not_ be validated that it is indeed\n\t * the end of a wrapped line.\n\t */\n\tdetect(lines: IBufferLine[], startLine: number, endLine: number): ITerminalSimpleLink[] | Promise<ITerminalSimpleLink[]>;\n}\n\nexport interface ITerminalSimpleLink {\n\t/**\n\t * The text of the link.\n\t */\n\ttext: string;\n\n\tparsedLink?: IParsedLink;\n\n\t/**\n\t * The buffer range of the link.\n\t */\n\treadonly bufferRange: IBufferRange;\n\n\t/**\n\t * The type of link, which determines how it is handled when activated.\n\t */\n\treadonly type: TerminalLinkType;\n\n\t/**\n\t * The URI of the link if it has been resolved.\n\t */\n\turi?: URI;\n\n\t/**\n\t * The location or selection range of the link.\n\t */\n\tselection?: ITextEditorSelection;\n\n\t/**\n\t * Whether to trim a trailing colon at the end of a path.\n\t */\n\tdisableTrimColon?: boolean;\n\n\t/**\n\t * A hover label to override the default for the type.\n\t */\n\tlabel?: string;\n\n\t/**\n\t * An optional set of actions to show in the hover's status bar.\n\t */\n\tactions?: IHoverAction[];\n\n\t/**\n\t * An optional method to call when the link is activated. This should be used when there is are\n\t * no registered opener for this link type.\n\t */\n\tactivate?(text: string): void;\n}\n\nexport type TerminalLinkType = TerminalBuiltinLinkType | ITerminalExternalLinkType;\n\nexport const enum TerminalBuiltinLinkType {\n\t/**\n\t * The link is validated to be a file on the file system and will open an editor.\n\t */\n\tLocalFile = 'LocalFile',\n\n\t/**\n\t * The link is validated to be a folder on the file system and is outside the workspace. It will\n\t * reveal the folder within the explorer.\n\t */\n\tLocalFolderOutsideWorkspace = 'LocalFolderOutsideWorkspace',\n\n\t/**\n\t * The link is validated to be a folder on the file system and is within the workspace and will\n\t * reveal the folder within the explorer.\n\t */\n\tLocalFolderInWorkspace = 'LocalFolderInWorkspace',\n\n\t/**\n\t * A low confidence link which will search for the file in the workspace. If there is a single\n\t * match, it will open the file; otherwise, it will present the matches in a quick pick.\n\t */\n\tSearch = 'Search',\n\n\t/**\n\t * A link whose text is a valid URI.\n\t */\n\tUrl = 'Url'\n}\n\nexport interface ITerminalExternalLinkType {\n\tid: string;\n}\n\nexport interface ITerminalLinkOpener {\n\topen(link: ITerminalSimpleLink): Promise<void>;\n}\n\nexport type ResolvedLink = IResolvedValidLink | null;\n\nexport interface IResolvedValidLink {\n\turi: URI;\n\tlink: string;\n\tisDirectory: boolean;\n}\n\nexport type OmitFirstArg<F> = F extends (x: any, ...args: infer P) => infer R ? (...args: P) => R : never;\n"]}