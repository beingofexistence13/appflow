{"version":3,"sources":["file:///workspace/appflow/src/vs/platform/jsonschemas/common/jsonContributionRegistry.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;IAMnF,QAAA,GAAG,GAAU;QACzB,gBAAgB,EAAE,yBAAyB;KAC3C,CAAC;IA8BF,SAAS,WAAW,CAAC,EAAU;QAC9B,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;YACtD,OAAO,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SACtC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAID,MAAM,wBAAwB;QAO7B;YAHiB,MAAC,GAAoB,IAAI,WAAG,EAAc,CAAC;YACnD,sBAAiB,GAAkB,IAAI,CAAC,CAAC,CAAkB,KAAK,CAAC;YAGzE,IAAI,CAAC,CAAC,GAAa,EAAE,CAAC;QACvB,CAAC;QAEM,cAAc,CAAC,GAAW,EAAE,uBAAoC;YACtE,IAAI,CAAC,CAAC,CAAW,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,uBAAuB,CAAC;YAC7D,IAAI,CAAC,CAAC,CAAkB,IAAI,CAAC,GAAG,CAAC,CAAC;QACnC,CAAC;QAEM,mBAAmB,CAAC,GAAW;YACrC,IAAI,CAAC,CAAC,CAAkB,IAAI,CAAC,GAAG,CAAC,CAAC;QACnC,CAAC;QAEM,sBAAsB;YAC5B,OAAO;gBACN,OAAO,EAAE,IAAI,CAAC,CAAC;aACf,CAAC;QACH,CAAC;KAED;IAED,MAAM,wBAAwB,GAAG,IAAI,wBAAwB,EAAE,CAAC;IAChE,QAAQ,CAAC,GAAG,CAAM,GAAG,CAAC,WAAG,CAAQ,gBAAgB,EAAE,wBAAwB,CAAC,CAAC","file":"jsonContributionRegistry.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IJSONSchema } from 'vs/base/common/jsonSchema';\nimport * as platform from 'vs/platform/registry/common/platform';\n\nexport const Extensions = {\n\tJSONContribution: 'base.contributions.json'\n};\n\nexport interface ISchemaContributions {\n\tschemas: { [id: string]: IJSONSchema };\n}\n\nexport interface IJSONContributionRegistry {\n\n\treadonly onDidChangeSchema: Event<string>;\n\n\t/**\n\t * Register a schema to the registry.\n\t */\n\tregisterSchema(uri: string, unresolvedSchemaContent: IJSONSchema): void;\n\n\n\t/**\n\t * Notifies all listeners that the content of the given schema has changed.\n\t * @param uri The id of the schema\n\t */\n\tnotifySchemaChanged(uri: string): void;\n\n\t/**\n\t * Get all schemas\n\t */\n\tgetSchemaContributions(): ISchemaContributions;\n}\n\n\n\nfunction normalizeId(id: string) {\n\tif (id.length > 0 && id.charAt(id.length - 1) === '#') {\n\t\treturn id.substring(0, id.length - 1);\n\t}\n\treturn id;\n}\n\n\n\nclass JSONContributionRegistry implements IJSONContributionRegistry {\n\n\tprivate schemasById: { [id: string]: IJSONSchema };\n\n\tprivate readonly _onDidChangeSchema = new Emitter<string>();\n\treadonly onDidChangeSchema: Event<string> = this._onDidChangeSchema.event;\n\n\tconstructor() {\n\t\tthis.schemasById = {};\n\t}\n\n\tpublic registerSchema(uri: string, unresolvedSchemaContent: IJSONSchema): void {\n\t\tthis.schemasById[normalizeId(uri)] = unresolvedSchemaContent;\n\t\tthis._onDidChangeSchema.fire(uri);\n\t}\n\n\tpublic notifySchemaChanged(uri: string): void {\n\t\tthis._onDidChangeSchema.fire(uri);\n\t}\n\n\tpublic getSchemaContributions(): ISchemaContributions {\n\t\treturn {\n\t\t\tschemas: this.schemasById,\n\t\t};\n\t}\n\n}\n\nconst jsonContributionRegistry = new JSONContributionRegistry();\nplatform.Registry.add(Extensions.JSONContribution, jsonContributionRegistry);\n"]}