{"version":3,"sources":["vs/workbench/contrib/bulkEdit/browser/preview/bulkEditTree.ts"],"names":[],"mappings":"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","file":"bulkEditTree.js","sourceRoot":"file:///workspace/appflow/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAsyncDataSource, ITreeRenderer, ITreeNode, ITreeSorter } from 'vs/base/browser/ui/tree/tree';\nimport { ITextModelService } from 'vs/editor/common/services/resolverService';\nimport { FuzzyScore, createMatches } from 'vs/base/common/filters';\nimport { IResourceLabel, ResourceLabels } from 'vs/workbench/browser/labels';\nimport { HighlightedLabel, IHighlight } from 'vs/base/browser/ui/highlightedlabel/highlightedLabel';\nimport { IIdentityProvider, IListVirtualDelegate, IKeyboardNavigationLabelProvider } from 'vs/base/browser/ui/list/list';\nimport { Range } from 'vs/editor/common/core/range';\nimport * as dom from 'vs/base/browser/dom';\nimport { ITextModel } from 'vs/editor/common/model';\nimport { IDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { TextModel } from 'vs/editor/common/model/textModel';\nimport { BulkFileOperations, BulkFileOperation, BulkFileOperationType, BulkTextEdit, BulkCategory } from 'vs/workbench/contrib/bulkEdit/browser/preview/bulkEditPreview';\nimport { FileKind } from 'vs/platform/files/common/files';\nimport { localize } from 'vs/nls';\nimport { ILabelService } from 'vs/platform/label/common/label';\nimport type { IListAccessibilityProvider } from 'vs/base/browser/ui/list/listWidget';\nimport { IconLabel } from 'vs/base/browser/ui/iconLabel/iconLabel';\nimport { basename } from 'vs/base/common/resources';\nimport { IThemeService } from 'vs/platform/theme/common/themeService';\nimport { ThemeIcon } from 'vs/base/common/themables';\nimport { compare } from 'vs/base/common/strings';\nimport { URI } from 'vs/base/common/uri';\nimport { IUndoRedoService } from 'vs/platform/undoRedo/common/undoRedo';\nimport { ResourceFileEdit } from 'vs/editor/browser/services/bulkEditService';\nimport { ILanguageConfigurationService } from 'vs/editor/common/languages/languageConfigurationRegistry';\nimport { ILanguageService } from 'vs/editor/common/languages/language';\nimport { PLAINTEXT_LANGUAGE_ID } from 'vs/editor/common/languages/modesRegistry';\nimport { SnippetParser } from 'vs/editor/contrib/snippet/browser/snippetParser';\nimport { AriaRole } from 'vs/base/browser/ui/aria/aria';\n\n// --- VIEW MODEL\n\nexport interface ICheckable {\n\tisChecked(): boolean;\n\tsetChecked(value: boolean): void;\n}\n\nexport class CategoryElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: BulkFileOperations,\n\t\treadonly category: BulkCategory\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent;\n\t\tlet checked = true;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class FileElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: CategoryElement | BulkFileOperations,\n\t\treadonly edit: BulkFileOperation\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\n\t\tlet checked = true;\n\n\t\t// only text edit children -> reflect children state\n\t\tif (this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tchecked = !this.edit.textEdits.every(edit => !model.checked.isChecked(edit.textEdit));\n\t\t}\n\n\t\t// multiple file edits -> reflect single state\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\n\t\t// multiple categories and text change -> read all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t}\n\n\t\t// multiple categories and file change -> update all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type !== BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tconst model = this.parent.parent;\n\t\t\tlet checked = true;\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !checked;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class TextEditElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: FileElement,\n\t\treadonly idx: number,\n\t\treadonly edit: BulkTextEdit,\n\t\treadonly prefix: string, readonly selecting: string, readonly inserting: string, readonly suffix: string\n\t) { }\n\n\tisChecked(): boolean {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\t\treturn model.checked.isChecked(this.edit.textEdit);\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\n\t\t// check/uncheck this element\n\t\tmodel.checked.updateChecked(this.edit.textEdit, value);\n\n\t\t// make sure parent is checked when this element is checked...\n\t\tif (value) {\n\t\t\tfor (const edit of this.parent.edit.originalEdits.values()) {\n\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t(<BulkFileOperations>model).checked.updateChecked(edit, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.parent.isDisabled();\n\t}\n}\n\nexport type BulkEditElement = CategoryElement | FileElement | TextEditElement;\n\n// --- DATA SOURCE\n\nexport class BulkEditDataSource implements IAsyncDataSource<BulkFileOperations, BulkEditElement> {\n\n\tpublic groupByFile: boolean = true;\n\n\tconstructor(\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@ILanguageConfigurationService private readonly _languageConfigurationService: ILanguageConfigurationService,\n\t) { }\n\n\thasChildren(element: BulkFileOperations | BulkEditElement): boolean {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.textEdits.length > 0;\n\t\t}\n\t\tif (element instanceof TextEditElement) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: BulkFileOperations | BulkEditElement): Promise<BulkEditElement[]> {\n\n\t\t// root -> file/text edits\n\t\tif (element instanceof BulkFileOperations) {\n\t\t\treturn this.groupByFile\n\t\t\t\t? element.fileOperations.map(op => new FileElement(element, op))\n\t\t\t\t: element.categories.map(cat => new CategoryElement(element, cat));\n\t\t}\n\n\t\t// category\n\t\tif (element instanceof CategoryElement) {\n\t\t\treturn Array.from(element.category.fileOperations, op => new FileElement(element, op));\n\t\t}\n\n\t\t// file: text edit\n\t\tif (element instanceof FileElement && element.edit.textEdits.length > 0) {\n\t\t\t// const previewUri = BulkEditPreviewProvider.asPreviewUri(element.edit.resource);\n\t\t\tlet textModel: ITextModel;\n\t\t\tlet textModelDisposable: IDisposable;\n\t\t\ttry {\n\t\t\t\tconst ref = await this._textModelService.createModelReference(element.edit.uri);\n\t\t\t\ttextModel = ref.object.textEditorModel;\n\t\t\t\ttextModelDisposable = ref;\n\t\t\t} catch {\n\t\t\t\ttextModel = new TextModel('', PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n\t\t\t\ttextModelDisposable = textModel;\n\t\t\t}\n\n\t\t\tconst result = element.edit.textEdits.map((edit, idx) => {\n\t\t\t\tconst range = Range.lift(edit.textEdit.textEdit.range);\n\n\t\t\t\t//prefix-math\n\t\t\t\tconst startTokens = textModel.tokenization.getLineTokens(range.startLineNumber);\n\t\t\t\tlet prefixLen = 23; // default value for the no tokens/grammar case\n\t\t\t\tfor (let idx = startTokens.findTokenIndexAtOffset(range.startColumn - 1) - 1; prefixLen < 50 && idx >= 0; idx--) {\n\t\t\t\t\tprefixLen = range.startColumn - startTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\t//suffix-math\n\t\t\t\tconst endTokens = textModel.tokenization.getLineTokens(range.endLineNumber);\n\t\t\t\tlet suffixLen = 0;\n\t\t\t\tfor (let idx = endTokens.findTokenIndexAtOffset(range.endColumn - 1); suffixLen < 50 && idx < endTokens.getCount(); idx++) {\n\t\t\t\t\tsuffixLen += endTokens.getEndOffset(idx) - endTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\treturn new TextEditElement(\n\t\t\t\t\telement,\n\t\t\t\t\tidx,\n\t\t\t\t\tedit,\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.startLineNumber, range.startColumn - prefixLen, range.startLineNumber, range.startColumn)),\n\t\t\t\t\ttextModel.getValueInRange(range),\n\t\t\t\t\t!edit.textEdit.textEdit.insertAsSnippet ? edit.textEdit.textEdit.text : SnippetParser.asInsertText(edit.textEdit.textEdit.text),\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.endLineNumber, range.endColumn, range.endLineNumber, range.endColumn + suffixLen))\n\t\t\t\t);\n\t\t\t});\n\n\t\t\ttextModelDisposable.dispose();\n\t\t\treturn result;\n\t\t}\n\n\t\treturn [];\n\t}\n}\n\n\nexport class BulkEditSorter implements ITreeSorter<BulkEditElement> {\n\n\tcompare(a: BulkEditElement, b: BulkEditElement): number {\n\t\tif (a instanceof FileElement && b instanceof FileElement) {\n\t\t\treturn compare(a.edit.uri.toString(), b.edit.uri.toString());\n\t\t}\n\n\t\tif (a instanceof TextEditElement && b instanceof TextEditElement) {\n\t\t\treturn Range.compareRangesUsingStarts(a.edit.textEdit.textEdit.range, b.edit.textEdit.textEdit.range);\n\t\t}\n\n\t\treturn 0;\n\t}\n}\n\n// --- ACCESSI\n\nexport class BulkEditAccessibilityProvider implements IListAccessibilityProvider<BulkEditElement> {\n\n\tconstructor(@ILabelService private readonly _labelService: ILabelService) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('bulkEdit', \"Bulk Edit\");\n\t}\n\n\tgetRole(_element: BulkEditElement): AriaRole {\n\t\treturn 'checkbox';\n\t}\n\n\tgetAriaLabel(element: BulkEditElement): string | null {\n\t\tif (element instanceof FileElement) {\n\t\t\tif (element.edit.textEdits.length > 0) {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.renameAndEdit', \"Renaming {0} to {1}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.createAndEdit', \"Creating {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.deleteAndEdit', \"Deleting {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.editOnly', \"{0}, making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.rename', \"Renaming {0} to {1}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.create', \"Creating {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.delete', \"Deleting {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (element instanceof TextEditElement) {\n\t\t\tif (element.selecting.length > 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: replace\n\t\t\t\treturn localize('aria.replace', \"line {0}, replacing {1} with {2}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting, element.inserting);\n\t\t\t} else if (element.selecting.length > 0 && element.inserting.length === 0) {\n\t\t\t\t// edit: delete\n\t\t\t\treturn localize('aria.del', \"line {0}, removing {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t} else if (element.selecting.length === 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: insert\n\t\t\t\treturn localize('aria.insert', \"line {0}, inserting {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// --- IDENT\n\nexport class BulkEditIdentityProvider implements IIdentityProvider<BulkEditElement> {\n\n\tgetId(element: BulkEditElement): { toString(): string } {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.uri + (element.parent instanceof CategoryElement ? JSON.stringify(element.parent.category.metadata) : '');\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn element.parent.edit.uri.toString() + element.idx;\n\t\t} else {\n\t\t\treturn JSON.stringify(element.category.metadata);\n\t\t}\n\t}\n}\n\n// --- RENDERER\n\nclass CategoryElementTemplate {\n\n\treadonly icon: HTMLDivElement;\n\treadonly label: IconLabel;\n\n\tconstructor(container: HTMLElement) {\n\t\tcontainer.classList.add('category');\n\t\tthis.icon = document.createElement('div');\n\t\tcontainer.appendChild(this.icon);\n\t\tthis.label = new IconLabel(container);\n\t}\n}\n\nexport class CategoryElementRenderer implements ITreeRenderer<CategoryElement, FuzzyScore, CategoryElementTemplate> {\n\n\tstatic readonly id: string = 'CategoryElementRenderer';\n\n\treadonly templateId: string = CategoryElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): CategoryElementTemplate {\n\t\treturn new CategoryElementTemplate(container);\n\t}\n\n\trenderElement(node: ITreeNode<CategoryElement, FuzzyScore>, _index: number, template: CategoryElementTemplate): void {\n\n\t\ttemplate.icon.style.setProperty('--background-dark', null);\n\t\ttemplate.icon.style.setProperty('--background-light', null);\n\t\ttemplate.icon.style.color = '';\n\n\t\tconst { metadata } = node.element.category;\n\t\tif (ThemeIcon.isThemeIcon(metadata.iconPath)) {\n\t\t\t// css\n\t\t\tconst className = ThemeIcon.asClassName(metadata.iconPath);\n\t\t\ttemplate.icon.className = className ? `theme-icon ${className}` : '';\n\t\t\ttemplate.icon.style.color = metadata.iconPath.color ? this._themeService.getColorTheme().getColor(metadata.iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t} else if (URI.isUri(metadata.iconPath)) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', dom.asCSSUrl(metadata.iconPath));\n\t\t\ttemplate.icon.style.setProperty('--background-light', dom.asCSSUrl(metadata.iconPath));\n\n\t\t} else if (metadata.iconPath) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', dom.asCSSUrl(metadata.iconPath.dark));\n\t\t\ttemplate.icon.style.setProperty('--background-light', dom.asCSSUrl(metadata.iconPath.light));\n\t\t}\n\n\t\ttemplate.label.setLabel(metadata.label, metadata.description, {\n\t\t\tdescriptionMatches: createMatches(node.filterData),\n\t\t});\n\t}\n\n\tdisposeTemplate(template: CategoryElementTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nclass FileElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _label: IResourceLabel;\n\tprivate readonly _details: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tresourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) {\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._label = resourceLabels.create(container, { supportHighlights: true });\n\n\t\tthis._details = document.createElement('span');\n\t\tthis._details.className = 'details';\n\t\tcontainer.appendChild(this._details);\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t\tthis._label.dispose();\n\t}\n\n\tset(element: FileElement, score: FuzzyScore | undefined) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._checkbox.checked = element.isChecked();\n\t\tthis._checkbox.disabled = element.isDisabled();\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', () => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t}));\n\n\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t// rename: oldName → newName\n\t\t\tthis._label.setResource({\n\t\t\t\tresource: element.edit.uri,\n\t\t\t\tname: localize('rename.label', \"{0} → {1}\", this._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })),\n\t\t\t}, {\n\t\t\t\tfileDecorations: { colors: true, badges: false }\n\t\t\t});\n\n\t\t\tthis._details.innerText = localize('detail.rename', \"(renaming)\");\n\n\t\t} else {\n\t\t\t// create, delete, edit: NAME\n\t\t\tconst options = {\n\t\t\t\tmatches: createMatches(score),\n\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\tfileDecorations: { colors: true, badges: false },\n\t\t\t\textraClasses: <string[]>[]\n\t\t\t};\n\t\t\tif (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\tthis._details.innerText = localize('detail.create', \"(creating)\");\n\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\tthis._details.innerText = localize('detail.del', \"(deleting)\");\n\t\t\t\toptions.extraClasses.push('delete');\n\t\t\t} else {\n\t\t\t\tthis._details.innerText = '';\n\t\t\t}\n\t\t\tthis._label.setFile(element.edit.uri, options);\n\t\t}\n\t}\n}\n\nexport class FileElementRenderer implements ITreeRenderer<FileElement, FuzzyScore, FileElementTemplate> {\n\n\tstatic readonly id: string = 'FileElementRenderer';\n\n\treadonly templateId: string = FileElementRenderer.id;\n\n\tconstructor(\n\t\tprivate readonly _resourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): FileElementTemplate {\n\t\treturn new FileElementTemplate(container, this._resourceLabels, this._labelService);\n\t}\n\n\trenderElement(node: ITreeNode<FileElement, FuzzyScore>, _index: number, template: FileElementTemplate): void {\n\t\ttemplate.set(node.element, node.filterData);\n\t}\n\n\tdisposeTemplate(template: FileElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\nclass TextEditElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _icon: HTMLDivElement;\n\tprivate readonly _label: HighlightedLabel;\n\n\tconstructor(container: HTMLElement, @IThemeService private readonly _themeService: IThemeService) {\n\t\tcontainer.classList.add('textedit');\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._icon = document.createElement('div');\n\t\tcontainer.appendChild(this._icon);\n\n\t\tthis._label = new HighlightedLabel(container);\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t}\n\n\tset(element: TextEditElement) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', e => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t\te.preventDefault();\n\t\t}));\n\t\tif (element.parent.isChecked()) {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t} else {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t}\n\n\t\tlet value = '';\n\t\tvalue += element.prefix;\n\t\tvalue += element.selecting;\n\t\tvalue += element.inserting;\n\t\tvalue += element.suffix;\n\n\t\tconst selectHighlight: IHighlight = { start: element.prefix.length, end: element.prefix.length + element.selecting.length, extraClasses: ['remove'] };\n\t\tconst insertHighlight: IHighlight = { start: selectHighlight.end, end: selectHighlight.end + element.inserting.length, extraClasses: ['insert'] };\n\n\t\tlet title: string | undefined;\n\t\tconst { metadata } = element.edit.textEdit;\n\t\tif (metadata && metadata.description) {\n\t\t\ttitle = localize('title', \"{0} - {1}\", metadata.label, metadata.description);\n\t\t} else if (metadata) {\n\t\t\ttitle = metadata.label;\n\t\t}\n\n\t\tconst iconPath = metadata?.iconPath;\n\t\tif (!iconPath) {\n\t\t\tthis._icon.style.display = 'none';\n\t\t} else {\n\t\t\tthis._icon.style.display = 'block';\n\n\t\t\tthis._icon.style.setProperty('--background-dark', null);\n\t\t\tthis._icon.style.setProperty('--background-light', null);\n\n\t\t\tif (ThemeIcon.isThemeIcon(iconPath)) {\n\t\t\t\t// css\n\t\t\t\tconst className = ThemeIcon.asClassName(iconPath);\n\t\t\t\tthis._icon.className = className ? `theme-icon ${className}` : '';\n\t\t\t\tthis._icon.style.color = iconPath.color ? this._themeService.getColorTheme().getColor(iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t\t} else if (URI.isUri(iconPath)) {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', dom.asCSSUrl(iconPath));\n\t\t\t\tthis._icon.style.setProperty('--background-light', dom.asCSSUrl(iconPath));\n\n\t\t\t} else {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', dom.asCSSUrl(iconPath.dark));\n\t\t\t\tthis._icon.style.setProperty('--background-light', dom.asCSSUrl(iconPath.light));\n\t\t\t}\n\t\t}\n\n\t\tthis._label.set(value, [selectHighlight, insertHighlight], title, true);\n\t\tthis._icon.title = title || '';\n\t}\n}\n\nexport class TextEditElementRenderer implements ITreeRenderer<TextEditElement, FuzzyScore, TextEditElementTemplate> {\n\n\tstatic readonly id = 'TextEditElementRenderer';\n\n\treadonly templateId: string = TextEditElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): TextEditElementTemplate {\n\t\treturn new TextEditElementTemplate(container, this._themeService);\n\t}\n\n\trenderElement({ element }: ITreeNode<TextEditElement, FuzzyScore>, _index: number, template: TextEditElementTemplate): void {\n\t\ttemplate.set(element);\n\t}\n\n\tdisposeTemplate(_template: TextEditElementTemplate): void { }\n}\n\nexport class BulkEditDelegate implements IListVirtualDelegate<BulkEditElement> {\n\n\tgetHeight(): number {\n\t\treturn 23;\n\t}\n\n\tgetTemplateId(element: BulkEditElement): string {\n\n\t\tif (element instanceof FileElement) {\n\t\t\treturn FileElementRenderer.id;\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn TextEditElementRenderer.id;\n\t\t} else {\n\t\t\treturn CategoryElementRenderer.id;\n\t\t}\n\t}\n}\n\n\nexport class BulkEditNaviLabelProvider implements IKeyboardNavigationLabelProvider<BulkEditElement> {\n\n\tgetKeyboardNavigationLabel(element: BulkEditElement) {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn basename(element.edit.uri);\n\t\t} else if (element instanceof CategoryElement) {\n\t\t\treturn element.category.metadata.label;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"]}